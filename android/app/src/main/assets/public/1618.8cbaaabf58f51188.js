"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1618],{1618:(M,C,r)=>{r.r(C),r.d(C,{AgendaTrainerPageModule:()=>Ze});var g=r(9808),m=r(4182),a=r(5362),u=r(2028),d=r(7181),f=r(7266),T=r(8223),A=r(2015),L=r(7304),O=r(9129),x=r(9442),y=r(5351),c=r(4021),I=r(1247),e=(r(9541),r(2096));function z(n,l){if(1&n&&e._UZ(0,"ion-icon",9),2&n){const t=e.oxw(2);e.Q6J("name",t.collapsed?"chevron-down-outline":"chevron-up-outline")}}function S(n,l){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-radio",12),e.qZA()),2&n){const t=l.$implicit,i=e.oxw(3);e.xp6(2),e.Oqu(t.DENOMINAZIONE),e.xp6(1),e.Q6J("disabled",i.readOnly)("value",t.ID)}}function b(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-radio-group",10),e.NdJ("ionChange",function(){return e.CHM(t),e.oxw(2).onChangeRadioGroup()})("ngModelChange",function(o){return e.CHM(t),e.oxw(2).myValutazione.IDLIVELLOFINALE=o}),e.YNc(1,S,4,3,"ion-item",11),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.myValutazione.IDLIVELLOFINALE),e.xp6(1),e.Q6J("ngForOf",t.listLivelli)}}function N(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list",1)(1,"ion-item-group",2)(2,"ion-item",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onChangeCollapse()}),e._UZ(3,"ion-icon",4),e.TgZ(4,"ion-label")(5,"h2"),e._uU(6),e.qZA(),e.TgZ(7,"p")(8,"ion-text",5),e._uU(9),e.qZA()(),e.TgZ(10,"p")(11,"ion-text",5),e._uU(12,"Conseguito:\xa0"),e.qZA(),e.TgZ(13,"ion-text",6),e._uU(14),e.qZA()()(),e.YNc(15,z,1,1,"ion-icon",7),e.qZA()(),e.YNc(16,b,2,2,"ion-radio-group",8),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("color",t.flagComplete?"success":"warning")("name",t.flagComplete?"checkmark-done-circle-outline":"alert-circle-outline"),e.xp6(3),e.Oqu(t.myValutazione.NOMINATIVO),e.xp6(3),e.hij("Attuale:\xa0",t.getLabelLevel(t.myValutazione.IDLIVELLOENTRATA),""),e.xp6(5),e.Oqu(t.getLabelLevel(t.myValutazione.IDLIVELLOFINALE)),e.xp6(1),e.Q6J("ngIf",!t.readOnly),e.xp6(1),e.Q6J("ngIf",!t.collapsed)}}r(427);let w=(()=>{class n{constructor(){this.readOnly=!1,this.listLivelli=[],this.onChoose=new e.vpe,this.collapsed=!0,this.flagComplete=!1}set valutazione(t){this.myValutazione=t,this.myValutazione&&(this.idSelectedLevel=this.myValutazione.IDLIVELLOFINALE?this.myValutazione.IDLIVELLOFINALE:this.myValutazione.IDLIVELLOENTRATA),this.setFlagComplete()}onChangeCollapse(){this.readOnly||(this.collapsed=!this.collapsed)}ngOnInit(){}setFlagComplete(){let t=!1;this.myValutazione&&this.myValutazione.IDLIVELLOFINALE&&0!=this.myValutazione.IDLIVELLOFINALE.length&&(t=!0),this.flagComplete=t}getLabelLevel(t){let o,i="non definito";return t&&(o=this.listLivelli.find(s=>s.ID==t),o&&(i=o.DENOMINAZIONE)),i}onChangeRadioGroup(){this.setFlagComplete(),this.onChoose.emit(this.myValutazione)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-level-setter"]],inputs:{readOnly:"readOnly",listLivelli:"listLivelli",valutazione:"valutazione"},outputs:{onChoose:"onChoose"},decls:1,vars:1,consts:[["class","ion-no-margin",4,"ngIf"],[1,"ion-no-margin"],["color","light"],["lines","none","color","light",3,"click"],["slot","start",3,"color","name"],["color","medium",2,"font-style","italic"],["color","medium",2,"font-style","italic","font-weight","bold"],["slot","end",3,"name",4,"ngIf"],[3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["slot","end",3,"name"],[3,"ngModel","ionChange","ngModelChange"],[4,"ngFor","ngForOf"],["slot","start","color","success",3,"disabled","value"]],template:function(t,i){1&t&&e.YNc(0,N,17,7,"ion-list",0),2&t&&e.Q6J("ngIf",i.myValutazione)},directives:[g.O5,a.q_,a.Ub,a.Ie,a.gu,a.Q$,a.yW,a.se,a.QI,m.JJ,m.On,g.sg,a.B7,a.U5],styles:["ion-item-group[_ngcontent-%COMP%]{min-height:50px}"]}),n})();var V=r(1626);function D(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-segment",20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().selectedView=o})("ionChange",function(o){return e.CHM(t),e.oxw().onChangeSegment(o)}),e.TgZ(1,"ion-segment-button",21),e._UZ(2,"ion-icon",22),e.TgZ(3,"ion-label"),e._uU(4,"Valutazione"),e.qZA()(),e.TgZ(5,"ion-segment-button",21),e._UZ(6,"ion-icon",23),e.TgZ(7,"ion-label"),e._uU(8,"Livelli"),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.selectedView),e.xp6(1),e.Q6J("value",1),e.xp6(4),e.Q6J("value",2)}}function E(n,l){1&n&&(e.TgZ(0,"ion-fab",24)(1,"ion-fab-button",25),e._uU(2,"Prova"),e.qZA()())}function U(n,l){if(1&n&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",26),e.TgZ(2,"ion-label"),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.xi3(4,1,t.myCorso.ORAINIZIO,"HH:mm")," ")}}function q(n,l){if(1&n&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",27),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.hij("",t.myCorso._DENOMINAZIONE_Livello?t.myCorso._DENOMINAZIONE_Livello:"Tutti i Livelli"," ")}}function J(n,l){if(1&n&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",28),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.hij("",t.myCorso._DESCTOOLTIP_CategoriaEta?t.myCorso._DESCTOOLTIP_CategoriaEta:"Per tutte le et\xe0"," ")}}function F(n,l){if(1&n&&(e.TgZ(0,"ion-item",29),e._UZ(1,"ion-icon",30),e.TgZ(2,"ion-label"),e._uU(3),e.ALo(4,"targetSesso"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,1,t.myCorso.TARGETSESSO))}}function Q(n,l){1&n&&(e.TgZ(0,"ion-item",25)(1,"ion-label"),e._uU(2,"Scheda Bloccata. Contattare Segreteria"),e.qZA()())}function R(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-col")(1,"ion-icon",35),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw(2).setStars(s+1)}),e.qZA()()}if(2&n){const t=l.$implicit;e.xp6(1),e.Q6J("name",t?"star":"star-outline")}}function Y(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"ion-item",29)(2,"ion-label",32),e._uU(3,"Soddisfazione Corso"),e.qZA(),e.TgZ(4,"ion-row"),e.YNc(5,R,2,1,"ion-col",33),e.qZA()(),e.TgZ(6,"ion-item")(7,"ion-label",32),e._uU(8,"Considerazioni finali"),e.qZA(),e.TgZ(9,"ion-textarea",34),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().myCorsoValutazione.TESTOVALUTAZIONE=o}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.collStars),e.xp6(4),e.Q6J("disabled",!t.canUpdate)("readonly",!t.canUpdate)("ngModel",t.myCorsoValutazione.TESTOVALUTAZIONE)}}function k(n,l){1&n&&(e.TgZ(0,"div",37)(1,"ion-label"),e._uU(2,"Nessun iscritto al corso"),e.qZA()())}function H(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-level-setter",41),e.NdJ("onChoose",function(o){return e.CHM(t),e.oxw(3).onChangeLivello(o)}),e.qZA()}if(2&n){const t=l.$implicit,i=e.oxw(3);e.Q6J("readOnly",!i.canUpdate)("listLivelli",i.myListLivelli)("valutazione",t)}}function G(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"ion-item",29)(2,"ion-label")(3,"h6"),e._uU(4,"Partecipanti"),e.qZA()(),e.TgZ(5,"ion-chip",38),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).chooseLivelloFinale()}),e._UZ(6,"ion-icon",39),e.TgZ(7,"ion-label"),e._uU(8),e.qZA()()(),e.YNc(9,H,1,3,"app-level-setter",40),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(8),e.AsE("",t.myListValutazioni.length,"\xa0",1!=t.myListValutazioni.length?"Iscritti al corso":"Iscritto al corso",""),e.xp6(1),e.Q6J("ngForOf",t.myListValutazioni)}}function B(n,l){if(1&n&&(e.TgZ(0,"div",31),e.YNc(1,k,3,0,"div",36),e.YNc(2,G,10,3,"div",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showAlertNoIscritti),e.xp6(1),e.Q6J("ngIf",t.showListIscritti)}}function j(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-footer")(1,"ion-button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e._uU(2," Conferma Valutazione "),e.qZA()()}}let P=(()=>{class n{constructor(t,i,o,s,_){this.modalCtrl=t,this.startService=i,this.actSheetController=o,this.toastController=s,this.alertController=_,this.canUpdate=!1,this.cardCollapsed=!0,this.myListLivelli=[],this.myListValutazioni=[],this.selectedView=1,this.showSegmentButton=!0,this.showAlertNoIscritti=!1,this.showListIscritti=!1,this.collStars=[],this.starIndex=0,this.maxNumberStars=5,this.setStars(0,!0)}set docCorsoValutazione(t){this.myCorsoValutazione=t,this.canUpdate=!1,t&&(t.FLAGBOZZA&&(this.canUpdate=!0),null!=t.VOTAZIONEFINALE&&(this.starIndex=t.VOTAZIONEFINALE),this.myListValutazioni=t.CORSOVALUTAZIONELIVELLO&&0!=t.CORSOVALUTAZIONELIVELLO.length?t.CORSOVALUTAZIONELIVELLO:[],this.setShowListaIscritti()),this.setStars(this.starIndex,!0)}set docCorso(t){this.myCorso=t}set collLivelli(t){this.myListLivelli=t,0==t.length&&(this.showSegmentButton=!1)}ngOnInit(){}setShowListaIscritti(){let t=!1;this.myListValutazioni&&0!=this.myListValutazioni.length&&(t=!0),this.showListIscritti=t,this.showAlertNoIscritti=!t}setStars(t,i=!1){if(this.canUpdate||i){if(0==this.collStars.length)for(let o=0;o<this.maxNumberStars;o++)this.collStars.push(o+1<=t);else for(let o=0;o<this.collStars.length;o++)this.collStars[o]=o+1<=t;this.starIndex=t}}chooseLivelloFinale(){let i,t=[];if(this.canUpdate&&this.myListLivelli&&0!=this.myListLivelli.length){for(const o of this.myListLivelli)i={text:o.DENOMINAZIONE,handler:()=>{this.applyLivelloFinaleForAll(o)}},t.push(i);i={text:"Annulla",icon:"arrow-undo-sharp",role:"cancel"},t.push(i),this.actSheetController.create({header:"Quale livello applichi a tutti i partecipanti ?",buttons:t}).then(o=>{o.present()})}}applyLivelloFinaleForAll(t){t&&this.myListValutazioni&&this.myListValutazioni.forEach(i=>{i.IDLIVELLOFINALE=t.ID})}onClickCollapsed(){this.cardCollapsed=!this.cardCollapsed}onChangeLivello(t){}onConfirm(){let i,t=[];this.canUpdate?(i={text:"Per modificarla in seguito",icon:"save-outline",handler:()=>{this.confirmSavingAs(!0)}},t.push(i),i={text:"In modo definitivo",icon:"document-lock-outline",handler:()=>{this.confirmSavingAs(!1)}},t.push(i),i={text:"Annulla",icon:"arrow-undo-sharp",role:"cancel"},t.push(i),this.actSheetController.create({header:"Come stai salvando la Scheda di Valutazione",buttons:t}).then(o=>{o.present()})):this.modalCtrl.dismiss()}confirmSavingAs(t){this.myCorsoValutazione.FLAGBOZZA=!!t,this.myCorsoValutazione.IDUTENTE=this.startService.actualUtente.ID,this.myCorsoValutazione.NOMINATIVO=this.startService.actualUtente.NOMINATIVO,this.myCorsoValutazione.VOTAZIONEFINALE=this.starIndex,this.startService.requestForSaveSchedaValutazioneCorso(this.myCorsoValutazione).then(i=>{i.result?(this.showMessage("Scheda salvata correttamente","toast"),this.modalCtrl.dismiss()):this.showMessage(i.message)}).catch(i=>{this.showMessage(i)})}onChangeSegment(t){}closeModal(){this.modalCtrl.dismiss()}showFabProva(){let t=!1;return this.myCorso&&this.myCorso.TIPO==c.oG.prova&&(t=!0),t}showMessage(t,i){"alert"==i?this.alertController.create({message:t,buttons:["OK"]}).then(s=>{s.present()}):this.toastController.create({message:t,duration:3e3}).then(o=>{o.present()})}getIcon(t){return this.startService.getSportIcon(t.IDSPORT)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.IN),e.Y36(I.D),e.Y36(a.BX),e.Y36(a.yF),e.Y36(a.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-valutazione-trainer"]],inputs:{docCorsoValutazione:"docCorsoValutazione",docCorso:"docCorso",collLivelli:"collLivelli"},decls:50,vars:26,consts:[["color","primary"],["slot","start"],["fill","clear",3,"click"],["name","arrow-back"],["mode","md"],[3,"ngModel","ngModelChange","ionChange",4,"ngIf"],[1,"ion-no-padding"],["vertical","top","horizontal","end",4,"ngIf"],["button","false","lines","none"],["slot","start",1,"icon-sport"],[3,"innerHTML"],[1,"ion-text-wrap"],["color","primary",1,"ion-text-wrap"],[2,"font-weight","bold"],["color","light",3,"click"],["slot","start",3,"name"],[4,"ngIf"],["lines","none",4,"ngIf"],["color","danger",4,"ngIf"],["class","contentExpand",4,"ngIf"],[3,"ngModel","ngModelChange","ionChange"],[3,"value"],["name","star-outline"],["name","bar-chart-outline"],["vertical","top","horizontal","end"],["color","danger"],["name","time-outline","slot","start"],["name","stats-chart-outline","slot","start"],["name","bookmark-outline","slot","start"],["lines","none"],["name","transgender-outline","slot","start"],[1,"contentExpand"],["position","stacked"],[4,"ngFor","ngForOf"],["autoGrow","true",1,"back-medium",3,"disabled","readonly","ngModel","ngModelChange"],["size","large",3,"name","click"],["class","nofind-cnt",4,"ngIf"],[1,"nofind-cnt"],["color","warning","slot","end",3,"click"],["name","people-circle-outline"],[3,"readOnly","listLivelli","valutazione","onChoose",4,"ngFor","ngForOf"],[3,"readOnly","listLivelli","valutazione","onChoose"],["color","tertiary","expand","block",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return i.closeModal()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Valutazione"),e.qZA()(),e.TgZ(7,"ion-toolbar",4),e.YNc(8,D,9,3,"ion-segment",5),e.qZA()(),e.TgZ(9,"ion-content")(10,"ion-card")(11,"ion-card-header",6),e.YNc(12,E,3,0,"ion-fab",7),e.TgZ(13,"ion-item",8)(14,"i",9),e._UZ(15,"span",10),e.qZA(),e.TgZ(16,"ion-label")(17,"h1",11),e._uU(18),e.qZA(),e.TgZ(19,"h3",11),e._uU(20),e.qZA()()(),e.TgZ(21,"ion-item",8)(22,"ion-label",12)(23,"p"),e._uU(24," da\xa0"),e.TgZ(25,"ion-text",13),e._uU(26),e.ALo(27,"titlecase"),e.ALo(28,"date"),e.qZA(),e._uU(29," a\xa0"),e.TgZ(30,"ion-text",13),e._uU(31),e.ALo(32,"titlecase"),e.ALo(33,"date"),e.qZA()()()()(),e.TgZ(34,"ion-card-content")(35,"ion-list",6)(36,"ion-item-group")(37,"ion-item-divider",14),e.NdJ("click",function(){return i.onClickCollapsed()}),e._UZ(38,"ion-icon",15),e.TgZ(39,"ion-label")(40,"h2"),e._uU(41,"Altre informazioni"),e.qZA()()()(),e.YNc(42,U,5,4,"ion-item",16),e.YNc(43,q,4,1,"ion-item",16),e.YNc(44,J,4,1,"ion-item",16),e.YNc(45,F,5,3,"ion-item",17),e.qZA()()(),e.YNc(46,Q,3,0,"ion-item",18),e.YNc(47,Y,10,4,"div",19),e.YNc(48,B,3,2,"div",19),e.qZA(),e.YNc(49,j,3,0,"ion-footer",16)),2&t&&(e.xp6(8),e.Q6J("ngIf",i.showSegmentButton),e.xp6(4),e.Q6J("ngIf",i.showFabProva()),e.xp6(3),e.Q6J("innerHTML",i.getIcon(i.myCorso),e.oJD),e.xp6(3),e.Oqu(i.myCorso.DENOMINAZIONE),e.xp6(2),e.Oqu(i.myCorso._DENOMINAZIONE_Sport),e.xp6(6),e.hij("",e.lcZ(27,16,e.xi3(28,18,i.myCorso.DATAINIZIO,"EEE dd/MM/yyyy"))," "),e.xp6(5),e.hij("",e.lcZ(32,21,e.xi3(33,23,i.myCorso.DATAFINE,"EEE dd/MM/yyyy"))," "),e.xp6(7),e.Q6J("name",i.cardCollapsed?"chevron-down-outline":"chevron-up-outline"),e.xp6(4),e.Q6J("ngIf",!i.cardCollapsed),e.xp6(1),e.Q6J("ngIf",!i.cardCollapsed),e.xp6(1),e.Q6J("ngIf",!i.cardCollapsed),e.xp6(1),e.Q6J("ngIf",i.myCorso.TARGETSESSO&&!i.cardCollapsed),e.xp6(1),e.Q6J("ngIf",!i.canUpdate),e.xp6(1),e.Q6J("ngIf",1==i.selectedView),e.xp6(1),e.Q6J("ngIf",2==i.selectedView),e.xp6(1),e.Q6J("ngIf",i.canUpdate))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,g.O5,a.cJ,a.QI,m.JJ,m.On,a.GO,a.Q$,a.W2,a.PM,a.Zi,a.IJ,a.W4,a.Ie,a.yW,a.FN,a.q_,a.Ub,a.rH,a.Nd,g.sg,a.wI,a.g2,a.j9,a.hM,w,a.fr],pipes:[g.rS,g.uU,V.u],styles:[".back-medium[_ngcontent-%COMP%]{--background: var(--ion-color-light, #f4f5f8)}.contentExpand[_ngcontent-%COMP%]{height:100%}"]}),n})();function $(n,l){if(1&n&&(e.TgZ(0,"h5")(1,"span"),e._uU(2),e.ALo(3,"lowercase"),e.ALo(4,"date"),e.qZA(),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"date"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,2,e.xi3(4,4,t.myCorso.DATAFINE,"EEE")),"\xa0"),e.xp6(3),e.hij(" ",e.lcZ(6,7,e.xi3(7,9,t.myCorso.DATAFINE,"d MMM yy"))," ")}}function W(n,l){1&n&&(e.TgZ(0,"ion-chip",15)(1,"span"),e._uU(2,"PROVA"),e.qZA()())}function X(n,l){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.labelSport)}}function K(n,l){if(1&n&&(e.TgZ(0,"ion-chip",6)(1,"ion-label")(2,"h4")(3,"strong"),e._uU(4),e.qZA()()()()),2&n){const t=e.oxw(2);e.Q6J("color",t.colorItem()),e.xp6(4),e.Oqu(t.labelLivello)}}function ee(n,l){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.labelLocation)}}function te(n,l){if(1&n&&(e.TgZ(0,"div",1)(1,"ion-grid",2)(2,"ion-row",3)(3,"ion-col",4)(4,"ion-label",5)(5,"h5")(6,"span"),e._uU(7),e.ALo(8,"lowercase"),e.ALo(9,"date"),e.qZA(),e._uU(10),e.ALo(11,"titlecase"),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"ion-chip",6)(14,"ion-label")(15,"h4"),e._uU(16),e.ALo(17,"date"),e.qZA()(),e._UZ(18,"ion-icon",7),e.qZA(),e.YNc(19,$,8,12,"h5",8),e.qZA()(),e.TgZ(20,"ion-col",9)(21,"ion-label")(22,"p",10),e.YNc(23,W,3,0,"ion-chip",11),e.TgZ(24,"span")(25,"strong"),e._uU(26),e.qZA()()(),e.TgZ(27,"h4",12),e._uU(28),e.qZA(),e.YNc(29,X,2,1,"p",8),e.qZA()(),e.TgZ(30,"ion-col",13)(31,"ion-label"),e.YNc(32,K,5,2,"ion-chip",14),e.YNc(33,ee,2,1,"h5",8),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(7),e.hij("",e.lcZ(8,12,e.xi3(9,14,t.myCorso.DATAINIZIO,"EEE")),"\xa0"),e.xp6(3),e.hij(" ",e.lcZ(11,17,e.xi3(12,19,t.myCorso.DATAINIZIO,"d MMM yy"))," "),e.xp6(3),e.Q6J("color",t.colorItem()),e.xp6(3),e.Oqu(e.xi3(17,22,t.myCorso.ORAINIZIO,"HH:mm")),e.xp6(3),e.Q6J("ngIf",1!=t.myCorso.NUMEROLEZIONI),e.xp6(1),e.Q6J("ngClass",t.getClassColorColumn()),e.xp6(3),e.Q6J("ngIf",t.valueTipoCorso==t.tipoCorso.prova),e.xp6(3),e.Oqu(t.labelSiglaCalendario),e.xp6(2),e.Oqu(t.labelDenominazioneCorso),e.xp6(1),e.Q6J("ngIf",0!=t.labelSport.length),e.xp6(3),e.Q6J("ngIf",0!=t.labelLivello.length),e.xp6(1),e.Q6J("ngIf",0!=t.labelLocation.length)}}function ne(n,l){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.TgZ(2,"span"),e._uU(3,"\xa0minuti"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.myPianificazione.getMinutiLezione()," ")}}function ie(n,l){1&n&&(e.TgZ(0,"ion-chip",15)(1,"span"),e._uU(2,"PROVA"),e.qZA()())}function oe(n,l){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.labelSport)}}function ae(n,l){if(1&n&&(e.TgZ(0,"ion-chip",6)(1,"ion-label")(2,"h4")(3,"strong"),e._uU(4),e.qZA()()()()),2&n){const t=e.oxw(2);e.Q6J("color",t.colorItem()),e.xp6(4),e.Oqu(t.labelLivello)}}function le(n,l){if(1&n&&(e.TgZ(0,"h5",10)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.labelLocation)}}function se(n,l){if(1&n&&(e.TgZ(0,"p",10)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.labelCampo)}}function re(n,l){if(1&n&&(e.TgZ(0,"div",1)(1,"ion-grid",2)(2,"ion-row",3)(3,"ion-col",4)(4,"ion-label",5)(5,"h5")(6,"span"),e._uU(7),e.ALo(8,"lowercase"),e.ALo(9,"date"),e.qZA(),e._uU(10),e.ALo(11,"titlecase"),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"ion-chip",6)(14,"ion-label")(15,"h4"),e._uU(16),e.ALo(17,"date"),e.qZA()(),e._UZ(18,"ion-icon",7),e.qZA(),e.YNc(19,ne,4,1,"h5",8),e.qZA()(),e.TgZ(20,"ion-col",9)(21,"ion-label")(22,"p",10),e.YNc(23,ie,3,0,"ion-chip",11),e.TgZ(24,"span")(25,"strong"),e._uU(26),e.qZA()()(),e.TgZ(27,"h4",12),e._uU(28),e.qZA(),e.YNc(29,oe,2,1,"p",8),e.qZA()(),e.TgZ(30,"ion-col",13)(31,"ion-label"),e.YNc(32,ae,5,2,"ion-chip",14),e.YNc(33,le,3,1,"h5",16),e.YNc(34,se,3,1,"p",16),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(7),e.hij("",e.lcZ(8,13,e.xi3(9,15,t.myPianificazione.DATAORAINIZIO,"EEE")),"\xa0"),e.xp6(3),e.hij(" ",e.lcZ(11,18,e.xi3(12,20,t.myPianificazione.DATAORAINIZIO,"d MMM yy"))," "),e.xp6(3),e.Q6J("color",t.colorItem()),e.xp6(3),e.Oqu(e.xi3(17,23,t.myPianificazione.DATAORAINIZIO,"HH:mm")),e.xp6(3),e.Q6J("ngIf",0!=t.myPianificazione.getMinutiLezione()),e.xp6(1),e.Q6J("ngClass",t.getClassColorColumn()),e.xp6(3),e.Q6J("ngIf",t.valueTipoCorso==t.tipoCorso.prova),e.xp6(3),e.Oqu(t.labelSiglaCalendario),e.xp6(2),e.Oqu(t.labelDenominazioneCorso),e.xp6(1),e.Q6J("ngIf",0!=t.labelSport.length),e.xp6(3),e.Q6J("ngIf",0!=t.labelLivello.length),e.xp6(1),e.Q6J("ngIf",0!=t.labelLocation.length),e.xp6(1),e.Q6J("ngIf",0!=t.labelCampo.length)}}let ce=(()=>{class n{constructor(){this.typeList="corsi",this.tipoCorso=c.oG,this.labelSiglaCalendario="",this.labelDenominazioneCorso="",this.labelLocation="",this.labelLivello="",this.labelCampo="",this.labelSport="",this.click=new e.vpe}set myDocument(t){t instanceof A._?(this.myCorso=t,this.typeList="corsi"):t instanceof x.N&&(this.myPianificazione=t,this.typeList="pianificazioni"),this.setLabel()}ngOnInit(){}onClick(){this.click.emit()}colorItem(){let t,i="success";switch(t=c.cJ.PASSATO,this.typeList){case"corsi":this.myCorso&&(t=this.myCorso.tempoCorso());break;case"pianificazioni":this.myPianificazione&&(t=this.myPianificazione.tempoCorso());break;default:t=c.cJ.PASSATO}switch(t){case c.cJ.FUTURO:i="warning";break;case c.cJ.IN_CORSO:i="success";break;case c.cJ.PASSATO:i="danger"}return i}getClassColorColumn(){let t;switch(t=c.cJ.PASSATO,this.typeList){case"corsi":this.myCorso&&(t=this.myCorso.tempoCorso());break;case"pianificazioni":this.myPianificazione&&(t=this.myPianificazione.tempoCorso());break;default:t=c.cJ.PASSATO}return t}setLabel(){let t="";this.labelSiglaCalendario="",this.labelDenominazioneCorso="",this.valueTipoCorso=null,this.labelLocation="",this.labelLivello="",this.labelCampo="",this.labelSport="",this.myCorso?(t="SIGLACALENDARIO",this.labelSiglaCalendario=this.nullValue(this.myCorso[t]),t="DENOMINAZIONE",this.labelDenominazioneCorso=this.nullValue(this.myCorso[t]),t="TIPO",this.valueTipoCorso=this.myCorso[t],t="_DENOMINAZIONE_Location",this.labelLocation=this.nullValue(this.myCorso[t]),t="_DENOMINAZIONE_Livello",this.labelLivello=this.nullValue(this.myCorso[t]),t="_DENOMINAZIONE_Sport",this.labelSport=this.nullValue(this.myCorso[t])):this.myPianificazione&&(this.labelSiglaCalendario=this.nullValue(this.myPianificazione.getDocPropertyInRepository(["IDCORSO"],"SIGLACALENDARIO")),t="_DENOMINAZIONE_Corso",this.labelDenominazioneCorso=this.nullValue(this.myPianificazione[t]),this.valueTipoCorso=this.myPianificazione.getDocPropertyInRepository(["IDCORSO"],"TIPO"),t="_DENOMINAZIONE_Location",this.labelLocation=this.nullValue(this.myPianificazione[t]),this.labelLivello=this.nullValue(this.myPianificazione.getDocPropertyInRepository(["IDCORSO","IDLIVELLOENTRATA"],"DENOMINAZIONE")),this.labelSport=this.nullValue(this.myPianificazione.getDocPropertyInRepository(["IDCORSO","IDSPORT"],"DENOMINAZIONE")),t="_DENOMINAZIONE_Campo",this.labelCampo=this.nullValue(this.myPianificazione[t]))}nullValue(t){return t||""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-item-agenda-trainer"]],inputs:{myDocument:"myDocument"},outputs:{click:"click"},decls:2,vars:2,consts:[["class","custom-element",4,"ngIf"],[1,"custom-element"],[1,"ion-no-padding"],[1,"ion-align-items-center"],["size","3",1,"ion-no-padding","col-left"],[1,"center-label"],[3,"color"],["name","time-outline"],[4,"ngIf"],["size","5",1,"ion-no-padding","col-center",3,"ngClass"],[1,"text-truncate"],["color","warning",4,"ngIf"],[1,"ion-text-wrap"],["size","4",1,"ion-no-padding","col-right"],[3,"color",4,"ngIf"],["color","warning"],["class","text-truncate",4,"ngIf"]],template:function(t,i){1&t&&(e.YNc(0,te,34,25,"div",0),e.YNc(1,re,35,26,"div",0)),2&t&&(e.Q6J("ngIf","corsi"==i.typeList),e.xp6(1),e.Q6J("ngIf","pianificazioni"==i.typeList))},directives:[g.O5,a.jY,a.Nd,a.wI,a.Q$,a.hM,a.gu,g.mk],pipes:[g.i8,g.uU,g.rS],styles:["h2[_ngcontent-%COMP%]{font-size:16px}h3[_ngcontent-%COMP%]{color:gray;font-size:12px;font-weight:480}h4[_ngcontent-%COMP%]{font-size:14px}div.custom-element[_ngcontent-%COMP%]{cursor:pointer;padding:8px 5px;border-bottom:1px;border-bottom-style:solid;border-bottom-color:#b5b5b5}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]{padding-right:0}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:center}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:large}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:medium}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:medium}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]{padding-left:0}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;color:#727272}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:large}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:medium}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center.undef[_ngcontent-%COMP%]{border-left-color:var(--ion-color-primary)}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center.concluso[_ngcontent-%COMP%]{border-left-color:var(--ion-color-danger)}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center.futuro[_ngcontent-%COMP%]{border-left-color:var(--ion-color-warning)}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center.incorso[_ngcontent-%COMP%]{border-left-color:var(--ion-color-success)}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]{text-align:center;padding-left:0}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;color:#727272}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:large}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:medium}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:xx-small}div.custom-element[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}div.custom-element[_ngcontent-%COMP%]   ion-badge.badge-icon-only[_ngcontent-%COMP%]{font-size:30px}div.custom-element[_ngcontent-%COMP%]   ion-badge.badge-icon-only[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-top:4px}"]}),n})();function ge(n,l){1&n&&(e.TgZ(0,"ion-item",24)(1,"ion-label",25)(2,"h6"),e._uU(3,"E' possibile ottenere l'elenco degli impegni giornalieri, settimanali o mensili"),e.qZA()(),e._UZ(4,"ion-icon",26),e.qZA())}function _e(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",27),e._UZ(1,"ion-icon",28),e.TgZ(2,"ion-label"),e._uU(3,"Ricerca Impegni"),e.qZA(),e.TgZ(4,"ion-select",29),e.NdJ("ionChange",function(o){return e.CHM(t),e.oxw(2).onChangePageRangeSearch(o)})("ngModelChange",function(o){return e.CHM(t),e.oxw(2).rangeSearchPianificazioni=o}),e.TgZ(5,"ion-select-option",5),e._uU(6,"Giornalieri"),e.qZA(),e.TgZ(7,"ion-select-option",5),e._uU(8,"Settimanali"),e.qZA(),e.TgZ(9,"ion-select-option",5),e._uU(10,"Mensili"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.rangeSearchPianificazioni),e.xp6(1),e.Q6J("value",t.PageRangeSearch.giorno),e.xp6(2),e.Q6J("value",t.PageRangeSearch.settimana),e.xp6(2),e.Q6J("value",t.PageRangeSearch.mese)}}function me(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-item-agenda-trainer",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).onClickImpegno(s)}),e.qZA()}2&n&&e.Q6J("myDocument",l.$implicit)}function ue(n,l){if(1&n&&(e.TgZ(0,"div",12)(1,"ion-list",12),e.YNc(2,me,1,1,"app-item-agenda-trainer",30),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.myListPianificazioni)}}function de(n,l){1&n&&(e.TgZ(0,"div",32)(1,"ion-label"),e._uU(2,"Nessun corso trovato"),e.qZA()())}function he(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"ion-list",12)(2,"ion-item-group")(3,"ion-item-divider",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().onChangeCollapseFilterPianificazioni()}),e._UZ(4,"ion-icon",14)(5,"ion-icon",15),e.TgZ(6,"ion-label")(7,"h2"),e._uU(8),e.qZA()()(),e.YNc(9,ge,5,0,"ion-item",16),e.YNc(10,_e,11,4,"ion-item",17),e.TgZ(11,"ion-item",18),e._UZ(12,"ion-icon",19),e.TgZ(13,"ion-datetime",20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().selectedIsoDate=o})("ngModelChange",function(){return e.CHM(t),e.oxw().onChangeFilterDateImpegni()}),e.qZA(),e._UZ(14,"ion-icon",21),e.qZA()()(),e.YNc(15,ue,3,1,"div",22),e.YNc(16,de,3,0,"div",23),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("name",t.collapsedFilterPianificazioni?"arrow-down-circle-outline":"arrow-up-circle-outline"),e.xp6(3),e.Oqu(t.getLabelFilterImpegni()),e.xp6(1),e.Q6J("ngIf",!t.collapsedFilterPianificazioni),e.xp6(1),e.Q6J("ngIf",!t.collapsedFilterPianificazioni),e.xp6(3),e.Q6J("ngModel",t.selectedIsoDate),e.xp6(2),e.Q6J("ngIf",t.myListPianificazioni&&0!=t.myListPianificazioni.length),e.xp6(1),e.Q6J("ngIf",!t.myListPianificazioni||0==t.myListPianificazioni.length)}}function pe(n,l){1&n&&(e.TgZ(0,"ion-item",24)(1,"ion-label",25)(2,"h6"),e._uU(3,"Elenco dei corsi svolti, in esecuzione o da eseguire prossimamente come trainer o assistente. Al termine del corso potrai dare una valutazione finale dei partecipanti, assegnando eventualmente un nuovo livello raggiunto"),e.qZA()(),e._UZ(4,"ion-icon",26),e.qZA())}function fe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-item-agenda-trainer",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).onClickCorso(s)}),e.qZA()}2&n&&e.Q6J("myDocument",l.$implicit)}function Ce(n,l){if(1&n&&(e.TgZ(0,"div",12)(1,"ion-list",12),e.YNc(2,fe,1,1,"app-item-agenda-trainer",30),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.myListCorsi)}}function Te(n,l){1&n&&(e.TgZ(0,"div",32)(1,"ion-label"),e._uU(2,"Nessun corso trovato"),e.qZA()())}function Ae(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"ion-list",12)(2,"ion-item-group")(3,"ion-item-divider",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().onChangeCollapseFilterCorsi()}),e._UZ(4,"ion-icon",14)(5,"ion-icon",15),e.TgZ(6,"ion-label")(7,"h2"),e._uU(8,"Corsi che risultano"),e.qZA()()(),e.YNc(9,pe,5,0,"ion-item",16),e.TgZ(10,"ion-item",18),e._UZ(11,"ion-icon",33),e.TgZ(12,"ion-select",34),e.NdJ("ionChange",function(o){return e.CHM(t),e.oxw().onChangeTimeState(o)})("ngModelChange",function(o){return e.CHM(t),e.oxw().selectedTimeState=o}),e.TgZ(13,"ion-select-option",5),e._uU(14," Conclusi "),e.qZA(),e.TgZ(15,"ion-select-option",5),e._uU(16," In Esecuzione "),e.qZA(),e.TgZ(17,"ion-select-option",5),e._uU(18," Futuri "),e.qZA()(),e._UZ(19,"ion-icon",21),e.qZA()()(),e.YNc(20,Ce,3,1,"div",22),e.YNc(21,Te,3,0,"div",23),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("name",t.collapsedFilterCorsi?"arrow-down-circle-outline":"arrow-up-circle-outline"),e.xp6(4),e.Q6J("ngIf",!t.collapsedFilterCorsi),e.xp6(3),e.Q6J("ngModel",t.selectedTimeState),e.xp6(1),e.Q6J("value",t.TimeStateCourse.passati),e.xp6(2),e.Q6J("value",t.TimeStateCourse.attivi),e.xp6(2),e.Q6J("value",t.TimeStateCourse.futuri),e.xp6(3),e.Q6J("ngIf",t.myListCorsi&&0!=t.myListCorsi.length),e.xp6(1),e.Q6J("ngIf",!t.myListCorsi||0==t.myListCorsi.length)}}var h=(()=>{return(n=h||(h={})).impegni="impegni",n.corsi="corsi",h;var n})();const Oe=[{path:"",component:(()=>{class n{constructor(t,i,o,s,_,p,Me,Le){this.startService=t,this.navController=i,this.loadingController=o,this.toastController=s,this.alertController=_,this.modalController=p,this.docStructureService=Me,this.actionController=Le,this.lingua=c.SQ.italiano,this.utente=new y.oD,this.myListPianificazioni=[],this.selectedDate=new Date,this.selectedIsoDate=this.selectedDate.toISOString(),this.rangeSearchPianificazioni=c.p2.giorno,this.PageRangeSearch=c.p2,this.collapsedFilterPianificazioni=!0,this.collapsedFilterCorsi=!0,this.myListCorsi=[],this.showFilter=!0,this.PageView=h,this.selectedView=h.impegni,this.TimeStateCourse=c.Rd,this.selectedTimeState=c.Rd.attivi,this.today=new Date,this.listenChangeListCorsi()}ngOnInit(){this.utente=this.startService.actualUtente,this.utente.isTrainer||this.utente.isAssistenteTrainer?this.requestImpegni():this.navController.navigateRoot("/home")}ngOnDestroy(){this.subListenCorsi&&this.subListenCorsi.unsubscribe()}prepareDateForSearchImpegni(){let t,i,o;return this.rangeSearchPianificazioni==c.p2.giorno?(t=this.selectedDate,i=this.selectedDate):this.rangeSearchPianificazioni==c.p2.settimana?(t=d.G.getStartEndDate(this.selectedDate,"week","start"),i=d.G.getStartEndDate(this.selectedDate,"week","end")):this.rangeSearchPianificazioni==c.p2.mese&&(t=d.G.getStartEndDate(this.selectedDate,"month","start"),i=d.G.getStartEndDate(this.selectedDate,"month","end")),o={startDate:t,endDate:i},o}requestImpegni(t){let i;this.loadingController.create({message:"Caricamento...",spinner:"circular",backdropDismiss:!0}).then(o=>{o.present(),i=this.prepareDateForSearchImpegni(),this.collapsedFilterPianificazioni=!0,this.startService.requestImpegniTrainer(this.utente.ID,i.startDate,i.endDate).then(s=>{this.docStructureService.getRelMultiDocCollection(s,[["IDCORSO","IDLIVELLOENTRATA"],["IDCORSO","IDSPORT"],["IDCORSO"]]).then(()=>{this.myListPianificazioni=s,o.dismiss(),t&&t.target&&t.target.complete()}).catch(()=>{this.myListPianificazioni=s,o.dismiss(),t&&t.target&&t.target.complete()})}).catch(s=>{t&&t.target&&t.target.complete(),o.dismiss(),console.log(s),this.showMessage("Errore di connessione")})})}requestTimeCorsi(t){this.loadingController.create({message:"Caricamento...",spinner:"circular",backdropDismiss:!0}).then(i=>{t&&t.target&&t.target.complete(),this.myLoadingForCorsi=i,this.myLoadingForCorsi.present(),this.startService.requestTimeTrainerCourse(this.utente.ID,this.selectedTimeState)})}onClickImpegno(t){let i,_,o=!1,s=new Date;console.log("qui"),t&&(i=t.getDocInRepository(["IDCORSO"]),i&&(_=d.G.mergeDateAndTime(i.DATAFINE,i.ORAINIZIO),s>=_&&(o=!0))),o?this.askPresenzeValutazioni(t):this.showSchedaPresenze(t.ID)}showSchedaPresenze(t){t&&0!=t.length&&this.navController.navigateForward("/agenda-trainer/"+t)}_forValutazioneRequestCorso(t){let i,o,s;return new Promise(_=>{t?t instanceof A._?_(t):t instanceof x.N?(i=new A._(!0),i.ID=t.IDCORSO,s=new f.dR,s.active=!0,o=new f.Kl,o.decode=s,this.docStructureService.requestNew(i,o).then(p=>{_(p&&0!=p.length?p[0]:null)}).catch(p=>{O.M.consoleLog(p),_(null)})):_(null):_(null)})}onClickCorso(t){this.showSchedaValutazioni(t)}showSchedaValutazioni(t){t&&this.loadingController.create({message:"Caricamento...",spinner:"circular",backdropDismiss:!0}).then(i=>{i.present(),this._forValutazioneRequestCorso(t).then(o=>{o?this._requestAndOpenValutazione(o,i):(i.dismiss(),this.showMessage("Informazioni corso non trovate"))})})}_requestAndOpenValutazione(t,i){t?this.startService.requestSchedaValutazioneCorso(t.ID).then(o=>{this.startService.requestLivelliForSport(t.IDSPORT).then(s=>{i.dismiss(),this._openModaleSchedaValutazione(o,t,s)}).catch(s=>{i.dismiss(),O.M.consoleLog(s),this.showMessage("Recupero Livelli fallito")})}).catch(o=>{i.dismiss(),this.showMessage(o,"alert")}):i.dismiss()}_openModaleSchedaValutazione(t,i,o){t&&i&&this.modalController.create({component:P,componentProps:{docCorsoValutazione:t,docCorso:i,collLivelli:o}}).then(s=>{s.present()})}showMessage(t,i){"alert"==i?this.alertController.create({message:t,buttons:["OK"]}).then(s=>{s.present()}):this.toastController.create({message:t,duration:3e3}).then(o=>{o.present()})}onChangeFilterDateImpegni(){this.selectedDate=new Date(this.selectedIsoDate),this.requestImpegni()}onChangeCollapseFilterPianificazioni(){this.collapsedFilterPianificazioni=!this.collapsedFilterPianificazioni}onChangeCollapseFilterCorsi(){this.collapsedFilterCorsi=!this.collapsedFilterCorsi}onChangePageRangeSearch(t){this.requestImpegni()}getItemParamsFromPianificazione(t){return L.g.getParamsPianificazioneCorso(t)}getIconSport(t){return this.startService.getSportIcon(t)}getColorIconCorso(t){let i="primary",o=new Date(d.G.formatDateISO(new Date));return t&&(i=t.DATAFINE<o?"danger":t.DATAINIZIO>o?"warning":"success"),i}getLabelFilterImpegni(){let t;switch(this.rangeSearchPianificazioni){case c.p2.giorno:t="Impegni giornalieri";break;case c.p2.settimana:t="Impegni settimanali";break;case c.p2.mese:t="Impegni mensili"}return t}onScroll(t){t.detail.currentY<5?this.showFilter=!0:t.detail.deltaY>20?this.showFilter=!1:t.detail.deltaY<-20&&(this.showFilter=!0)}doRefresh(t){this.selectedView==this.PageView.impegni?this.requestImpegni(t):this.selectedView==this.PageView.corsi&&this.requestTimeCorsi(t)}onChangeSegment(t){switch(this.selectedView){case h.corsi:this.requestTimeCorsi();break;case h.impegni:this.requestImpegni()}}onChangeTimeState(t){this.requestTimeCorsi()}listenChangeListCorsi(){this.subListenCorsi=this.startService.listCorsiTrainer.subscribe(t=>{this.myListCorsi=t,this.myLoadingForCorsi&&this.myLoadingForCorsi.dismiss()},t=>{this.myListCorsi=[],this.myLoadingForCorsi&&this.myLoadingForCorsi.dismiss()})}askPresenzeValutazioni(t){let i=this;t&&this.actionController.create({header:"Cosa vuoi fare",buttons:[{icon:"bar-chart-outline",text:"Valutazioni",handler:()=>{i.showSchedaValutazioni(t)}},{icon:"people-circle-outline",text:"Presenze",handler:()=>{i.showSchedaPresenze(t.ID)}},{icon:"arrow-undo-outline",text:"Annulla",role:"cancel"}]}).then(o=>{o.present()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(I.D),e.Y36(a.SH),e.Y36(a.HT),e.Y36(a.yF),e.Y36(a.Br),e.Y36(a.IN),e.Y36(T.l),e.Y36(a.BX))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-agenda-trainer"]],decls:21,vars:5,consts:[["color","primary"],["slot","start"],["defaultHref","/home"],["mode","md"],[3,"ngModel","ngModelChange","ionChange"],[3,"value"],["name","today-outline"],["name","bar-chart-outline"],["scrollEvents","",3,"ionScroll"],["slot","fixed",3,"ionRefresh"],["class","contentExpand",4,"ngIf"],[1,"contentExpand"],[1,"ion-no-padding"],["color","light",1,"ion-padding-horizontal",3,"click"],["slot","start","name","filter-circle-outline"],["slot","end",3,"name"],["lines","none","color","",4,"ngIf"],["class","mb-8","lines","none","color","warning","detail","true",4,"ngIf"],["lines","none","color","warning"],["slot","start","name","calendar-outline","color","primary"],["displayFormat","DDDD - DD/MM/YYYY","cancelText","Annulla","doneText","Conferma","max","2099-12-31",3,"ngModel","ngModelChange"],["name","chevron-down-outline","color","primary","slot","end"],["class","ion-no-padding",4,"ngIf"],["class","nofind-cnt",4,"ngIf"],["lines","none","color",""],[1,"ion-text-wrap"],["slot","start","name","information-circle-outline"],["lines","none","color","warning","detail","true",1,"mb-8"],["slot","start","name","search-circle-outline"],["mode","ios","interface","action-sheet","okText","Conferma","cancelText","Annulla",3,"ngModel","ionChange","ngModelChange"],[3,"myDocument","click",4,"ngFor","ngForOf"],[3,"myDocument","click"],[1,"nofind-cnt"],["slot","start","name","hourglass-outline","color","primary"],["mode","ios","interface","action-sheet",3,"ngModel","ionChange","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Agenda Impegni"),e.qZA()(),e.TgZ(6,"ion-toolbar",3)(7,"ion-segment",4),e.NdJ("ngModelChange",function(s){return i.selectedView=s})("ionChange",function(s){return i.onChangeSegment(s)}),e.TgZ(8,"ion-segment-button",5),e._UZ(9,"ion-icon",6),e.TgZ(10,"ion-label"),e._uU(11,"Impegni"),e.qZA()(),e.TgZ(12,"ion-segment-button",5),e._UZ(13,"ion-icon",7),e.TgZ(14,"ion-label"),e._uU(15,"Valutazioni"),e.qZA()()()()(),e.TgZ(16,"ion-content",8),e.NdJ("ionScroll",function(s){return i.onScroll(s)}),e.TgZ(17,"ion-refresher",9),e.NdJ("ionRefresh",function(s){return i.doRefresh(s)}),e._UZ(18,"ion-refresher-content"),e.qZA(),e.YNc(19,he,17,7,"div",10),e.YNc(20,Ae,22,8,"div",10),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngModel",i.selectedView),e.xp6(1),e.Q6J("value",i.PageView.impegni),e.xp6(4),e.Q6J("value",i.PageView.corsi),e.xp6(7),e.Q6J("ngIf",i.selectedView==i.PageView.impegni),e.xp6(1),e.Q6J("ngIf",i.selectedView==i.PageView.corsi))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.cJ,a.QI,m.JJ,m.On,a.GO,a.gu,a.Q$,a.W2,a.nJ,a.Wo,g.O5,a.q_,a.Ub,a.rH,a.Ie,a.t9,a.n0,a.x4,g.sg,ce],styles:[".contentExpand[_ngcontent-%COMP%]{height:100%}ion-select[_ngcontent-%COMP%]::part(icon){display:none!important}.mb-8[_ngcontent-%COMP%]{margin-bottom:8px}"]}),n})()},{path:":pianificazioneCorsoId",loadChildren:()=>r.e(9042).then(r.bind(r,9042)).then(n=>n.AgendaTrainerDetailPageModule)}];let xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(Oe)],u.Bz]}),n})();var v=r(933),Z=r(4586);const Ie=[{path:"",component:P}];let Pe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(Ie)],u.Bz]}),n})(),ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,m.u5,a.Pc,Pe,Z.D,v.q]]}),n})(),Ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,m.u5,a.Pc,xe,v.q,Z.D,ve]]}),n})()},1626:(M,C,r)=>{r.d(C,{u:()=>a});var g=r(4021),m=r(2096);let a=(()=>{class u{transform(f){let T="";return T=g.Gs.decode(g.Jw,f),T}}return u.\u0275fac=function(f){return new(f||u)},u.\u0275pipe=m.Yjl({name:"targetSesso",type:u,pure:!0}),u})()}}]);