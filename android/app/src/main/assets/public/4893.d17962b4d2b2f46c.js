"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4893],{4893:(N,A,c)=>{c.r(A),c.d(A,{BookingPageModule:()=>Ct});var P=c(9808),r=c(5362),v=c(2028),C=c(1247),M=c(1737),y=c(7221),o=c(4898),m=c(2274),T=c(8698),I=c(4616),x=c(7932),S=c(1799),f=c(4021),t=c(2096);c(253);const l=["sliderSport"];function a(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"ion-slide")(1,"ion-card",4),t.NdJ("click",function(){const h=t.CHM(e).$implicit;return t.oxw(2).onChangeSport(h)}),t.TgZ(2,"ion-grid")(3,"ion-row",5)(4,"ion-col",6)(5,"i",7),t._UZ(6,"span",8),t.qZA()(),t.TgZ(7,"ion-col")(8,"ion-label")(9,"h3",9),t._uU(10),t.qZA()()()()()()()}if(2&n){const e=d.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("color",i.getColor(e)),t.xp6(5),t.Q6J("innerHTML",e.htmlIconHex,t.oJD),t.xp6(4),t.Oqu(e.DENOMINAZIONE)}}function p(n,d){if(1&n&&(t.TgZ(0,"ion-slides",1,2),t.YNc(2,a,11,3,"ion-slide",3),t.qZA()),2&n){const e=t.oxw();t.Q6J("options",e.getSliderOptions()),t.xp6(2),t.Q6J("ngForOf",e.sportList)}}let g=(()=>{class n{constructor(e){this.startService=e,this.sportChanged=new t.vpe,this.sliderOpts1={slidesPerView:1,spaceBetween:0,initialSlide:0},this.sliderOpts2={slidesPerView:2,spaceBetween:0,initialSlide:0},this.sliderOpts3={slidesPerView:2.5,spaceBetween:0,initialSlide:0},this.sliderOpts4={slidesPerView:3.5,spaceBetween:0,initialSlide:0}}ngOnInit(){}ngOnChanges(){}ionViewDidEnter(){}goToSlide(e){this.sliderSport&&this.sliderSport.slideTo(e)}onChangeSport(e){let i=this.getIndexSport(e);-1!=i&&this.goToSlide(i),this.sportChanged.emit(e)}getSliderOptions(){let e;return e=1==this.sportList.length?this.sliderOpts1:2==this.sportList.length?this.sliderOpts2:this.sliderOpts3,e}getColor(e){let i="light";return this.selectedSport&&e&&this.selectedSport.ID==e.ID&&(i="secondary"),i}getIndexSport(e){let i=-1;return e&&(i=this.sportList.findIndex(s=>s.ID==e.ID)),i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sport-scroll"]],viewQuery:function(e,i){if(1&e&&t.Gf(l,5),2&e){let s;t.iGM(s=t.CRH())&&(i.sliderSport=s.first)}},inputs:{selectedSport:"selectedSport",sportList:"sportList"},outputs:{sportChanged:"sportChanged"},features:[t.TTD],decls:2,vars:1,consts:[["class","ion-text-center",3,"options",4,"ngIf"],[1,"ion-text-center",3,"options"],["sliderSport",""],[4,"ngFor","ngForOf"],["mode","md","button","",1,"card-sport",3,"color","click"],[1,"ion-align-items-center"],["size","4"],[1,"icon-sport"],[3,"innerHTML"],[1,"text-sport"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.YNc(1,p,3,2,"ion-slides",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",0!=i.sportList.length))},directives:[P.O5,r.Hr,P.sg,r.A$,r.PM,r.jY,r.Nd,r.wI,r.Q$],styles:[".icon-sport[_ngcontent-%COMP%]{font-size:30px;font-family:sports}.text-sport[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.card-sport[_ngcontent-%COMP%]{width:90%}"]}),n})();c(5383),c(6667);const L=["sliderCampi"];function z(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"ion-slide")(1,"ion-button",6),t.NdJ("click",function(){const h=t.CHM(e).$implicit;return t.oxw(2).onChangeCampo(h)}),t._UZ(2,"ion-icon",7),t.TgZ(3,"ion-label",8)(4,"p"),t._uU(5),t.qZA()()()()}if(2&n){const e=d.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("fill",i.getFill(e))("color",i.getColor(e))("disabled",!i.canChoose),t.xp6(1),t.Q6J("name",i.isSelected(e)?"location-outline":"locate-outline"),t.xp6(3),t.Oqu(e.DENOMINAZIONE)}}function Q(n,d){if(1&n&&(t.TgZ(0,"ion-slides",3,4),t.YNc(2,z,6,5,"ion-slide",5),t.qZA()),2&n){const e=t.oxw();t.Q6J("options",e.getSliderOptions()),t.xp6(2),t.Q6J("ngForOf",e.campiList)}}function H(n,d){if(1&n&&(t.TgZ(0,"ion-label",13)(1,"p")(2,"ion-text"),t._uU(3,"Stai visualizzando le disponibilit\xe0 di "),t.TgZ(4,"strong"),t._uU(5),t.qZA(),t._uU(6," presso "),t.TgZ(7,"strong"),t._uU(8),t.qZA()(),t._UZ(9,"br"),t.TgZ(10,"ion-text",14),t._uU(11,"\xa0(in caso di slot occupati ricercare su altre giornate/struttura)"),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(null==e.selectedCampo?null:e.selectedCampo.DENOMINAZIONE),t.xp6(3),t.hij("",null==e.selectedLocation?null:e.selectedLocation.DENOMINAZIONE,".")}}function V(n,d){if(1&n&&(t.TgZ(0,"ion-label",13)(1,"p")(2,"ion-text")(3,"strong"),t._uU(4),t.qZA(),t._uU(5," presso "),t.TgZ(6,"strong"),t._uU(7),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(null==e.selectedCampo?null:e.selectedCampo.DENOMINAZIONE),t.xp6(3),t.hij("",null==e.selectedLocation?null:e.selectedLocation.DENOMINAZIONE,".")}}function q(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"ion-list",9)(2,"ion-item",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().onChangeInfoStyle()}),t._UZ(3,"ion-icon",11),t.YNc(4,H,12,2,"ion-label",12),t.YNc(5,V,8,2,"ion-label",12),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",1==e.styleInfoMessage),t.xp6(1),t.Q6J("ngIf",2==e.styleInfoMessage)}}let W=(()=>{class n{constructor(){this.campoChanged=new t.vpe,this.styleInfoMessage=2,this.sliderOpts1={slidesPerView:1,spaceBetween:0,initialSlide:0},this.sliderOpts2={slidesPerView:2,spaceBetween:0,initialSlide:0},this.sliderOpts3={slidesPerView:2.5,spaceBetween:0,initialSlide:0},this.sliderOpts4={slidesPerView:3.5,spaceBetween:0,initialSlide:0}}getSliderOptions(){let e;return e=1==this.campiList.length?this.sliderOpts1:2==this.campiList.length?this.sliderOpts2:this.sliderOpts3,e}goToSlide(e){this.sliderCampi&&this.sliderCampi.slideTo(e)}ngOnInit(){}onChangeCampo(e){let i=this.getIndexCampo(e);-1!=i&&this.goToSlide(i),this.campoChanged.emit(e)}getIndexCampo(e){let i=-1;return e&&(i=this.campiList.findIndex(s=>s.ID==e.ID)),i}getColor(e){let i="primary";return this.selectedCampo&&e&&this.selectedCampo.ID==e.ID&&(i="tertiary"),i}getFill(e){let i="outline";return this.selectedCampo&&e&&this.selectedCampo.ID==e.ID&&(i="solid"),i}isSelected(e){let i=!1;return this.selectedCampo&&e&&this.selectedCampo.ID==e.ID&&(i=!0),i}onChangeInfoStyle(){this.styleInfoMessage=1==this.styleInfoMessage?2:1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-campi-scroll"]],viewQuery:function(e,i){if(1&e&&t.Gf(L,5),2&e){let s;t.iGM(s=t.CRH())&&(i.sliderCampi=s.first)}},inputs:{selectedCampo:"selectedCampo",campiList:"campiList",selectedLocation:"selectedLocation",canChoose:"canChoose"},outputs:{campoChanged:"campoChanged"},decls:3,vars:2,consts:[[1,"slideCampi"],["class","ion-text-center",3,"options",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center",3,"options"],["sliderCampi",""],[4,"ngFor","ngForOf"],["expand","block","size","large","shape","round","mode","ios",3,"fill","color","disabled","click"],["slot","start",3,"name"],[1,"ion-text-wrap"],[1,"list-nopadding"],["lines","none","color","tertiary","type","header",3,"click"],["slot","start","name","information-circle-outline"],["class","ion-text-wrap ion-padding-start",4,"ngIf"],[1,"ion-text-wrap","ion-padding-start"],[2,"font-size","small"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Q,3,2,"ion-slides",1),t.qZA(),t.YNc(2,q,6,2,"div",2)),2&e&&(t.xp6(1),t.Q6J("ngIf",0!=i.campiList.length),t.xp6(1),t.Q6J("ngIf",i.selectedCampo&&i.selectedLocation))},directives:[P.O5,r.Hr,P.sg,r.A$,r.YG,r.gu,r.Q$,r.q_,r.Ie,r.yW],styles:["ion-button[_ngcontent-%COMP%]{width:90%}.list-nopadding[_ngcontent-%COMP%]{margin-top:5px;padding-bottom:0}"]}),n})();var G=c(655),R=c(5439);const j=["sliderDays"];function $(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"ion-slide")(1,"ion-button",10),t.NdJ("click",function(){const h=t.CHM(e).$implicit;return t.oxw().onClickButton(h)}),t._uU(2),t.qZA()()}if(2&n){const e=d.$implicit,i=t.oxw();t.xp6(1),t.Q6J("fill",i.getFillButton(e)),t.xp6(1),t.hij(" ",e," ")}}let K=(()=>{class n{constructor(e){this.pickController=e,this.activeDay=new Date,this.onChangeActiveDay=new t.vpe,this.listDay=[],this.listMesi=[],this.sliderOpts={slidesPerView:15,spaceBetween:3,initialSlide:1,breakpoints:{320:{slidesPerView:5,spaceBetween:1},480:{slidesPerView:7,spaceBetween:3},640:{slidesPerView:10,spaceBetween:1},1e3:{slidesPerView:15,spaceBetween:1}}},this.setStartSlide(),this.listMesi=f.Gs.getArray(f.oO)}setStartSlide(){let e=this.activeDay.getDate()-1;e-=2,e<0&&(e=0),this.sliderOpts.initialSlide=e}goToSlide(e){this.sliderDays&&this.sliderDays.slideTo(e)}ngOnInit(){this.setListDay()}setListDay(){let e=30,i=R(new Date(this.activeDay.getFullYear(),this.activeDay.getMonth(),1)).add(1,"M");i.subtract(1,"day"),e=i.date(),this.listDay=[],e+=1;for(let s=1;s<e;s++)this.listDay.push(s)}getFillButton(e){let i="outline";return this.activeDay.getDate()==e&&(i="solid"),i}onClickButton(e){let i=this.activeDay.getFullYear(),s=this.activeDay.getMonth();this.activeDay=new Date(i,s,e),this.onChangeActiveDay.emit(this.activeDay)}initColumnMesi(e){let i=[];for(let s=0;s<this.listMesi.length;s++){const h=this.listMesi[s];i.push({text:h.description,value:h.value,disabled:!(s>=e)})}return i}initColumnAnni(){let e=[],i=(new Date).getFullYear();for(let s=i;s<i+5;s++)e.push({text:s+"",value:s});return e}initColumnsPicker(e,i,s,h){return[{name:"mese",options:e,selectedIndex:i},{name:"anno",options:s,selectedIndex:h}]}showPickerDate(){let e=this,s=e.activeDay.getFullYear()-(new Date).getFullYear();const h=(new Date).getMonth();let _=[{text:"Conferma",handler:D=>{e.setNewActiveDateFromPicker(D.mese.value,D.anno.value)}},{role:"cancel",text:"Annulla"}],b=this.initColumnMesi(h),O=[];O=this.initColumnAnni();let _t={columns:this.initColumnsPicker(b,0,O,s),buttons:_,keyboardClose:!0};this.pickController.create(_t).then(D=>{D.addEventListener("ionPickerColChange",E=>(0,G.mG)(this,void 0,void 0,function*(){const k=E.detail;if("anno"==k.name){const yt=(new Date).getFullYear(),vt=(new Date).getMonth();let Z=[],F=[],J=[];const Y=k.selectedIndex,St=k.options[Y].value;F=this.initColumnAnni(),Z=this.initColumnMesi(St==yt?vt:0),J=this.initColumnsPicker(Z,0,F,Y),D.columns=J}})),D.present()})}setNewActiveDateFromPicker(e,i){let s=this.activeDay.getMonth(),h=this.activeDay.getFullYear(),_=this.activeDay.getDate(),O=new Date;(e-1!==s||i!==h)&&(_=e-1==O.getMonth()&&i==O.getFullYear()?O.getDate():1,this.activeDay=new Date(i,e-1,_),this.setListDay(),this.goToSlide(this.activeDay.getDate()-1),this.onChangeActiveDay.emit(this.activeDay))}getMaxDayInMont(e,i){let s=R(new Date(i,e,1));return s.add(1,"month"),s.subtract(1,"day"),s.toDate().getDate()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.up))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-calendarscroll"]],viewQuery:function(e,i){if(1&e&&t.Gf(j,5),2&e){let s;t.iGM(s=t.CRH())&&(i.sliderDays=s.first)}},inputs:{activeDay:"activeDay"},outputs:{onChangeActiveDay:"onChangeActiveDay"},decls:14,vars:8,consts:[[1,"ion-no-padding","ion-no-margin"],[1,"date-row"],["size","",1,"ion-text-center",3,"click"],[1,"custom-div"],[1,"ion-no-margin","custom-h5","ion-text-center"],["name","chevron-down","color","primary",1,""],[1,"ion-no-margin","ion-padding-horizontal"],[3,"options"],["sliderDays",""],[4,"ngFor","ngForOf"],["shape","round","size","large","color","secondary",1,"ion-no-padding","ion-no-margin",3,"fill","click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-grid",0)(1,"ion-row",1)(2,"ion-col",2),t.NdJ("click",function(){return i.showPickerDate()}),t.TgZ(3,"div",3)(4,"h5",4)(5,"span"),t._uU(6),t.ALo(7,"titlecase"),t.ALo(8,"date"),t.qZA(),t._UZ(9,"ion-icon",5),t.qZA()()()(),t.TgZ(10,"ion-row",6)(11,"ion-slides",7,8),t.YNc(13,$,3,2,"ion-slide",9),t.qZA()()()),2&e&&(t.xp6(6),t.hij(" ",t.lcZ(7,3,t.xi3(8,5,i.activeDay,"MMMM yyyy")),""),t.xp6(5),t.Q6J("options",i.sliderOpts),t.xp6(2),t.Q6J("ngForOf",i.listDay))},directives:[r.jY,r.Nd,r.wI,r.gu,r.Hr,P.sg,r.A$,r.YG],pipes:[P.rS,P.uU],styles:["ion-grid[_ngcontent-%COMP%]{background-color:#fff}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-bottom:10px}a[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer}ion-button[_ngcontent-%COMP%]{width:50px;height:50px;min-width:50px;min-height:50px}ion-slides[_ngcontent-%COMP%]{margin-bottom:10px;height:60px}.flessibile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.circle[_ngcontent-%COMP%]{border-radius:50%;border-style:solid;border-width:thin;border-color:var(--ion-color-light-shade);width:50px;height:50px}.icon-calendar[_ngcontent-%COMP%]{font-size:25px}.date-row[_ngcontent-%COMP%]{padding-top:10px}.custom-h5[_ngcontent-%COMP%]{display:flex;align-items:center}.custom-div[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center}.custom-div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:3px}"]}),n})();function X(n,d){if(1&n&&t._UZ(0,"ion-icon",9),2&n){const e=t.oxw();t.Q6J("name",e.getIconButton())}}c(6797);let tt=(()=>{class n{constructor(){this.clickSlot=new t.vpe,this.captionBtn="",this.readOnly=!1}ngOnInit(){}getClassButton(){let e="";return e=this.readOnly?"slot-read-only":this.mySlot.STATO==f.fu.occupato?"slot-busy":this.mySlot.STATO==f.fu.chiuso?"slot-read-only":this.mySlot.STATO==f.fu.contattare?"slot-free-contact":this.mySlot.selected?"slot-selected":"slot-free",e}getDisableButton(){let e=!1;return(this.mySlot.STATO==f.fu.occupato||this.mySlot.STATO==f.fu.chiuso||this.readOnly)&&(e=!0),e}getCaptionButton(){let e="";if(!this.readOnly)if(this.mySlot.selected)e=this.captionBtn;else switch(this.mySlot.STATO){case f.fu.occupato:e="occupato";break;case f.fu.contattare:e="contattare";break;case f.fu.chiuso:e=""}return e}getIconButton(){let e="";if(!this.readOnly)if(this.mySlot.selected)e="checkmark";else switch(this.mySlot.STATO){case f.fu.occupato:e="thumbs-down";break;case f.fu.contattare:e="call";break;default:e=""}return e}showIconButton(){let e=!1;if(!this.readOnly)if(this.mySlot.selected)e=!0;else switch(this.mySlot.STATO){case f.fu.occupato:case f.fu.contattare:e=!0;break;default:e=!1}return e}chooseSlot(){this.clickSlot.emit(this.mySlot)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-slottime"]],inputs:{mySlot:"mySlot",captionBtn:"captionBtn",readOnly:"readOnly"},outputs:{clickSlot:"clickSlot"},decls:20,vars:12,consts:[[1,"ion-align-items-center"],["size","2","size-xs","3","id","col-orari",1,"ion-no-padding"],[1,"ion-no-margin"],[1,"ion-text-center"],[1,"orario-black"],[1,"orario-light"],["size-xs","9","size","10","id","col-slot",1,"ion-padding-horizontal"],["expand","block",3,"ngClass","disabled","click"],["slot","start",3,"name",4,"ngIf"],["slot","start",3,"name"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-card")(1,"ion-row",0)(2,"ion-col",1)(3,"ion-grid",2)(4,"ion-row")(5,"ion-col")(6,"div",3)(7,"span",4),t._uU(8),t.ALo(9,"date"),t.qZA()()()(),t.TgZ(10,"ion-row")(11,"ion-col")(12,"div",3)(13,"span",5),t._uU(14),t.ALo(15,"date"),t.qZA()()()()()(),t.TgZ(16,"ion-col",6)(17,"ion-button",7),t.NdJ("click",function(){return i.chooseSlot()}),t.YNc(18,X,1,1,"ion-icon",8),t._uU(19),t.qZA()()()()),2&e&&(t.xp6(8),t.hij(" ",t.xi3(9,6,i.mySlot.START,"HH:mm")," "),t.xp6(6),t.hij(" ",t.xi3(15,9,i.mySlot.END,"HH:mm")," "),t.xp6(3),t.Q6J("ngClass",i.getClassButton())("disabled",i.getDisableButton()),t.xp6(1),t.Q6J("ngIf",i.showIconButton()),t.xp6(1),t.hij(" ",i.getCaptionButton()," "))},directives:[r.PM,r.Nd,r.wI,r.jY,r.YG,P.mk,P.O5,r.gu],pipes:[P.uU],styles:['@import"https://fonts.googleapis.com/css?family=Roboto&display=swap";ion-card[_ngcontent-%COMP%]{background-color:#fff;min-height:50px;margin:5px 16px}#col-orari[_ngcontent-%COMP%]{border-right-style:solid;border-width:thin;border-color:#eff1f8}.orario-black[_ngcontent-%COMP%]{font-family:Roboto;font-size:medium;color:#000}.orario-light[_ngcontent-%COMP%]{font-family:Roboto;font-size:medium;color:#9da2b3}.slot-busy[_ngcontent-%COMP%]{--background: var(--ion-color-danger)}.slot-free[_ngcontent-%COMP%]{--background: var(--ion-color-success)}.slot-free-contact[_ngcontent-%COMP%]{--background: var(--ion-color-success-tint)}.slot-selected[_ngcontent-%COMP%]{--background: var(--ion-color-secondary)}.slot-read-only[_ngcontent-%COMP%]{--background: lightgray}']}),n})(),et=(()=>{class n{constructor(){this.clickPrenota=new t.vpe}ngOnInit(){}onClickPrenota(){this.clickPrenota.emit(this.myPrenotaPianifica)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-footbooked"]],inputs:{myPrenotaPianifica:"myPrenotaPianifica"},outputs:{clickPrenota:"clickPrenota"},decls:14,vars:14,consts:[["color","tertiary"],["lines","none","detail","false"],["slot","start","name","calendar","color","tertiary"],["slot","end","color","tertiary","expand","block","size","default",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-list",0)(1,"ion-item",1),t._UZ(2,"ion-icon",2),t.TgZ(3,"ion-label")(4,"h2"),t._uU(5),t.ALo(6,"titlecase"),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"date"),t.ALo(11,"date"),t.qZA()(),t.TgZ(12,"ion-button",3),t.NdJ("click",function(){return i.onClickPrenota()}),t._uU(13,"Prenota"),t.qZA()()()),2&e&&(t.xp6(5),t.hij(" ",t.lcZ(6,3,t.xi3(7,5,null==i.myPrenotaPianifica?null:i.myPrenotaPianifica.DATAORAINIZIO,"EEE dd/MM/yyyy"))," "),t.xp6(4),t.AsE(" dalle ",t.xi3(10,8,null==i.myPrenotaPianifica?null:i.myPrenotaPianifica.DATAORAINIZIO,"HH:mm")," alle ",t.xi3(11,11,null==i.myPrenotaPianifica?null:i.myPrenotaPianifica.DATAORAFINE,"HH:mm")," "))},directives:[r.q_,r.Ie,r.gu,r.Q$,r.YG],pipes:[P.rS,P.uU],styles:["ion-icon[_ngcontent-%COMP%]{margin-right:16px}ion-button[_ngcontent-%COMP%]{margin-left:16px}"]}),n})();const it=["sliderCampi"];function ot(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"app-sport-scroll",7),t.NdJ("sportChanged",function(s){return t.CHM(e),t.oxw().onChangeSport(s)}),t.qZA(),t.TgZ(2,"app-campi-scroll",8),t.NdJ("campoChanged",function(s){return t.CHM(e),t.oxw().onChangeCampo(s)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("selectedSport",e.selectedSport)("sportList",e.listLocationSport),t.xp6(1),t.Q6J("selectedCampo",e.selectedCampo)("campiList",e.availableFields)("canChoose",e.ricevuti&&e.bookable)("selectedLocation",e.selectedLocation)}}function nt(n,d){1&n&&t._UZ(0,"ion-spinner",16)}function st(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"ion-col",17)(1,"app-slottime",18),t.NdJ("clickSlot",function(s){return t.CHM(e),t.oxw(4).myClickSlot(s)}),t.qZA()()}if(2&n){const e=d.$implicit,i=t.oxw(4);t.xp6(1),t.Q6J("mySlot",e)("readOnly",i.actualSlotDay._TEMPLATELOCK)}}function at(n,d){if(1&n&&(t.TgZ(0,"div")(1,"ion-item",11)(2,"ion-label",12),t._uU(3,"SCEGLI L'ORARIO:"),t.qZA(),t.YNc(4,nt,1,0,"ion-spinner",13),t.qZA(),t.TgZ(5,"ion-grid")(6,"ion-row",14),t.YNc(7,st,2,2,"ion-col",15),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("ngIf",e.actualSlotDay._TEMPLATELOCK),t.xp6(3),t.Q6J("ngForOf",e.actualSlotDay.SLOTTIMES)}}function lt(n,d){1&n&&(t.TgZ(0,"div",19),t._UZ(1,"br"),t.TgZ(2,"ion-label"),t._uU(3,"Prenotazione non effettuabile"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"ion-label"),t._uU(6,"Cercare slot liberi modificando"),t.qZA(),t._UZ(7,"br"),t.TgZ(8,"ion-label"),t._uU(9,"data, attivit\xe0 o struttura"),t.qZA()())}function rt(n,d){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,at,8,2,"div",5),t.YNc(2,lt,10,0,"div",10),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.actualSlotDay.APERTOCHIUSO),t.xp6(1),t.Q6J("ngIf",!e.actualSlotDay.APERTOCHIUSO)}}function ct(n,d){1&n&&(t.TgZ(0,"div",19)(1,"ion-label"),t._uU(2,"Prenotazione"),t.qZA(),t.TgZ(3,"ion-label"),t._uU(4,"non disponibile"),t.qZA()())}function dt(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-calendarscroll",9),t.NdJ("onChangeActiveDay",function(s){return t.CHM(e),t.oxw().onChangeBookDay(s)}),t.qZA(),t.YNc(2,rt,3,2,"div",5),t.YNc(3,ct,5,0,"div",10),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("activeDay",e.actualBookDay),t.xp6(1),t.Q6J("ngIf",e.ricevuti&&e.bookable),t.xp6(1),t.Q6J("ngIf",!e.bookable)}}function pt(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"ion-footer")(1,"app-footbooked",20),t.NdJ("clickPrenota",function(s){return t.CHM(e),t.oxw().myClickPrenota(s)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("myPrenotaPianifica",e.actualPlanning)}}const ht=[{path:"",component:(()=>{class n{constructor(e,i,s,h,_,b,O,U){this.router=e,this.startService=i,this.navController=s,this.loadingController=h,this.toastCtrl=_,this.modalCtrl=b,this.actionSheetController=O,this.alertController=U,this.idLocation="",this.versionBooking="manual",this.listLocationSport=[],this.bookable=!1,this.templateWeekSlot=new o.C,this.actualBookDay=new Date,this.actualCaptionButtonSelected="",this.actualPlanning=new m._,this.availableFields=[],this.indexCount=0,this.showExtraToolbar=!0,this.isOnAppleSystem=!1,this.actualPlanning=new m._,this.myDebug("Constructor Booking Page"),this.myDebug(this.actualPlanning),this.isOnAppleSystem=this.startService.isOnAppleSystem}myDebug(e){}updateAvailableFields(){this.selectedLocation&&this.selectedLocation.CAMPO&&(this.availableFields=this.selectedLocation.CAMPO.filter(e=>{let i=!1;if(this.selectedSport)for(const s of e.CAMPOSPORT)if(s.IDSPORT==this.selectedSport.ID){i=!0;break}return i}))}ngOnInit(){this.loadingController.create({message:"Caricamento",spinner:"circular",backdropDismiss:!0}).then(e=>{this.myDebug("Presentazione Loading"),e.present(),this.ricevuti=!1,this.bookable=!1,this.router.paramMap.subscribe(i=>{this.myDebug("Controllo Routing locationId"),i.has("locationId")?(this.myDebug("locationId trovata"),this.idLocation=i.get("locationId"),this.idLocation?(this.myDebug("locationId: "+this.idLocation),this.myDebug("Richiesta al server Sport Praticati nella location "),this.startService.requestLocationSport(this.idLocation),this.sottoscrizioneListaSport(),this.myDebug("Richiesta al server Location, Campi e CampiSport "),this.startService.requestLocationByID(this.idLocation,3).then(()=>{this.ricevuti=!0,e.dismiss()},()=>{e.dismiss(),this.showMessage("Errore di connessione")}),this.sottoscrizioneLocationCampi(),this.subUserLogged=this.startService.utenteLogged.subscribe(s=>{this.userLogged=s}),this.subDocUtente=this.startService.utente.subscribe(s=>{this.docUtente=s}),this.subActualSlotDay=this.startService.docOccupazione.subscribe(s=>{this.myDebug("Variazione Slot Day"),this.actualSlotDay=s,this.myDebug(s)}),this.subActivePrenotazione=this.startService.activePrenotazione.subscribe(s=>{this.activePrenotazione=s})):(this.bookable=!1,this.ricevuti=!0)):this.navController.navigateForward(["/"])})})}ngOnDestroy(){this.subSelectedLocation&&this.subSelectedLocation.unsubscribe(),this.subUserLogged&&this.subUserLogged.unsubscribe(),this.subDocUtente&&this.subDocUtente.unsubscribe(),this.subActualSlotDay&&this.subActualSlotDay.unsubscribe(),this.subActivePrenotazione&&this.subActivePrenotazione.unsubscribe(),this.subListLocationSport&&this.subListLocationSport.unsubscribe()}sottoscrizioneLocationCampi(){this.myDebug("Sottoscrizione Location, Campi e CampiSport "),this.subSelectedLocation=this.startService.activeLocation.subscribe(e=>{this.selectedLocation=e,this.selectedLocation&&!this.selectedLocation.do_inserted&&0!==this.selectedLocation.CAMPO.length?(this.myDebug("Ricezione Location, Campi e CampiSport "),this.getTemplateWeek(this.selectedLocation),this.onRefresh()):this.selectedLocation&&this.selectedLocation.CAMPO?(this.myDebug("Location"),this.myDebug(this.selectedLocation),this.myDebug(this.selectedLocation.CAMPO)):this.myDebug("Non ho la location oppure i campi ")})}sottoscrizioneListaSport(){this.subListLocationSport=this.startService.listLocationSport.subscribe(e=>{this.listLocationSport=e,this.selectedSport=this.listLocationSport&&0!==this.listLocationSport.length?this.listLocationSport[0]:void 0,this.onRefresh()})}onChangeVersion(e){this.versionBooking=e}onRefresh(){this.selectedSport?(this.availableFields=this.selectedLocation.getAvalaibleFields(this.selectedSport.ID),0!==this.availableFields.length&&(this.selectedCampo=this.availableFields[0]),this.selectedCampo?(this.myDebug("Richiesto Refresh success, getOccupazioni"),this.bookable=!!this.selectedCampo,this.getOccupazioni()):this.myDebug("Richiesto Refresh failed NO SELECTED CAMPO")):this.myDebug("Richiesto Refresh failed NO SELECTED SPORT")}onChangeCampo(e){this.selectedCampo=e,this.getOccupazioni()}onDidChangeCampo(e){this.sliderCampi.getActiveIndex().then(i=>{i<=this.availableFields.length&&(this.selectedCampo=this.availableFields[i],this.getOccupazioni())})}onChangeBookDay(e){this.actualBookDay=e,this.getOccupazioni()}onChangeSport(e){e&&(this.selectedSport=e,this.onRefresh())}getTemplateWeek(e){this.templateWeekSlot=this.startService.getTemplateSlotWeek(e)}getOccupazioni(){this.actualSlotDay=this.templateWeekSlot.getCopySlotDay(this.actualBookDay,!0),this.myDebug("Richiesta Slot Occupazioni"),this.startService.requestSlotOccupazioni(this.actualSlotDay,this.selectedLocation,this.selectedCampo,this.actualBookDay).then(()=>{1==this.actualSlotDay.APERTOCHIUSO&&(this.actualSlotDay.APERTOCHIUSO=!this.startService.isFestivita(this.actualBookDay,this.selectedLocation.IDAREAOPERATIVA,this.selectedLocation.ID,this.selectedCampo.ID))}),this.actualPlanning=new m._}myClickSlot(e){e&&(e.STATO==f.fu.contattare?this.showAlertContattaStruttura():this.actualPlanning=this.actualSlotDay.changeSelectionSlotTime(e))}showAlertContattaStruttura(){let e=[],i="";i="Per la prenotazione dello slot \xe8 necessario contattare la struttura telefonicamente",e=[{text:"OK",role:"cancel"}],this.selectedLocation.TELEFONO&&this.selectedLocation.TELEFONO.length>0&&(i=i+" al "+this.selectedLocation.TELEFONO,this.startService.isDesktop||(e=[{text:"OK",role:"cancel"},{text:"Chiama",handler:()=>{const s=this.selectedLocation.TELEFONO,h=document.createElement("a");h.setAttribute("href",`tel:${s}`),h.click()}}])),this.alertController.create({header:"Contattare la struttura",subHeader:"per richiedere informazioni",message:i,buttons:e}).then(s=>{s.present()})}visibleFooter(){let e=!1;return this.actualPlanning&&this.actualPlanning.DATAORAINIZIO&&this.actualPlanning.DATAORAFINE&&(e=!0),e}myClickPrenota(e){if(this.userLogged){let i;i=this.docUtente.getParamsVerifica(this.startService.actualStartConfig.gruppo),i?this.modalCtrl.create({component:S.I,componentProps:{params:i}}).then(s=>{s.present()}):this.execPrenotazione(e)}else this.startService.setIdAreaForcedForLogin(),this.modalCtrl.create({component:x.y}).then(i=>{i.present()})}execPrenotazione(e){this.startService.initActivePrenotazione(this.selectedLocation.IDAREAOPERATIVA),this.startService.setIDUtenteActivePrenotazione(this.docUtente),e.IDAREAOPERATIVA=this.selectedLocation.IDAREAOPERATIVA,e.IDLOCATION=this.selectedLocation.ID,e.IDCAMPO=this.selectedCampo.ID,e.IDSPORT=this.selectedSport.ID,e._DESCRCAMPO=this.selectedCampo.DENOMINAZIONE,e._DESCRSPORT=this.selectedSport.DENOMINAZIONE,this.startService.setPianificazioneSingola(e),this.startService.setSelectedCampoPrenotazione(this.selectedCampo),this.calcolaTotale()}calcolaTotale(){this.loadingController.create({message:"Verifica Prenotazione...",spinner:"circular"}).then(e=>{e.present(),this.startService.requestImportoPrenotazione().pipe((0,y.K)(this.handleError)).subscribe(i=>{e.dismiss();let s=T.i.getPrenotazioneFromJson(i);if(!0===s.ISVALID){let h=s.PRENOTAZIONEPIANIFICAZIONE[0];h._DESCRCAMPO=this.selectedCampo.DENOMINAZIONE,h._DESCRSPORT=this.selectedSport.DENOMINAZIONE,this.startService.setActivePrenotazione(s),this.goToFinalizza()}else this.showMessage(s.MSGINVALID?s.MSGINVALID:"Errore comunicazione imprevisto")},i=>{e.dismiss(),this.showMessage(i)})})}goToFinalizza(){this.modalCtrl.create({component:I.M,componentProps:{bookId:this.activePrenotazione.ID,locationId:this.selectedLocation.ID}}).then(e=>e.present())}showMessage(e){this.toastCtrl.create({message:e,duration:3e3}).then(i=>{i.present()})}handleError(e){return e.error instanceof ErrorEvent?console.error("Errore di chiamata:",e.error.message):console.error(`Errore Backend Codice ${e.status}, Body: ${e.error}`),(0,M._)("Si sono verificati errori. Riprovare AHIME.")}onClickChangeCampo(){let e=[];this.availableFields.forEach(i=>{e.push({text:i.DENOMINAZIONE,icon:"location",handler:()=>{this.selectedCampo=i,this.getOccupazioni();let h=this.availableFields.findIndex(_=>_.ID==this.selectedCampo.ID);this.sliderCampi.slideTo(h)}})}),this.actionSheetController.create({header:"Scegli il campo",buttons:e}).then(i=>{i.present()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v.gz),t.Y36(C.D),t.Y36(r.SH),t.Y36(r.HT),t.Y36(r.yF),t.Y36(r.IN),t.Y36(r.BX),t.Y36(r.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-booking"]],viewQuery:function(e,i){if(1&e&&t.Gf(it,5),2&e){let s;t.iGM(s=t.CRH())&&(i.sliderCampi=s.first)}},decls:11,vars:3,consts:[["headBook",""],["color","primary"],["slot","start"],["defaultHref","/"],["class","custom-toolbar",4,"ngIf"],[4,"ngIf"],[1,"custom-toolbar"],[3,"selectedSport","sportList","sportChanged"],[3,"selectedCampo","campiList","canChoose","selectedLocation","campoChanged"],[3,"activeDay","onChangeActiveDay"],["class","nofind-cnt",4,"ngIf"],[1,"item-transparent"],[1,"ion-padding-horizontal"],["name","circular","color","primary",4,"ngIf"],[1,"ion-no-margin","ion-no-padding"],["class","ion-no-margin ion-no-padding","size","6","sizeXl","3","sizeLg","4","sizeMd","6","sizeSm","12","sizeXs","12",4,"ngFor","ngForOf"],["name","circular","color","primary"],["size","6","sizeXl","3","sizeLg","4","sizeMd","6","sizeSm","12","sizeXs","12",1,"ion-no-margin","ion-no-padding"],[3,"mySlot","readOnly","clickSlot"],[1,"nofind-cnt"],[3,"myPrenotaPianifica","clickPrenota"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",null,0)(2,"ion-toolbar",1)(3,"ion-buttons",2),t._UZ(4,"ion-back-button",3),t.qZA(),t.TgZ(5,"ion-title"),t._uU(6,"Prenota"),t.qZA()(),t.YNc(7,ot,3,6,"div",4),t.qZA(),t.TgZ(8,"ion-content"),t.YNc(9,dt,4,3,"div",5),t.qZA(),t.YNc(10,pt,2,1,"ion-footer",5)),2&e&&(t.xp6(7),t.Q6J("ngIf",i.ricevuti),t.xp6(2),t.Q6J("ngIf",i.ricevuti),t.xp6(1),t.Q6J("ngIf",i.visibleFooter()))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,P.O5,g,W,r.W2,K,r.Ie,r.Q$,r.PQ,r.jY,r.Nd,P.sg,r.wI,tt,r.fr,et],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light-tint)}ion-segment[_ngcontent-%COMP%]{--background: white}.item-campo[_ngcontent-%COMP%], .item-transparent[_ngcontent-%COMP%]{--background: var(--ion-color-light-tint)}.item-campo[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%], .item-transparent[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#999}ion-slide[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%}.label-header[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}app-sport-scroll[_ngcontent-%COMP%]{--background: white}.nofind-cnt[_ngcontent-%COMP%]{padding-top:15px}ion-footer[_ngcontent-%COMP%]{border-top:var(--ion-color-tertiary) solid 2px}.custom-toolbar[_ngcontent-%COMP%]{background-color:#fff}"]}),n})()},{path:"bookingsummary/:bookId",loadChildren:()=>Promise.resolve().then(c.bind(c,3438)).then(n=>n.BookingsummaryPageModule)}];let ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[v.Bz.forChild(ht)],v.Bz]}),n})();var mt=c(3438),gt=c(378),ft=c(933),Pt=c(4776);let Ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P.ez,r.Pc,ut,mt.BookingsummaryPageModule,gt.VerifyPageModule,ft.q,Pt.W]]}),n})()},3438:(N,A,c)=>{c.r(A),c.d(A,{BookingsummaryPageModule:()=>t});var P=c(9808),r=c(4182),v=c(5362),C=c(2028),M=c(4616),y=c(2096);const o=[{path:"",component:M.M}];let m=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=y.oAB({type:u}),u.\u0275inj=y.cJS({imports:[[C.Bz.forChild(o)],C.Bz]}),u})();const I=[{path:"",component:c(8622).t}];let x=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=y.oAB({type:u}),u.\u0275inj=y.cJS({imports:[[C.Bz.forChild(I)],C.Bz]}),u})(),S=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=y.oAB({type:u}),u.\u0275inj=y.cJS({imports:[[P.ez,r.u5,v.Pc,x]]}),u})();var f=c(933);let t=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=y.oAB({type:u}),u.\u0275inj=y.cJS({imports:[[P.ez,r.u5,v.Pc,m,S,f.q]]}),u})()},4616:(N,A,c)=>{c.d(A,{M:()=>f});var P=c(1247),r=c(8698),v=c(7708),C=c(4021),M=c(3951),y=c(8622),o=c(2096),m=c(5362),T=c(4737),I=c(4182),x=c(7952),S=c(9808);let f=(()=>{class t{constructor(l,a,p,g,B,w,L,z){this.startService=l,this.navCtrl=a,this.loadingController=p,this.toastCtrl=g,this.navParams=B,this.modalCtrl=w,this.platform=L,this.alertCtrl=z,this.idPrenotazione="",this.idLocation="",this.checkBookId=!0,this.disclaimer=!1,this.docArea=this.startService.areaSelectedValue,this.setListPayment()}ngOnInit(){this.disclaimer=!1;let l=!0,a="";this.idLocation=this.navParams.get("locationId"),0!==this.idLocation.length?(this.selectedLocation=this.startService.findLocationByID(this.idLocation),this.selectedLocation||(l=!1,a="Location null")):(l=!1,a="idLocation Empty"),l&&(this.idPrenotazione=this.navParams.get("bookId"),this.idPrenotazione?this.recuperaPrenotazione():l=!1),l&&(this.subUserLogged=this.startService.utenteLogged.subscribe(p=>{this.userLogged=p}),this.subDocUtente=this.startService.utente.subscribe(p=>{this.docUtente=p}),this.selectedCampo=this.startService.getSelectedCampoPrenotazione()),l||(a="ngOnInit Failed "+a,console.error(a),this.onBookIdWrong())}ngOnDestroy(){this.subUserLogged&&this.subUserLogged.unsubscribe(),this.subActivePrenotazione&&this.subActivePrenotazione.unsubscribe(),this.subDocUtente&&this.subDocUtente.unsubscribe(),this.subPaymentResult&&this.subPaymentResult.unsubscribe()}recuperaPrenotazione(){this.subActivePrenotazione=this.startService.activePrenotazione.subscribe(l=>{this.activePrenotazione=l,this.docPianificazione=this.activePrenotazione.getPianificazione(),this.checkBookId&&(this.checkBookId=!1,null==this.activePrenotazione?(console.error("activePrenotazione null"),this.onBookIdWrong()):this.idPrenotazione!=this.activePrenotazione.ID?(console.error("idPrenotazione <> activePrenotazione.ID"),console.error(`idPrenotazione: ${this.idPrenotazione} - activePrenotazione ${this.activePrenotazione.ID}`),this.onBookIdWrong()):null==this.docPianificazione&&(console.error("docPianificazione null"),this.onBookIdWrong()))})}onBookIdWrong(){this.showMessage("Errore dati prenotazione"),this.closeModal()}closeModal(){this.modalCtrl.dismiss()}onChangedNumPlayer(l){this.docPianificazione.NUMPARTECIPANTI=l,this.calcolaTotale()}calcolaTotale(){this.loadingController.create({message:"Ricalcolo importo...",spinner:"circular"}).then(l=>{l.present(),this.startService.requestImportoPrenotazione().subscribe(a=>{l.dismiss();let p=r.i.getPrenotazioneFromJson(a);this.startService.setActivePrenotazione(p),p.ISVALID||this.showMessage(p.MSGINVALID)},a=>{l.dismiss(),this.showMessage(a)})})}getAddressLocation(){let l="";return this.selectedLocation&&(this.selectedLocation.INDIRIZZO&&0!==this.selectedLocation.INDIRIZZO.length?l=this.selectedLocation.INDIRIZZO:this.selectedLocation.COMUNE&&0!==this.selectedLocation.COMUNE.length&&(l=this.selectedLocation.COMUNE)),l}onConfirm(){this.onExecPayment()}onAfterSavePrenotazione(){this.showMessage("Prenotazione confermata"),this.closeModal(),this.navCtrl.navigateRoot(["historylist/booking",this.activePrenotazione.ID+"-"+this.docPianificazione.ID])}setListPayment(){this.myListPayment=[],this.docArea&&(this.myListPayment=this.docArea.getPaymentFor(C.O4.settorePagamentoPrenotazione),this.mySelectedPayment=this.myListPayment&&0!=this.myListPayment.length?this.myListPayment[0]:null)}onPaymentSelected(l){this.mySelectedPayment=l}onPaymentModeSelected(l){this.myPaymentMode=l}onExecPayment(){if(0!=this.activePrenotazione.TOTALE)if([C.x6.pagaAdesso,C.x6.pagaBonifico,C.x6.pagaStruttura].includes(this.myPaymentMode))if(this.myPaymentMode==C.x6.pagaBonifico||this.myPaymentMode==C.x6.pagaStruttura){let a=new v.b(this.myPaymentMode);this.onPaymentSuccess(a)}else{let a=new v.b(this.myPaymentMode);a.amount=this.activePrenotazione.RESIDUO,a.description="Pagamento Prenotazione",a.currency="EUR",this.modalCtrl.create({component:y.t,componentProps:{paymentData:a,listAreaPaymentSettings:this.myListPayment}}).then(p=>(p.present(),p.onDidDismiss())).then(p=>{let g=p.data;g?g.processResult?this.onPaymentSuccess(g):this.onPaymentFailed(g):(g=new v.b(this.myPaymentMode),g.processResult=!1,g.messageResult="Pagamento fallito",this.onPaymentFailed(g))})}else this.showMessage("E' necessario selezionare un pagamento");else this.showMessage("Contattare la struttura. Prenotazioni gratuite concluse")}onPaymentSuccess(l){l&&l.processResult&&(0==l.idElectronicResult.length?(this.activePrenotazione.IDTRANSACTION="",this.activePrenotazione.IDORDER="",this.activePrenotazione.CHANNELPAYMENT=l.channelPayment,this.activePrenotazione.RESIDUO=this.activePrenotazione.TOTALE,this.activePrenotazione.INCASSATO=0):(this.activePrenotazione.RESIDUO=0,this.activePrenotazione.INCASSATO=this.activePrenotazione.TOTALE,this.activePrenotazione.IDTRANSACTION="",this.activePrenotazione.IDORDER=l.idElectronicResult,this.activePrenotazione.CHANNELPAYMENT=l.channelPayment),this.loadingController.create({message:"Salvataggio Prenotazione",spinner:"circular"}).then(a=>{a.present(),this.startService.requestSavePrenotazione().then(p=>{a.dismiss(),this.activePrenotazione=p,p.ISVALID?this.docPianificazione=this.activePrenotazione.PRENOTAZIONEPIANIFICAZIONE[0]:this.showMessage(p.MSGINVALID),this.onAfterSavePrenotazione()}).catch(p=>{a.dismiss(),this.showMessage(p)})}))}onPaymentFailed(l){let a="Si sono verificati errori nel pagamento";l&&l.messageResult&&(a=l.messageResult),this.showAlert(a,"Pagamento Fallito")}showMessage(l){this.toastCtrl.create({message:l,duration:3e3}).then(a=>{a.present()})}showAlert(l,a,p){(!p||0==p.length)&&(p=[]).push("Ok"),this.alertCtrl.create({header:a||"Attenzione",message:l,buttons:p}).then(g=>{g.present()})}openLink(l){M.A.open({url:l})}onClickCondizioniVendita(){let l;this.docArea&&(l=this.docArea.findAreaLinkByPageType(C.GV.condizioniVenditaPrenotazioni),l&&l.REFERURL&&this.openLink(l.REFERURL))}}return t.\u0275fac=function(l){return new(l||t)(o.Y36(P.D),o.Y36(m.SH),o.Y36(m.HT),o.Y36(m.yF),o.Y36(m.X1),o.Y36(m.IN),o.Y36(m.t4),o.Y36(m.Br))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-bookingsummary"]],decls:79,vars:41,consts:[["color","primary"],["slot","primary"],[3,"click"],["slot","icon-only","ios","close","md","close"],[2,"background-color","#EFF1F8"],[1,"griglia-principale"],["color","danger","expand","block",1,"full-buttons",3,"click"],[1,"ion-align-items-center"],["size","3",1,"ion-text-center","left-col"],[1,"ion-no-margin"],[1,"ion-no-margin",2,"margin-top","0px","margin-bottom","0px"],["size","9"],[3,"numPlayer","changeNumPlayer"],["button","","lines","full",3,"click"],["slot","start",3,"ngModel","ngModelChange","click"],[1,"ion-text-wrap"],[3,"arPayment","onPaymentModeChoosed"],["lines","none","id","item-totale"],["slot","start"],[2,"text-align","right"],["color","tertiary","expand","block",1,"full-buttons",3,"disabled","click"]],template:function(l,a){1&l&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),o.NdJ("click",function(){return a.closeModal()}),o._UZ(4,"ion-icon",3),o.qZA()(),o.TgZ(5,"ion-title"),o._uU(6,"Finalizza"),o.qZA()()(),o.TgZ(7,"ion-content")(8,"div",4)(9,"ion-grid",5)(10,"ion-row")(11,"ion-col")(12,"ion-button",6),o.NdJ("click",function(){return a.closeModal()}),o._uU(13," Aspetta, voglio modificare "),o.qZA()()(),o.TgZ(14,"ion-row")(15,"ion-col")(16,"ion-card")(17,"ion-grid")(18,"ion-row",7)(19,"ion-col",8)(20,"h6",9),o._uU(21),o.ALo(22,"uppercase"),o.ALo(23,"date"),o.qZA(),o.TgZ(24,"h4",10),o._uU(25),o.ALo(26,"date"),o.qZA(),o.TgZ(27,"p",9),o._uU(28),o.ALo(29,"titlecase"),o.ALo(30,"date"),o.qZA()(),o.TgZ(31,"ion-col",11)(32,"h6"),o._uU(33),o.qZA(),o.TgZ(34,"h4"),o._uU(35),o.qZA(),o.TgZ(36,"h6"),o._uU(37),o.ALo(38,"titlecase"),o.qZA()()()()()()(),o.TgZ(39,"ion-row")(40,"ion-col")(41,"ion-card")(42,"ion-grid")(43,"ion-row",7)(44,"ion-col",8)(45,"h6",9),o._uU(46),o.ALo(47,"uppercase"),o.ALo(48,"date"),o.qZA(),o.TgZ(49,"h6",9),o._uU(50),o.ALo(51,"date"),o.qZA()(),o.TgZ(52,"ion-col",11)(53,"h5",9),o._uU(54),o.qZA()()()()()()(),o.TgZ(55,"ion-row")(56,"ion-col")(57,"app-player-number",12),o.NdJ("changeNumPlayer",function(g){return a.onChangedNumPlayer(g)}),o.qZA()()()()()(),o.TgZ(58,"ion-footer")(59,"ion-grid")(60,"ion-list")(61,"ion-item",13),o.NdJ("click",function(){return a.disclaimer=!a.disclaimer}),o.TgZ(62,"ion-checkbox",14),o.NdJ("ngModelChange",function(g){return a.disclaimer=g})("click",function(g){return g.stopPropagation()}),o.qZA(),o.TgZ(63,"ion-label",15)(64,"p"),o._uU(65,"Lette e approvate le "),o.TgZ(66,"a",2),o.NdJ("click",function(g){return g.stopPropagation(),a.onClickCondizioniVendita()}),o._uU(67,"condizioni di vendita"),o.qZA()()()(),o.TgZ(68,"app-payment-mode",16),o.NdJ("onPaymentModeChoosed",function(g){return a.onPaymentModeSelected(g)}),o.qZA(),o.TgZ(69,"ion-item",17)(70,"ion-label",18),o._uU(71,"Totale"),o.qZA(),o.TgZ(72,"ion-label",19),o._uU(73),o.ALo(74,"currency"),o.qZA()()(),o.TgZ(75,"ion-row")(76,"ion-col")(77,"ion-button",20),o.NdJ("click",function(){return a.onConfirm()}),o._uU(78," Conferma Prenotazione "),o.qZA()()()()()),2&l&&(o.xp6(21),o.Oqu(o.lcZ(22,15,o.xi3(23,17,null==a.docPianificazione?null:a.docPianificazione.DATAORAINIZIO,"EEE"))),o.xp6(4),o.Oqu(o.xi3(26,20,null==a.docPianificazione?null:a.docPianificazione.DATAORAINIZIO,"dd")),o.xp6(3),o.Oqu(o.lcZ(29,23,o.xi3(30,25,null==a.docPianificazione?null:a.docPianificazione.DATAORAINIZIO,"MMMM"))),o.xp6(5),o.Oqu(null==a.docPianificazione?null:a.docPianificazione._DESCRSPORT),o.xp6(2),o.Oqu(null==a.selectedCampo?null:a.selectedCampo.DENOMINAZIONE),o.xp6(2),o.Oqu(o.lcZ(38,28,a.getAddressLocation())),o.xp6(9),o.Oqu(o.lcZ(47,30,o.xi3(48,32,null==a.docPianificazione?null:a.docPianificazione.DATAORAINIZIO,"HH:mm"))),o.xp6(4),o.Oqu(o.xi3(51,35,null==a.docPianificazione?null:a.docPianificazione.DATAORAFINE,"HH:mm")),o.xp6(4),o.AsE("",null==a.docPianificazione?null:a.docPianificazione.DURATAORE," ",1!=(null==a.docPianificazione?null:a.docPianificazione.DURATAORE)?"Ore":"Ora",""),o.xp6(3),o.Q6J("numPlayer",null==a.docPianificazione?null:a.docPianificazione.NUMPARTECIPANTI),o.xp6(5),o.Q6J("ngModel",a.disclaimer),o.xp6(6),o.Q6J("arPayment",a.myListPayment),o.xp6(5),o.hij(" ",o.xi3(74,38,null==a.activePrenotazione?null:a.activePrenotazione.TOTALE,"EUR")," "),o.xp6(4),o.Q6J("disabled",!a.disclaimer||!(null!=a.activePrenotazione&&a.activePrenotazione.ISVALID)||!a.mySelectedPayment))},directives:[m.Gu,m.sr,m.Sm,m.YG,m.gu,m.wd,m.W2,m.jY,m.Nd,m.wI,m.PM,T.E,m.fr,m.q_,m.Ie,m.nz,m.w,I.JJ,I.On,m.Q$,x.e],pipes:[S.gd,S.uU,S.rS,S.H9],styles:[".griglia-principale[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]{padding:0}h6[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:4px;font-size:15px}h4[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:5px;font-weight:600}.left-col[_ngcontent-%COMP%]{border-right-style:solid;border-width:thin;border-color:#eff1f8}p[_ngcontent-%COMP%]{font-size:13px}ion-button.full-buttons[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}#item-totale[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:20px}"]}),t})()}}]);