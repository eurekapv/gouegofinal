"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7018],{7018:(C,w,n)=>{n.r(w),n.d(w,{AccountPageModule:()=>p});var d=n(9808),v=n(4182),s=n(5362),o=n(2028),l=n(1247),f=n(7456),A=n(2340),t=n(2096);function m(e,P){if(1&e){const a=t.EpF();t.TgZ(0,"ion-button",24),t.NdJ("click",function(){return t.CHM(a),t.oxw().onClickAvatar()}),t._UZ(1,"ion-icon",25),t.qZA()}}function c(e,P){if(1&e){const a=t.EpF();t.TgZ(0,"ion-avatar",26),t.NdJ("click",function(){return t.CHM(a),t.oxw().onClickAvatar()}),t._UZ(1,"img",27),t.qZA()}if(2&e){const a=t.oxw();t.xp6(1),t.Q6J("src",a.imgSrcProfilePic,t.LSH)}}const i=[{path:"",component:(()=>{class e{constructor(a,u,Z,y){this.startSrv=a,this.alertCtrl=u,this.navCtrl=Z,this.mdlController=y,this.imgSrcProfilePic="",this.pictureExist=!1,this.codeVersion="",this.docUtenteListen=this.startSrv.utente.subscribe(U=>{this.docUtente=U}),this.docConfigListen=this.startSrv.startConfig.subscribe(U=>{this.docConfig=U}),this.onListenUserPicture(),this.requestPictureUtente(),this.codeVersion=A.N.version}ngOnInit(){}ngOnDestroy(){this.docUtenteListen&&this.docUtenteListen.unsubscribe(),this.docConfigListen&&this.docConfigListen.unsubscribe(),this.listenUserPicture&&this.listenUserPicture.unsubscribe()}onListenUserPicture(){this.listenUserPicture=this.startSrv.userPicture.subscribe(a=>{a&&0!=a.length?(this.imgSrcProfilePic=a,this.pictureExist=!0):(this.imgSrcProfilePic="",this.pictureExist=!1)})}requestPictureUtente(){this.startSrv.loadPictureUtente()}onClickAvatar(){this.startSrv.takePictureUtente()}requestLogout(){this.alertCtrl.create({header:"Vuoi disconnetterti ?",subHeader:"Potrai sempre rieseguire il login",buttons:[{text:"Si",handler:()=>{this.startSrv.userLogoff(),this.navCtrl.navigateBack(["/"])}},{text:"No",role:"cancel"}]}).then(a=>{a.present()})}openChangePassword(){this.mdlController.create({component:f.N,componentProps:{myUser:this.docUtente,myUrlLogo:this.docConfig.getUrlLogo()}}).then(a=>{a.present(),a.onWillDismiss().then(u=>{u&&u.data&&"update"==u.data.action&&u.data.pwd&&this.startSrv.saveStorageUtente(this.docUtente.WEBLOGIN,u.data.pwd)})})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.D),t.Y36(s.Br),t.Y36(s.SH),t.Y36(s.IN))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account"]],decls:68,vars:5,consts:[["color","primary"],["slot","start"],["defaultHref","/"],[1,"top"],[1,"picture"],["size","large","color","danger","class","only-camera",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],[1,"name"],["color","primary",1,"ion-text-wrap","ion-text-center"],[1,"ion-margin-vertical"],["button","true","routerLink","edit-account","routerDirection","forward"],["slot","start","name","person-circle","color","primary"],["button","true","routerLink","sportlevels","routerDirection","forward"],["slot","start","name","stats-chart","color","primary"],["button","true","routerLink","documents","routerDirection","forward"],["slot","start","name","copy","color","primary"],["button","true","routerLink","invoices","routerDirection","forward"],["slot","start","name","logo-euro","color","primary"],["button","true",3,"click"],["slot","start","name","key","color","primary"],["slot","start","name","log-out","color","primary"],[1,"ion-no-padding"],["lines","none"],["slot","start","color","medium"],["size","large","color","danger",1,"only-camera",3,"click"],["name","camera"],[3,"click"],[3,"src"]],template:function(a,u){1&a&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Profilo"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",3)(8,"ion-grid")(9,"ion-row",4)(10,"ion-col"),t.YNc(11,m,2,0,"ion-button",5),t.YNc(12,c,2,1,"ion-avatar",6),t.qZA()(),t.TgZ(13,"ion-row",7)(14,"ion-col")(15,"ion-label",8)(16,"h1"),t._uU(17),t.qZA(),t.TgZ(18,"p"),t._uU(19),t.qZA()()()()()(),t.TgZ(20,"ion-list",9)(21,"ion-item",10),t._UZ(22,"ion-icon",11),t.TgZ(23,"ion-label")(24,"h2"),t._uU(25,"Qualcosa su di te"),t.qZA(),t.TgZ(26,"p"),t._uU(27,"Data e luogo di nascita, residenza, ecc.."),t.qZA()()(),t.TgZ(28,"ion-item",12),t._UZ(29,"ion-icon",13),t.TgZ(30,"ion-label")(31,"h2"),t._uU(32,"Livelli Attivit\xe0"),t.qZA(),t.TgZ(33,"p"),t._uU(34,"Visualizza i tuoi livelli"),t.qZA()()(),t.TgZ(35,"ion-item",14),t._UZ(36,"ion-icon",15),t.TgZ(37,"ion-label")(38,"h2"),t._uU(39,"Documenti"),t.qZA(),t.TgZ(40,"p"),t._uU(41,"Visualizza e scarica i tuoi documenti"),t.qZA()()(),t.TgZ(42,"ion-item",16),t._UZ(43,"ion-icon",17),t.TgZ(44,"ion-label")(45,"h2"),t._uU(46,"Ricevute Acquisti"),t.qZA(),t.TgZ(47,"p"),t._uU(48,"Scarica le ricevute dei tuoi acquisti"),t.qZA()()(),t.TgZ(49,"ion-item",18),t.NdJ("click",function(){return u.openChangePassword()}),t._UZ(50,"ion-icon",19),t.TgZ(51,"ion-label")(52,"h2"),t._uU(53,"Security Access"),t.qZA(),t.TgZ(54,"p"),t._uU(55,"Cambia Password di accesso"),t.qZA()()(),t.TgZ(56,"ion-item",18),t.NdJ("click",function(){return u.requestLogout()}),t._UZ(57,"ion-icon",20),t.TgZ(58,"ion-label")(59,"h2"),t._uU(60,"Esci"),t.qZA(),t.TgZ(61,"p"),t._uU(62,"Esegui il logout"),t.qZA()()()()(),t.TgZ(63,"ion-footer")(64,"ion-list",21)(65,"ion-item",22)(66,"ion-note",23),t._uU(67),t.qZA()()()()),2&a&&(t.xp6(11),t.Q6J("ngIf",!u.pictureExist),t.xp6(1),t.Q6J("ngIf",u.pictureExist),t.xp6(5),t.Oqu(null==u.docUtente?null:u.docUtente.NOMINATIVO),t.xp6(2),t.Oqu(u.docUtente.EMAIL),t.xp6(48),t.hij("Version: ",u.codeVersion," by AlchimistiLab"))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,s.jY,s.Nd,s.wI,d.O5,s.YG,s.gu,s.BJ,s.Q$,s.q_,s.Ie,s.YI,o.rH,s.fr,s.uN],styles:[".top[_ngcontent-%COMP%]{background-color:var(--ion-color-warning);height:200px;min-height:200px;border-bottom-left-radius:50px;border-bottom-right-radius:50px}.top[_ngcontent-%COMP%]   ion-row.picture[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 50%;height:80px;width:80px}.top[_ngcontent-%COMP%]   ion-row.picture[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]{display:flex;justify-content:center}.top[_ngcontent-%COMP%]   ion-row.picture[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{height:80px;width:80px}.top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700}"]}),e})()},{path:"documents",loadChildren:()=>Promise.all([n.e(8592),n.e(6534)]).then(n.bind(n,6534)).then(e=>e.DocumentsPageModule)},{path:"sportlevels",loadChildren:()=>n.e(3625).then(n.bind(n,3625)).then(e=>e.SportlevelsPageModule)},{path:"settings",loadChildren:()=>n.e(4091).then(n.bind(n,4091)).then(e=>e.SettingsPageModule)},{path:"edit-account",loadChildren:()=>Promise.all([n.e(378),n.e(699)]).then(n.bind(n,699)).then(e=>e.EditAccountPageModule)},{path:"edit-login",loadChildren:()=>Promise.resolve().then(n.bind(n,4744)).then(e=>e.EditLoginPageModule)},{path:"invoices",loadChildren:()=>Promise.all([n.e(8592),n.e(912)]).then(n.bind(n,912)).then(e=>e.InvoicesPageModule)}];let h=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[o.Bz.forChild(i)],o.Bz]}),e})();var g=n(4744);let p=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,v.u5,s.Pc,h,v.UX,g.EditLoginPageModule]]}),e})()},4744:(C,w,n)=>{n.r(w),n.d(w,{EditLoginPageModule:()=>m});var d=n(9808),v=n(4182),s=n(5362),o=n(2028),l=n(7456),f=n(2096);const A=[{path:"",component:l.N}];let t=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=f.oAB({type:c}),c.\u0275inj=f.cJS({imports:[[o.Bz.forChild(A)],o.Bz]}),c})(),m=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=f.oAB({type:c}),c.\u0275inj=f.cJS({imports:[[d.ez,v.u5,s.Pc,t,v.UX]]}),c})()},7456:(C,w,n)=>{n.d(w,{N:()=>t});var d=n(4182),s=(n(5351),n(1247)),o=n(2096),l=n(5362),f=n(9808);function A(m,c){if(1&m&&(o.TgZ(0,"ion-item",22)(1,"ion-label",23),o._uU(2),o.qZA()()),2&m){const r=o.oxw();o.xp6(2),o.Oqu(r.invalidMessage())}}let t=(()=>{class m{constructor(r,i,h,g){this.modalController=r,this.startService=i,this.loadingController=h,this.toastCtrl=g,this.showActual=!1,this.showNew=!1,this.showNewRetype=!1}ngOnInit(){this.createFormGroup()}onCancel(){this.modalController.dismiss({action:"none"})}createFormGroup(){this.form=new d.cw({oldPsw:new d.NI(null,{updateOn:"change",validators:[d.kI.required]}),newPsw1:new d.NI(null,{updateOn:"change",validators:[d.kI.required]}),newPsw2:new d.NI(null,{updateOn:"change",validators:[d.kI.required]})},this.pswValidator)}pswValidator(r){if(r.get("newPsw1").value!=r.get("newPsw2").value)return{invalid:!0}}invalidMessage(){let r="";return this.form.value.newPsw1&&this.form.value.newPsw2&&this.form.value.newPsw1!==this.form.value.newPsw2&&(r="Nuova password non coincide"),r}showHideInput(r,i){switch(r){case"oldpsw":this.showActual=!this.showActual,i.type=this.showActual?"text":"password";break;case"newpsw1":this.showNew=!this.showNew,i.type=this.showNew?"text":"password";break;case"newpsw2":this.showNewRetype=!this.showNewRetype,i.type=this.showNewRetype?"text":"password"}}onSubmit(){let r="",i="";this.form.valid&&(r=this.form.value.newPsw1,i=this.form.value.oldPsw,this.loadingController.create({message:"Aggiornamento in corso"}).then(h=>{h.present(),this.startService.requestChangePassword(i,r).subscribe(g=>{let p="Errore aggiornamento";g.MESSAGE&&(p=g.MESSAGE),h.dismiss(),this.toastCtrl.create({message:p,duration:2e3}).then(e=>{e.present()}),g.RESULT&&this.modalController.dismiss({action:"update",pwd:r})})}))}}return m.\u0275fac=function(r){return new(r||m)(o.Y36(l.IN),o.Y36(s.D),o.Y36(l.HT),o.Y36(l.yF))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-edit-login"]],inputs:{myUser:"myUser",myUrlLogo:"myUrlLogo"},decls:43,vars:8,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["slot","end"],["fill","clear",3,"disabled","click"],["name","checkmark"],[1,"titleicon"],[3,"src"],[1,"ion-margin-horizontal",3,"formGroup"],["name","lock-open-outline","slot","start"],["type","password","inputmode","password","formControlName","oldPsw","placeholder","password attuale","id","oldpsw"],["oldpsw",""],["slot","end","fill","clear",3,"click"],["slot","icon-only",3,"name"],["name","lock-closed-outline","slot","start"],["type","password","inputmode","password","formControlName","newPsw1","placeholder","nuova password","id","newpsw1"],["newpsw1",""],["type","password","inputmode","password","formControlName","newPsw2","placeholder","conferma password","id","newpsw2"],["newpsw2",""],["lines","none",4,"ngIf"],["color","tertiary","expand","block",3,"disabled","click"],["lines","none"],["color","danger"]],template:function(r,i){if(1&r){const h=o.EpF();o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),o.NdJ("click",function(){return i.onCancel()}),o._UZ(4,"ion-icon",3),o.qZA()(),o.TgZ(5,"ion-title"),o._uU(6,"Cambio Password"),o.qZA(),o.TgZ(7,"ion-buttons",4)(8,"ion-button",5),o.NdJ("click",function(){return i.onSubmit()}),o._UZ(9,"ion-icon",6),o.qZA()()()(),o.TgZ(10,"ion-content")(11,"div",7),o._UZ(12,"img",8),o.qZA(),o.TgZ(13,"form",9)(14,"ion-list")(15,"ion-list-header")(16,"ion-label"),o._uU(17,"Password Attuale"),o.qZA()(),o.TgZ(18,"ion-item"),o._UZ(19,"ion-icon",10)(20,"ion-input",11,12),o.TgZ(22,"ion-button",13),o.NdJ("click",function(){o.CHM(h);const p=o.MAs(21);return i.showHideInput("oldpsw",p)}),o._UZ(23,"ion-icon",14),o.qZA()(),o.TgZ(24,"ion-list-header")(25,"ion-label"),o._uU(26,"Nuova Password"),o.qZA()(),o.TgZ(27,"ion-item"),o._UZ(28,"ion-icon",15)(29,"ion-input",16,17),o.TgZ(31,"ion-button",13),o.NdJ("click",function(){o.CHM(h);const p=o.MAs(30);return i.showHideInput("newpsw1",p)}),o._UZ(32,"ion-icon",14),o.qZA()(),o.TgZ(33,"ion-item"),o._UZ(34,"ion-icon",15)(35,"ion-input",18,19),o.TgZ(37,"ion-button",13),o.NdJ("click",function(){o.CHM(h);const p=o.MAs(36);return i.showHideInput("newpsw2",p)}),o._UZ(38,"ion-icon",14),o.qZA()(),o.YNc(39,A,3,1,"ion-item",20),o.qZA()()(),o.TgZ(40,"ion-footer")(41,"ion-button",21),o.NdJ("click",function(){return i.onSubmit()}),o._uU(42,"Conferma"),o.qZA()()}2&r&&(o.xp6(8),o.Q6J("disabled",!i.form.valid),o.xp6(4),o.Q6J("src",i.myUrlLogo,o.LSH),o.xp6(1),o.Q6J("formGroup",i.form),o.xp6(10),o.Q6J("name",i.showActual?"eye-off-outline":"eye-outline"),o.xp6(9),o.Q6J("name",i.showNew?"eye-off-outline":"eye-outline"),o.xp6(6),o.Q6J("name",i.showNewRetype?"eye-off-outline":"eye-outline"),o.xp6(1),o.Q6J("ngIf",!i.form.valid),o.xp6(2),o.Q6J("disabled",!i.form.valid))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.W2,d._Y,d.JL,d.sg,l.q_,l.yh,l.Q$,l.Ie,l.pK,l.j9,d.JJ,d.u,f.O5,l.fr],styles:["ion-content[_ngcontent-%COMP%]{background-color:var(--ion-color-primary-tint)}.titleicon[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;align-content:center;padding:0;margin:5px 0 0;display:-webkit-flex;width:100%;height:100px;text-align:center}.titleicon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px;max-height:100px}"]}),m})()}}]);