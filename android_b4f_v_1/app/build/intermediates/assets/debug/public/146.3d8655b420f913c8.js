"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[146],{10146:(Y,m,c)=>{c.r(m),c.d(m,{HistoryListPageModule:()=>S});var g=c(69808),p=c(52382),r=c(7706),f=c(2840),x=c(13396),h=c(69129),_=c(36755),I=c(13833),y=c(34021),Z=c(75822),t=c(31223),P=c(10004),A=c(46525);let U=(()=>{class i{transform(e,o,...n){let s="",l=[],d="",T=!1,u=0;return void 0!==e&&0!==e.length&&(l=e.split(";")),0!==l.length&&(l.length>3&&(T=!0),l.forEach(J=>{try{u=parseInt(J),u--,s=T?A.E.getsmallLabel(u,o):A.E.getLabel(u,o),0!==d.length&&(d+=", "),d+=s}catch(F){h.M.consoleLog(F,"error")}})),d}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"giorniPrevisti",type:i,pure:!0}),i})();function v(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"ion-toolbar",8)(1,"ion-segment",9),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedView=n)})("ionChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onChangeSegment(n))}),t.TgZ(2,"ion-segment-button",10),t._UZ(3,"ion-icon",11),t.TgZ(4,"ion-label"),t._uU(5,"Prenotazioni"),t.qZA()(),t.TgZ(6,"ion-segment-button",12),t._UZ(7,"ion-icon",13),t.TgZ(8,"ion-label"),t._uU(9,"Corsi"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.selectedView)}}function z(i,a){1&i&&t._UZ(0,"app-card-image",17)}function C(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.onClickCorso(s))}),t._UZ(1,"ion-icon",20),t.TgZ(2,"ion-label",21)(3,"p"),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"date"),t._UZ(7,"br"),t._uU(8),t.ALo(9,"titlecase"),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.TgZ(13,"h3"),t._uU(14),t.ALo(15,"titlecase"),t.ALo(16,"giorniPrevisti"),t.qZA()(),t.TgZ(17,"ion-chip",22),t._uU(18),t.ALo(19,"date"),t._UZ(20,"ion-icon",23),t.qZA()()}if(2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("color",e.DATAFINE>o.today&&e.DATAINIZIO<o.today?"success":"danger"),t.xp6(3),t.hij("",t.lcZ(5,8,t.xi3(6,10,e.DATAINIZIO,"EEEE dd/MM/yyyy"))," "),t.xp6(4),t.hij(" ",t.lcZ(9,13,t.xi3(10,15,e.DATAFINE,"EEEE dd/MM/yyyy"))," "),t.xp6(4),t.AsE("",e.DENOMINAZIONESPORT," in ",e.DENOMINAZIONELOCATION,""),t.xp6(2),t.hij("",t.lcZ(15,18,t.xi3(16,20,e.GIORNIPREVISTI,o.lingua))," "),t.xp6(3),t.Q6J("color",e.DATAFINE>o.today&&e.DATAINIZIO<o.today?"success":"danger"),t.xp6(1),t.hij(" ",t.xi3(19,23,e.ORAINIZIO,"HH:mm")," ")}}function O(i,a){if(1&i&&(t.TgZ(0,"ion-list"),t.YNc(1,C,21,26,"ion-item",18),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.listUtenteCorsi)}}function E(i,a){if(1&i&&(t.TgZ(0,"div",14),t.YNc(1,z,1,0,"app-card-image",15),t.YNc(2,O,2,1,"ion-list",16),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e.listUtenteCorsi.length),t.xp6(1),t.Q6J("ngIf",0!==e.listUtenteCorsi.length)}}function N(i,a){1&i&&t._UZ(0,"app-card-image",25)}function L(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.onClickPrenotazione(s))}),t._UZ(1,"ion-icon",26),t.TgZ(2,"ion-label")(3,"p"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"h1"),t._uU(7),t.ALo(8,"titlecase"),t.ALo(9,"date"),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"h3"),t._uU(12),t.ALo(13,"titlecase"),t.TgZ(14,"span"),t._uU(15),t.qZA(),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"titlecase"),t.qZA()()(),t.TgZ(19,"ion-chip",22),t._uU(20),t.qZA()()}if(2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("color",e.DATAORAFINE<o.today?"danger":"success"),t.xp6(3),t.Oqu(t.xi3(5,10,e.DATAORAINIZIO,"dd/MM/yyyy")),t.xp6(3),t.AsE("",t.lcZ(8,13,t.xi3(9,15,e.DATAORAINIZIO,"EEEE"))," ore ",t.xi3(10,18,e.DATAORAINIZIO,"HH:mm"),""),t.xp6(5),t.hij("",t.lcZ(13,21,e.COMUNELOCATION)," "),t.xp6(3),t.Oqu(e.COMUNELOCATION&&e.INDIRIZZOLOCATION?", ":""),t.xp6(2),t.Oqu(t.lcZ(18,23,e.INDIRIZZOLOCATION)),t.xp6(2),t.Q6J("color",e.DATAORAFINE<o.today?"danger":"success"),t.xp6(1),t.AsE(" ",e.DURATAORE>1?e.DURATAORE:60*e.DURATAORE," ",e.DURATAORE>1?"Ore":"Min."," ")}}function M(i,a){if(1&i&&(t.TgZ(0,"ion-list"),t.YNc(1,L,21,25,"ion-item",18),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.listUtentePrenotazione)}}function b(i,a){if(1&i&&(t.TgZ(0,"div",14),t.YNc(1,N,1,0,"app-card-image",24),t.YNc(2,M,2,1,"ion-list",16),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e.listUtentePrenotazione.length),t.xp6(1),t.Q6J("ngIf",0!==e.listUtentePrenotazione.length)}}const H=[{path:"",component:(()=>{class i{constructor(e,o,n,s,l){this.navController=e,this.startService=o,this.loadingCtrl=n,this.toastCtrl=s,this.docstructureService=l,this.lingua=y.SQ.italiano,this.selectedView="prenotazioni",this.showTabs=!0,this.today=new Date}ngOnInit(){this.sottoscrizionePrenotazioni(),this.sottoscrizioneIscrizioni()}ionViewDidEnter(){this.subDocUtente=this.startService.activeUtenteDoc$.subscribe(e=>{this.docUtente=e,this.docUtente&&this.requestPrenotazioni()})}requestPrenotazioni(){this.docUtente&&this.docUtente.ID&&this.loadingCtrl.create({spinner:"circular",message:"Caricamento",backdropDismiss:!0}).then(e=>{e.present();let o=new I.x(!0);o.IDUTENTE=this.docUtente.ID,this.docstructureService.requestNew(o).then(n=>{this.listUtentePrenotazione=n,e.dismiss()}).catch(n=>{e.dismiss(),h.M.consoleLog(n,"error"),this.showMessage("Errore nel caricamento")})})}requestIscrizioni(){this.docUtente&&this.docUtente.ID&&this.loadingCtrl.create({spinner:"circular",message:"Caricamento",backdropDismiss:!0}).then(e=>{e.present();let o=new _.i(!0);o.IDUTENTE=this.docUtente.ID,this.docstructureService.requestNew(o).then(n=>{this.listUtenteCorsi=n,e.dismiss()}).catch(n=>{e.dismiss(),h.M.consoleLog(n,"error"),this.showMessage("Errore nel caricamento")})})}sottoscrizionePrenotazioni(){this.subListUtentePrenotazioni=this.startService.listUtentePrenotazioni.subscribe(e=>{this.listUtentePrenotazione=e},e=>{})}sottoscrizioneIscrizioni(){this.subListUtenteIscrizioni=this.startService.listUtenteIscrizioni.subscribe(e=>{this.listUtenteCorsi=e},e=>{})}get backPathArray(){return["/","appstart-home","tab-agenda"]}get backButtonHref(){let e="";return e=this.backPathArray.join("/").substring(1),e}onGoToBack(){this.navController.navigateBack(this.backPathArray)}onChangeSegment(e){switch(this.selectedView){case"prenotazioni":this.requestPrenotazioni();break;case"corsi":this.requestIscrizioni()}}onClickCorso(e){let n=[];n=this.startService.getUrlPageHistoryPersonal("course",e.ID),this.navController.navigateForward(n)}onClickPrenotazione(e){let n=[];n=this.startService.getUrlPageHistoryPersonal("book",e.IDPRENOTAZIONE+"-"+e.ID),this.navController.navigateForward(n)}doRefresh(e){if(this.docUtente&&this.docUtente.ID)switch(this.selectedView){case"prenotazioni":let o=new I.x(!0);o.IDUTENTE=this.docUtente.ID,this.docstructureService.requestNew(o).then(s=>{this.listUtentePrenotazione=s,e.target.complete()}).catch(s=>{e.target.complete(),h.M.consoleLog(s,"error"),this.showMessage("Errore nel caricamento")});break;case"corsi":let n=new _.i(!0);n.IDUTENTE=this.docUtente.ID,this.docstructureService.requestNew(n).then(s=>{this.listUtenteCorsi=s,e.target.complete()}).catch(s=>{e.target.complete(),h.M.consoleLog(s,"error"),this.showMessage("Errore nel caricamento")})}}showMessage(e){this.toastCtrl.create({message:e,duration:3e3}).then(o=>{o.present()})}onScroll(e){e.detail.currentY<5?this.showTabs=!0:e.detail.deltaY>20?this.showTabs=!1:e.detail.deltaY<-20&&(this.showTabs=!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.SH),t.Y36(Z.D),t.Y36(r.HT),t.Y36(r.yF),t.Y36(x.l))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-history-list"]],decls:15,vars:4,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["mode","md",4,"ngIf"],["id","content","scrollEvents","",3,"ionScroll"],["slot","fixed",3,"ionRefresh"],["sizeXs","12","sizeSm","12","sizeMd","12","sizeLg","6","offsetLg","3","sizeXl","6","offsetXl","3"],["class","contentExpand",4,"ngIf"],["mode","md"],["mode","md","value","prenotazioni",3,"ngModel","ngModelChange","ionChange"],["value","prenotazioni"],["name","calendar-outline"],["value","corsi"],["name","school-outline"],[1,"contentExpand"],["src","assets/boysplaying_small.png","title","Guardando in archivio","subtitle","Non ho trovato nessuna iscrizione ai nostri corsi",4,"ngIf"],[4,"ngIf"],["src","assets/boysplaying_small.png","title","Guardando in archivio","subtitle","Non ho trovato nessuna iscrizione ai nostri corsi"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["name","school-outline","slot","start",1,"icon-school",3,"color"],[1,"ion-text-wrap"],[3,"color"],["name","time-outline"],["src","assets/boysplaying_small.png","title","Guardando in archivio","subtitle","Non ho trovato nessuna prenotazione per i nostri campi",4,"ngIf"],["src","assets/boysplaying_small.png","title","Guardando in archivio","subtitle","Non ho trovato nessuna prenotazione per i nostri campi"],["name","calendar-outline","slot","start",1,"icon-prenotazioni",3,"color"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Attivit\xe0"),t.qZA()(),t.YNc(6,v,10,1,"ion-toolbar",3),t.qZA(),t.TgZ(7,"ion-content",4),t.NdJ("ionScroll",function(s){return o.onScroll(s)}),t.TgZ(8,"ion-refresher",5),t.NdJ("ionRefresh",function(s){return o.doRefresh(s)}),t._UZ(9,"ion-refresher-content"),t.qZA(),t.TgZ(10,"ion-grid")(11,"ion-row")(12,"ion-col",6),t.YNc(13,E,3,2,"div",7),t.YNc(14,b,3,2,"div",7),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("defaultHref",o.backButtonHref),t.xp6(3),t.Q6J("ngIf",o.showTabs),t.xp6(7),t.Q6J("ngIf","corsi"==o.selectedView),t.xp6(1),t.Q6J("ngIf","prenotazioni"==o.selectedView))},dependencies:[g.sg,g.O5,p.JJ,p.On,r.oU,r.Sm,r.hM,r.wI,r.W2,r.jY,r.Gu,r.gu,r.Ie,r.Q$,r.q_,r.nJ,r.Wo,r.Nd,r.cJ,r.GO,r.wd,r.sr,r.QI,r.cs,P.Z,g.rS,g.uU,U],styles:["h1[_ngcontent-%COMP%]{font-size:16px;font-weight:600}h2[_ngcontent-%COMP%]{font-size:14px;font-weight:500}h3[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.icon-school[_ngcontent-%COMP%], .icon-prenotazioni[_ngcontent-%COMP%]{font-size:40px}.icon-text[_ngcontent-%COMP%]{font-size:12px;margin-top:0;margin-bottom:2px;font-weight:600}.icon-text.article[_ngcontent-%COMP%]{font-size:10px}.contentExpand[_ngcontent-%COMP%]{height:100%}"]}),i})()}];let D=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(H),f.Bz]}),i})();var w=c(24586),R=c(46939);let S=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,p.u5,r.Pc,D,w.D,R.q]}),i})()}}]);