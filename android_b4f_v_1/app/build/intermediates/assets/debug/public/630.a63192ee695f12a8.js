"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[630],{37708:(O,u,l)=>{l.d(u,{b:()=>d});var t=l(34021);class d{constructor(s){this.idElectronicResult="",this.modePayment=s,s==t.x6.pagaStruttura?(this.channelPayment=t.$s.onSite,this.processResult=!0):s==t.x6.pagaBonifico&&(this.channelPayment=t.$s.bonifico,this.processResult=!0)}}},48622:(O,u,l)=>{l.d(u,{t:()=>C});var t=l(69129),d=l(34021),e=l(31223),s=l(7706),h=l(69808);function y(p,g){1&p&&(e.TgZ(0,"div")(1,"ion-card",10)(2,"ion-card-content")(3,"p"),e._uU(4,"Connessione con servizi di pagamento..."),e.qZA(),e._UZ(5,"ion-progress-bar",11),e.qZA()()())}function M(p,g){1&p&&(e.TgZ(0,"div",12)(1,"ion-card",10)(2,"ion-card-content"),e._UZ(3,"div",13),e.qZA()()())}let C=(()=>{class p{constructor(a,o){this.modalController=a,this.toastController=o,this.urlPayPalScriptCheckOut="https://www.paypalobjects.com/api/checkout.js",this.urlPayPalScriptSmart="https://www.paypal.com/sdk/js?client-id=",this.urlPaypal="",this.paypalVersion="checkout",this.showPaypal=!1,this.showStripe=!1,this.showApplePay=!1,this.showGPay=!1,this.noPayment=!1,this.showProgressBar=!0,this.paypalVersion="smart"}ngOnInit(){this.initPaymentMethods()}initPaymentMethods(){if(this.noPayment=!0,this.listAreaPaymentSettings&&0!=this.listAreaPaymentSettings.length)for(let a=0;a<this.listAreaPaymentSettings.length;a++){const o=this.listAreaPaymentSettings[a];if(o.paymentInApp)switch(o.TIPOPAYMENT){case d.$s.paypal:if(this.noPayment=!1,this.showPaypal=!0,"checkout"==this.paypalVersion)this.urlPaypal=this.urlPayPalScriptCheckOut;else if("smart"==this.paypalVersion){switch(o.PPENVIRONMENT){case d.pW.production:this.urlPaypal=this.urlPayPalScriptSmart+o.PPCLIENTIDPRODUCTION;break;case d.pW.test:this.urlPaypal=this.urlPayPalScriptSmart+o.PPCLIENTIDSANDBOX}this.urlPaypal+="&currency=EUR"}this.scriptOnHead(this.urlPaypal)?setTimeout(()=>{this.renderPayPalBtn(o)},500):this.loadDinamicScript(this.urlPaypal).then(()=>{setTimeout(()=>{this.renderPayPalBtn(o)},500)}).catch(()=>{this.showMessage("Errore nelle impostazioni di PayPal; contatta la struttura"),this.onCancelPayment()});break;case d.$s.stripe:this.noPayment=!1,this.showStripe=!0;break;case d.$s.applePay:this.noPayment=!1,this.showApplePay=!0}}else this.noPayment=!0}onCancelPayment(){this.paymentData.processResult=!1,this.paymentData.messageResult="Pagamento annullato",this.modalController.dismiss(this.paymentData)}onSuccessPayment(a,o){this.paymentData.channelPayment=a,this.paymentData.idElectronicResult=o,this.paymentData.processResult=!0,this.paymentData.messageResult="Transazione completata con successo",this.modalController.dismiss(this.paymentData)}OnSuccessPaypal(a){let o,m,r;if(a){switch(this.paypalVersion){case"smart":m=a.payer.name.given_name,o=a.id,r=a.status,t.M.consoleLog(a);break;case"checkout":m=a.payer.name.given_name,o=a.id,r=a.status}this.onSuccessPayment(d.$s.paypal,o)}}loadDinamicScript(a){return new Promise((o,m)=>{const r=document.createElement("script");r.type="text/javascript",r.src=a,document.getElementsByTagName("head")[0].appendChild(r),r.onload=()=>{t.M.consoleLog("Script correctly loaded","warn"),o()},r.onerror=i=>{t.M.consoleLog(i,"error"),m()}})}renderPayPalBtn(a){let o=this;"checkout"==this.paypalVersion?(this.showProgressBar=!1,paypal.Button.render({env:a.PPENVIRONMENT==d.pW.production?"production":"sandbox",client:{sandbox:a.PPCLIENTIDSANDBOX,production:a.PPCLIENTIDPRODUCTION},locale:"it_IT",style:{size:"responsive",color:"gold",shape:"pill",label:"pay",fundingicons:!0},commit:!0,payment:function(m,r){return r.payment.create({transactions:[{amount:{total:o.paymentData.amount+"",currency:o.paymentData.currency},description:o.paymentData.description}],note_to_payer:"Contatta la struttura per ogni problematica sul pagamento."})},onAuthorize:function(m,r){return r.payment.execute().then(function(i){o.OnSuccessPaypal(i)})}},"#customBtnPaypal")):"smart"==this.paypalVersion&&(this.showProgressBar=!1,paypal.Buttons({createOrder:function(m,r){return r.order.create({purchase_units:[{amount:{value:o.paymentData.amount+"",description:o.paymentData.description}}]})},onApprove:function(m,r){return r.order.capture().then(function(i){o.OnSuccessPaypal(i)})}}).render("#customBtnPaypal"))}scriptOnHead(a){let o=document.getElementsByTagName("script"),m=!1;for(let r=0;r<o.length;r++)if(o[r].getAttribute("src")==a){m=!0;break}return m}showMessage(a){this.toastController.create({message:a,duration:3e3}).then(o=>{o.present()})}}return p.\u0275fac=function(a){return new(a||p)(e.Y36(s.IN),e.Y36(s.yF))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-payment"]],inputs:{paymentData:"paymentData",listAreaPaymentSettings:"listAreaPaymentSettings"},decls:19,vars:7,consts:[["color","primary"],["slot","primary"],[3,"click"],["slot","icon-only","ios","close","md","close"],["color","danger","expand","block",1,"full-buttons",3,"click"],[4,"ngIf"],[1,"cart-total"],["lines","none"],["slot","end",1,"ion-text-right"],["class","cart-items",4,"ngIf"],["mode","ios"],["type","indeterminate"],[1,"cart-items"],["id","customBtnPaypal"]],template:function(a,o){1&a&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return o.onCancelPayment()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Pagamento"),e.qZA()()(),e.TgZ(7,"ion-content")(8,"ion-button",4),e.NdJ("click",function(){return o.onCancelPayment()}),e._uU(9," Aspetta, voglio modificare "),e.qZA(),e.YNc(10,y,6,0,"div",5),e.TgZ(11,"div",6)(12,"ion-item",7)(13,"ion-label"),e._uU(14),e.qZA(),e.TgZ(15,"ion-label",8),e._uU(16),e.ALo(17,"currency"),e.qZA()()(),e.YNc(18,M,4,0,"div",9),e.qZA()),2&a&&(e.xp6(10),e.Q6J("ngIf",o.showProgressBar),e.xp6(4),e.Oqu(o.paymentData.description),e.xp6(2),e.Oqu(e.xi3(17,4,o.paymentData.amount,o.paymentData.currency)),e.xp6(2),e.Q6J("ngIf",o.showPaypal))},dependencies:[h.O5,s.YG,s.Sm,s.PM,s.FN,s.W2,s.Gu,s.gu,s.Ie,s.Q$,s.X7,s.wd,s.sr,h.H9],styles:[".welcome-card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:90vw}.welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.welcome-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{margin:auto}.welcome-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{margin:auto}ion-button.full-buttons[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}ion-content[_ngcontent-%COMP%]{--padding-top: 16px;--padding-bottom: 16px;--padding-start: 26px;--padding-end: 26px}.title[_ngcontent-%COMP%]{margin-top:0;color:#434343}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-left:0;margin-right:0;border-radius:0}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{display:flex;position:relative}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:16px}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:110px;height:110px;box-shadow:0 10px 30px rgba(0,0,0,.16)}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){color:#434343}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){color:#919191}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){color:var(--ion-color-primary)}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .qty-selector[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:#f6f6f6;border-radius:5px;margin-top:10px}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .qty-selector[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: #565656;font-size:16px;margin-left:8px;margin-right:8px}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .qty-selector[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#565656!important;font-size:16px}.cart-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   #customBtnPaypal[_ngcontent-%COMP%]{text-align:center;width:100%}.address[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;font-size:18px;color:#434343}.address[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{width:12px;height:12px;padding:0;border-radius:50%}hr[_ngcontent-%COMP%]{background:rgba(151,151,151,.0745098039)}.cart-total[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}.cart-total[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-right:0}.cart-total[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]:nth-child(1){color:#919191}.cart-total[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]:nth-child(2){color:#434343}ion-footer[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}ion-footer[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]:after{box-shadow:none!important}"]}),p})()},97952:(O,u,l)=>{l.d(u,{e:()=>r});var t=l(31223),d=l(49953),e=l(34021),s=l(7706),h=l(69808);function y(i,_){1&i&&(t.TgZ(0,"ion-item",2)(1,"ion-label"),t._uU(2,"Pagamento non supportato"),t.qZA()())}function M(i,_){1&i&&(t.TgZ(0,"p"),t._uU(1," Clicca per altri metodi di pagamento "),t.qZA())}function C(i,_){if(1&i&&(t.TgZ(0,"ion-label")(1,"h6"),t._uU(2),t.qZA(),t.YNc(3,M,2,0,"p",1),t.qZA()),2&i){const n=t.oxw(3);t.xp6(2),t.Oqu(null==n.selectedPaymentMode?null:n.selectedPaymentMode.description),t.xp6(1),t.Q6J("ngIf",n.arPaymentModeList.length>1)}}function p(i,_){1&i&&(t.TgZ(0,"ion-label"),t._uU(1,"Scegli metodo di pagamento"),t.qZA())}function g(i,_){if(1&i){const n=t.EpF();t.TgZ(0,"ion-item",4),t.NdJ("click",function(){t.CHM(n);const P=t.oxw(2);return t.KtG(P.onOpenChoose())}),t._UZ(1,"ion-icon",5),t.YNc(2,C,4,2,"ion-label",1),t.YNc(3,p,2,0,"ion-label",1),t.qZA()}if(2&i){const n=t.oxw(2);t.Q6J("detail",!0),t.xp6(1),t.Q6J("name",n.itemIcon),t.xp6(1),t.Q6J("ngIf",n.selectedPaymentMode),t.xp6(1),t.Q6J("ngIf",!n.selectedPaymentMode)}}function a(i,_){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,g,4,4,"ion-item",3),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.arPaymentModeList.length)}}function o(i,_){if(1&i){const n=t.EpF();t.TgZ(0,"ion-col",8),t.NdJ("click",function(){const f=t.CHM(n).$implicit,x=t.oxw(2);return t.KtG(x.onChangePaymentSelection(f))}),t.TgZ(1,"ion-row",9)(2,"ion-col",10),t._UZ(3,"ion-icon",11),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col",12)(6,"ion-label",13),t._uU(7),t.qZA()()()()}if(2&i){const n=_.$implicit,c=t.oxw(2);t.Tol(c.getModeIconClassColumn(n)),t.Q6J("size",c.modeIconSizeColumn),t.xp6(3),t.Q6J("name",n.itemIcon),t.xp6(4),t.Oqu(n.description)}}function m(i,_){if(1&i&&(t.TgZ(0,"div")(1,"ion-row",6),t.YNc(2,o,8,5,"ion-col",7),t.qZA()()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.arPaymentModeList)}}let r=(()=>{class i{constructor(n){this.actionSheetController=n,this.arPayment=[],this.onPaymentModeChoosed=new t.vpe,this.arPaymentModeList=[],this._iconMode=!1}set iconMode(n){this._iconMode=n}ngOnInit(){this.arPaymentModeList=d.L.prepareArPaymentMode(this.arPayment),this.chooseStartPayment()}chooseStartPayment(){this.arPaymentModeList&&0!=this.arPaymentModeList.length&&(this.arPaymentModeList.sort((n,c)=>c.value-n.value),this.arPaymentModeList[0].value!=e.x6.pagaAdesso&&this.arPaymentModeList.sort((n,c)=>n.value-c.value),this.arPaymentModeList[0].selected=!0,this.onChangePaymentSelection(this.arPaymentModeList[0]))}get itemIcon(){let n="cart-outline";return this.selectedPaymentMode&&(n=this.selectedPaymentMode.itemIcon),n}get modeIconSizeColumn(){let n=0,c=12;return this.arPaymentModeList&&(n=this.arPaymentModeList.length),0!=n&&(c=Math.trunc(12/n),c<3&&(c=3)),c}getModeIconClassColumn(n){let c="col-mode-payment";return n&&this.selectedPaymentMode&&n.value==this.selectedPaymentMode.value&&(c=`${c} selected`),c}onOpenChoose(){let c,n=[];if(this.arPaymentModeList&&0!==this.arPaymentModeList.length){for(const P of this.arPaymentModeList)c={text:P.description,icon:P.itemIcon,handler:()=>{this.onChangePaymentSelection(P)}},n.push(c);c={text:"Annulla",icon:"arrow-undo-sharp",role:"cancel"},n.push(c),this.actionSheetController.create({header:"Come desideri pagare ?",buttons:n}).then(P=>{P.present()})}}onChangePaymentSelection(n){this.selectedPaymentMode=n,this.onPaymentModeChoosed.emit(n.value)}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(s.BX))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-payment-mode"]],inputs:{arPayment:"arPayment",iconMode:"iconMode"},outputs:{onPaymentModeChoosed:"onPaymentModeChoosed"},decls:3,vars:3,consts:[["lines","none",4,"ngIf"],[4,"ngIf"],["lines","none"],["button","","lines","full",3,"detail","click",4,"ngIf"],["button","","lines","full",3,"detail","click"],["slot","start",3,"name"],[1,"ion-align-items-center"],[3,"class","size","click",4,"ngFor","ngForOf"],[3,"size","click"],[1,"row-icon"],["size","12"],[3,"name"],["size","12",1,"ion-no-padding"],[1,"ion-text-wrap"]],template:function(n,c){1&n&&(t.YNc(0,y,3,0,"ion-item",0),t.YNc(1,a,2,1,"div",1),t.YNc(2,m,3,1,"div",1)),2&n&&(t.Q6J("ngIf",!c.arPaymentModeList.length),t.xp6(1),t.Q6J("ngIf",!c._iconMode),t.xp6(1),t.Q6J("ngIf",c._iconMode&&0!=c.arPaymentModeList.length))},dependencies:[s.wI,s.gu,s.Ie,s.Q$,s.Nd,h.sg,h.O5],styles:["ion-item[_ngcontent-%COMP%]{--detail-icon-color: var(--ion-color-primary);--detail-icon-opacity: 1}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}ion-row.row-icon[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:50px;width:50px}ion-row[_ngcontent-%COMP%]   ion-col.col-mode-payment[_ngcontent-%COMP%]{cursor:pointer;text-align:center;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;padding:0;border-radius:10px}ion-row[_ngcontent-%COMP%]   ion-col.col-mode-payment.selected[_ngcontent-%COMP%]{background-color:var(--ion-color-success);color:var(--ion-color-success-contrast)}.payment-indicator-icon[_ngcontent-%COMP%]{height:50px;width:50px}"]}),i})()}}]);