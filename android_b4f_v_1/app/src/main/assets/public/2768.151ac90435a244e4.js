"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2768],{12768:(ao,m,c)=>{c.r(m),c.d(m,{AgendaCustodeDetailsPageModule:()=>to});var _=c(69808),u=c(52382),r=c(7706),d=c(2840),p=c(24973),h=c(52015),A=c(18037),g=c(69129),D=c(42274),l=c(34021),x=c(75822),o=c(31223),C=c(24737),T=c(69214);function P(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-col",3)(1,"ion-button",4),o.NdJ("click",function(){const s=o.CHM(i).$implicit,f=o.oxw();return o.KtG(f.onChooseItem(s))}),o._uU(2),o.qZA()()}if(2&n){const i=a.$implicit,t=o.oxw();o.xp6(1),o.Q6J("color",t._color)("size",t._size)("fill",i.durata==t._activeDurata?"solid":"outline"),o.xp6(1),o.hij(" ",i.text," ")}}let Z=(()=>{class n{constructor(){this.changeDurata=new o.vpe,this._color="primary",this._size="",this.arDurate=[],this.prepareDurate()}set activeDurata(i){let t="";this._activeDurata=i,this.arDurate&&-1==this.arDurate.findIndex(e=>e.durata==i)&&(t=T.GA.getLabelDurata(i,!0),this.arDurate.push({durata:i,text:t}))}set color(i){this._color=i}set size(i){this._size=i}ngOnInit(){}prepareDurate(){this.arDurate=[{text:"1/2 Ora",durata:.5},{text:"1 Ora",durata:1},{text:"1 Ora e 1/2",durata:1.5},{text:"2 Ore",durata:2},{text:"2 Ore e 1/2",durata:2.5},{text:"3 Ore",durata:3},{text:"3 Ore e 1/2",durata:3.5},{text:"4 Ore",durata:4},{text:"4 Ore e 1/2",durata:4.5},{text:"5 Ore",durata:5}]}onChooseItem(i){i&&(this._activeDurata=i.durata,this.changeDurata.emit(i.durata))}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-durata-chooser"]],inputs:{activeDurata:"activeDurata",color:"color",size:"size"},outputs:{changeDurata:"changeDurata"},decls:3,vars:1,consts:[[1,"ion-no-padding","ion-no-margin"],[1,"ion-padding"],["class","ion-padding","size","6","sizeSm","6","sizeXs","6","sizeMd","6","sizeXl","4","sizeLg","4",4,"ngFor","ngForOf"],["size","6","sizeSm","6","sizeXs","6","sizeMd","6","sizeXl","4","sizeLg","4",1,"ion-padding"],["expand","block",3,"color","size","fill","click"]],template:function(i,t){1&i&&(o.TgZ(0,"ion-grid",0)(1,"ion-row",1),o.YNc(2,P,3,4,"ion-col",2),o.qZA()()),2&i&&(o.xp6(2),o.Q6J("ngForOf",t.arDurate))},dependencies:[r.YG,r.wI,r.jY,r.Nd,_.sg]}),n})();const z=["inputprice"];function w(n,a){if(1&n&&(o.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",5)(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),o._uU(6,"Spiacenti"),o.qZA(),o.TgZ(7,"ion-card-subtitle"),o._uU(8),o.qZA()(),o.TgZ(9,"ion-card-content")(10,"p"),o._uU(11,"Recupero dei dati dell'agenda fallito"),o.qZA()()()()()()),2&n){const i=o.oxw();o.xp6(8),o.Oqu(i.messageError)}}function O(n,a){if(1&n&&(o.TgZ(0,"ion-chip",13),o._uU(1),o.qZA()),2&n){const i=o.oxw(2);o.xp6(1),o.AsE(" ",null==i.pianificazioneDoc?null:i.pianificazioneDoc.DURATAORE," ",1==(null==i.pianificazioneDoc?null:i.pianificazioneDoc.DURATAORE)?"Ora":"Ore"," ")}}function I(n,a){1&n&&(o.TgZ(0,"ion-button",33),o._uU(1," MODIFICA "),o.qZA())}function b(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-item",30),o.NdJ("click",function(){o.CHM(i);const e=o.oxw(4);return o.KtG(e.onClickLockButton("partecipanti"))}),o._UZ(1,"ion-icon",31),o.TgZ(2,"ion-label")(3,"h2"),o._uU(4),o.qZA()(),o.YNc(5,I,2,0,"ion-button",32),o.qZA()}if(2&n){const i=o.oxw(4);o.xp6(4),o.AsE("",i.pianificazioneDoc.NUMPARTECIPANTI," ",i.pianificazioneDoc.NUMPARTECIPANTI>1?"Giocatori":"Giocatore",""),o.xp6(1),o.Q6J("ngIf",i.canEditDataPrenotazione)}}function M(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-item",24),o._UZ(1,"ion-icon",34),o.TgZ(2,"ion-label",10),o._uU(3," modifica il numero dei partecipanti per ricalcolare l'importo "),o.qZA(),o.TgZ(4,"ion-button",35),o.NdJ("click",function(){o.CHM(i);const e=o.oxw(4);return o.KtG(e.onClickLockButton("partecipanti"))}),o._uU(5," FATTO "),o.qZA()()}}function E(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"app-player-number",36),o.NdJ("changeNumPlayer",function(e){o.CHM(i);const s=o.oxw(4);return o.KtG(s.onChangedNumPlayer(e))}),o.qZA()}if(2&n){const i=o.oxw(4);o.Q6J("numPlayer",i.pianificazioneDoc.NUMPARTECIPANTI)}}function U(n,a){1&n&&(o.TgZ(0,"ion-button",40),o._uU(1," MODIFICA "),o.qZA())}function N(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-item",37),o.NdJ("click",function(){o.CHM(i);const e=o.oxw(4);return o.KtG(e.onClickLockButton("durata"))}),o._UZ(1,"ion-icon",38),o.TgZ(2,"ion-label")(3,"h2"),o._uU(4),o.qZA()(),o.YNc(5,U,2,0,"ion-button",39),o.qZA()}if(2&n){const i=o.oxw(4);o.xp6(4),o.Oqu(i.pianificazioneDoc.getLabelDurata()),o.xp6(1),o.Q6J("ngIf",i.canEditDataPrenotazione)}}function q(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-item"),o._UZ(1,"ion-icon",34),o.TgZ(2,"ion-label",10),o._uU(3,"modifica la durata per ricalcolare l'importo "),o.qZA(),o.TgZ(4,"ion-button",35),o.NdJ("click",function(){o.CHM(i);const e=o.oxw(4);return o.KtG(e.onClickLockButton("durata"))}),o._uU(5," FATTO "),o.qZA()()}}function v(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"app-durata-chooser",41),o.NdJ("changeDurata",function(e){o.CHM(i);const s=o.oxw(4);return o.KtG(s.onChangeDurata(e))}),o.qZA()}if(2&n){const i=o.oxw(4);o.Q6J("activeDurata",i.pianificazioneDoc.DURATAORE)}}function S(n,a){if(1&n&&(o.TgZ(0,"ion-row",6)(1,"ion-col",6)(2,"ion-item",42),o._UZ(3,"ion-icon",43),o.TgZ(4,"ion-label")(5,"h2"),o._uU(6,"Da Incassare"),o.qZA()(),o.TgZ(7,"ion-label",27)(8,"h4",28),o._uU(9),o.ALo(10,"currency"),o.qZA()()()()()),2&n){const i=o.oxw(4);o.xp6(9),o.Oqu(o.xi3(10,1,null==i.pianificazioneDoc?null:i.pianificazioneDoc.RESIDUO,"EUR"))}}function R(n,a){if(1&n&&(o.TgZ(0,"ion-row",6)(1,"ion-col",6)(2,"ion-item",44),o._UZ(3,"ion-icon",43),o.TgZ(4,"ion-label")(5,"h2"),o._uU(6,"Da Rimborsare"),o.qZA()(),o.TgZ(7,"ion-label",27)(8,"h4",28),o._uU(9),o.ALo(10,"currency"),o.qZA()()()()()),2&n){const i=o.oxw(4);o.xp6(9),o.Oqu(o.xi3(10,1,null==i.pianificazioneDoc?null:i.pianificazioneDoc.RESIDUO,"EUR"))}}function y(n,a){1&n&&(o.TgZ(0,"ion-row",6)(1,"ion-col",6)(2,"ion-button",45),o._uU(3," INCASSATO TOTALMENTE "),o.qZA()()())}function k(n,a){if(1&n&&(o.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-item")(3,"ion-label",10),o._uU(4),o.qZA()(),o.TgZ(5,"ion-item")(6,"ion-label",10),o._uU(7," Totale generale "),o.qZA(),o.TgZ(8,"ion-label",27)(9,"h5",46),o._uU(10),o.ALo(11,"currency"),o.qZA()()(),o.TgZ(12,"ion-item")(13,"ion-label",10),o._uU(14," Residuo generale "),o.qZA(),o.TgZ(15,"ion-label",27)(16,"h5",46),o._uU(17),o.ALo(18,"currency"),o.qZA()()()()()),2&n){const i=o.oxw(4);o.xp6(4),o.hij(" La prenotazione \xe8 parte di una prenotazione multipla composta da ",i.prenotazioneDoc.getNumeroDatePianificate()," date pianificate "),o.xp6(6),o.Oqu(o.xi3(11,3,null==i.prenotazioneDoc?null:i.prenotazioneDoc.TOTALE,"EUR")),o.xp6(7),o.Oqu(o.xi3(18,6,null==i.prenotazioneDoc?null:i.prenotazioneDoc.TOTALE,"EUR"))}}function J(n,a){if(1&n&&(o.TgZ(0,"ion-row",6)(1,"ion-col")(2,"ion-grid",6)(3,"ion-row")(4,"ion-col")(5,"ion-list",17)(6,"ion-list-header"),o._uU(7," Quanti partecipano "),o.qZA(),o.YNc(8,b,6,3,"ion-item",18),o.YNc(9,M,6,0,"ion-item",19),o.YNc(10,E,1,1,"app-player-number",20),o.qZA()()(),o.TgZ(11,"ion-row")(12,"ion-col")(13,"ion-list",21)(14,"ion-list-header"),o._uU(15," Per quanto tempo "),o.qZA(),o.YNc(16,N,6,2,"ion-item",22),o.YNc(17,q,6,0,"ion-item",3),o.YNc(18,v,1,1,"app-durata-chooser",23),o.qZA()()(),o.TgZ(19,"ion-row",6)(20,"ion-col",6)(21,"ion-list",24)(22,"ion-list-header",17),o._uU(23," Importo Data "),o.qZA(),o.TgZ(24,"ion-item",25),o._UZ(25,"ion-icon",26),o.TgZ(26,"ion-label")(27,"h2"),o._uU(28,"Totale"),o.qZA()(),o.TgZ(29,"ion-label",27)(30,"h4",28),o._uU(31),o.ALo(32,"currency"),o.qZA()()()()()(),o.TgZ(33,"ion-row",6)(34,"ion-col",6)(35,"ion-item",25),o._UZ(36,"ion-icon",29),o.TgZ(37,"ion-label")(38,"h2"),o._uU(39,"Incassato"),o.qZA()(),o.TgZ(40,"ion-label",27)(41,"h4",28),o._uU(42),o.ALo(43,"currency"),o.qZA()()()()(),o.YNc(44,S,11,4,"ion-row",4),o.YNc(45,R,11,4,"ion-row",4),o.YNc(46,y,4,0,"ion-row",4),o.YNc(47,k,19,9,"ion-row",3),o.qZA()()()),2&n){const i=o.oxw(3);o.xp6(8),o.Q6J("ngIf",i.lockedFormPartecipanti),o.xp6(1),o.Q6J("ngIf",!i.lockedFormPartecipanti),o.xp6(1),o.Q6J("ngIf",!i.lockedFormPartecipanti),o.xp6(6),o.Q6J("ngIf",i.lockedFormDurata),o.xp6(1),o.Q6J("ngIf",!i.lockedFormDurata),o.xp6(1),o.Q6J("ngIf",!i.lockedFormDurata),o.xp6(13),o.Oqu(o.xi3(32,12,null==i.pianificazioneDoc?null:i.pianificazioneDoc.TOTALE,"EUR")),o.xp6(11),o.Oqu(o.xi3(43,15,null==i.pianificazioneDoc?null:i.pianificazioneDoc.INCASSATO,"EUR")),o.xp6(2),o.Q6J("ngIf",(null==i.pianificazioneDoc?null:i.pianificazioneDoc.RESIDUO)>0),o.xp6(1),o.Q6J("ngIf",(null==i.pianificazioneDoc?null:i.pianificazioneDoc.RESIDUO)<0),o.xp6(1),o.Q6J("ngIf",0==(null==i.pianificazioneDoc?null:i.pianificazioneDoc.RESIDUO)),o.xp6(1),o.Q6J("ngIf",i.prenotazioneDoc.getNumeroDatePianificate()>1)}}function F(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-row",50)(1,"ion-col",51)(2,"ion-button",53),o.NdJ("click",function(){o.CHM(i);const e=o.oxw(4);return o.KtG(e.onClickConferma())}),o._UZ(3,"ion-icon",54),o._uU(4," Conferma prenotazione "),o.qZA()()()}}function Q(n,a){if(1&n&&(o.TgZ(0,"ion-row",6)(1,"ion-col",6)(2,"ion-item",42),o._UZ(3,"ion-icon",60),o.TgZ(4,"ion-label")(5,"h2"),o._uU(6,"Da Incassare"),o.qZA()(),o.TgZ(7,"ion-label",27)(8,"h4",28),o._uU(9),o.ALo(10,"currency"),o.qZA()()()()()),2&n){const i=o.oxw(5);o.xp6(9),o.Oqu(o.xi3(10,1,null==i.pianificazioneDoc?null:i.pianificazioneDoc.RESIDUO,"EUR"))}}function L(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-row",61)(1,"ion-col")(2,"ion-segment",62),o.NdJ("ionChange",function(){o.CHM(i);const e=o.oxw(5);return o.KtG(e.onChangeSegmentModoIncasso())})("ngModelChange",function(e){o.CHM(i);const s=o.oxw(5);return o.KtG(s.modeIncasso=e)}),o.TgZ(3,"ion-segment-button",63)(4,"ion-label"),o._uU(5,"Nessuno"),o.qZA()(),o.TgZ(6,"ion-segment-button",64)(7,"ion-label"),o._uU(8,"Completo"),o.qZA()(),o.TgZ(9,"ion-segment-button",65)(10,"ion-label"),o._uU(11,"Parziale"),o.qZA()()()()()}if(2&n){const i=o.oxw(5);o.xp6(2),o.Q6J("ngModel",i.modeIncasso)}}function Y(n,a){if(1&n&&(o.TgZ(0,"ion-label",69)(1,"h4",12),o._uU(2),o.ALo(3,"currency"),o.qZA()()),2&n){const i=o.oxw(6);o.xp6(2),o.hij(" ",o.xi3(3,1,null==i.pianificazioneDoc?null:i.pianificazioneDoc.RESIDUO,"EUR")," ")}}function H(n,a){1&n&&(o.TgZ(0,"ion-button",70),o._uU(1," NULLA "),o.qZA())}function G(n,a){if(1&n&&(o.TgZ(0,"ion-item")(1,"ion-label",10)(2,"h5",66),o._uU(3,"Adesso Incasso"),o.qZA()(),o.YNc(4,Y,4,4,"ion-label",67),o.YNc(5,H,2,0,"ion-button",68),o.qZA()),2&n){const i=o.oxw(5);o.xp6(4),o.Q6J("ngIf","completo"==i.modeIncasso),o.xp6(1),o.Q6J("ngIf","nessuno"==i.modeIncasso)}}function B(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-item",71)(1,"ion-input",72,73),o.NdJ("ngModelChange",function(e){o.CHM(i);const s=o.oxw(5);return o.KtG(s.inputIncassoAttuale=e)}),o.qZA(),o._UZ(3,"ion-icon",74),o.qZA()}if(2&n){const i=o.oxw(5);o.xp6(1),o.Q6J("ngModel",i.inputIncassoAttuale)}}function K(n,a){if(1&n&&(o.TgZ(0,"ion-list",55)(1,"ion-list-header",56),o._uU(2," Gestione Incasso "),o.qZA(),o.TgZ(3,"ion-grid",6)(4,"ion-row",6)(5,"ion-col",6)(6,"ion-item"),o._UZ(7,"ion-icon",34),o.TgZ(8,"ion-label",10),o._uU(9," Indicare se l'importo residuo viene incassato totalmente, in parte o eventualmente non venga incassato "),o.qZA()()()(),o.YNc(10,Q,11,4,"ion-row",4),o.YNc(11,L,12,1,"ion-row",57),o.TgZ(12,"ion-row",58)(13,"ion-col"),o.YNc(14,G,6,2,"ion-item",3),o.YNc(15,B,4,1,"ion-item",59),o.qZA()()()()),2&n){const i=o.oxw(4);o.xp6(10),o.Q6J("ngIf",(null==i.pianificazioneDoc?null:i.pianificazioneDoc.RESIDUO)>0),o.xp6(1),o.Q6J("ngIf",null==i.pianificazioneDoc?null:i.pianificazioneDoc.paymentRequested()),o.xp6(3),o.Q6J("ngIf","parziale"!=i.modeIncasso),o.xp6(1),o.Q6J("ngIf","parziale"==i.modeIncasso)}}function V(n,a){if(1&n&&(o.TgZ(0,"ion-row",6)(1,"ion-col")(2,"ion-grid",6),o.YNc(3,F,5,0,"ion-row",47),o.TgZ(4,"ion-row",48)(5,"ion-col",48),o.YNc(6,K,16,4,"ion-list",49),o.qZA()(),o.TgZ(7,"ion-row",50)(8,"ion-col")(9,"ion-list",24)(10,"ion-list-header",17),o._uU(11," Annotazioni "),o.qZA(),o.TgZ(12,"ion-grid",51)(13,"ion-row")(14,"ion-col"),o._UZ(15,"ion-textarea",52),o.qZA()()()()()()()()()),2&n){const i=o.oxw(3);o.xp6(3),o.Q6J("ngIf",i.canEditDataPrenotazione),o.xp6(3),o.Q6J("ngIf",null==i.pianificazioneDoc?null:i.pianificazioneDoc.paymentRequested()),o.xp6(9),o.Q6J("autoGrow",!0)("counter",!0)}}function X(n,a){if(1&n){const i=o.EpF();o.TgZ(0,"ion-row")(1,"ion-col",5)(2,"ion-grid")(3,"ion-row")(4,"ion-col")(5,"ion-segment",14),o.NdJ("ngModelChange",function(e){o.CHM(i);const s=o.oxw(2);return o.KtG(s.activePageView=e)}),o.TgZ(6,"ion-segment-button",15)(7,"ion-label"),o._uU(8,"Dettagli"),o.qZA()(),o.TgZ(9,"ion-segment-button",16)(10,"ion-label"),o._uU(11,"Conferma"),o.qZA()()()()(),o.YNc(12,J,48,18,"ion-row",4),o.YNc(13,V,16,4,"ion-row",4),o.qZA()()()}if(2&n){const i=o.oxw(2);o.xp6(5),o.Q6J("ngModel",i.activePageView),o.xp6(7),o.Q6J("ngIf","page-info"==i.activePageView),o.xp6(1),o.Q6J("ngIf","page-conferma"==i.activePageView)}}function $(n,a){1&n&&(o.TgZ(0,"ion-item")(1,"ion-label")(2,"h4"),o._uU(3,"Nessun iscritto al corso"),o.qZA()()())}function j(n,a){if(1&n&&(o.TgZ(0,"ion-item"),o._UZ(1,"ion-icon",76),o.TgZ(2,"ion-label")(3,"h5"),o._uU(4),o.qZA()()()),2&n){const i=a.$implicit;o.xp6(4),o.Oqu(i.NOMINATIVO)}}function W(n,a){if(1&n&&(o.TgZ(0,"ion-row")(1,"ion-col",5)(2,"ion-list",17)(3,"ion-list-header"),o._uU(4,"Iscritti Corso"),o.qZA(),o.YNc(5,$,4,0,"ion-item",3),o.YNc(6,j,5,1,"ion-item",75),o.qZA()()()),2&n){const i=o.oxw(2);o.xp6(5),o.Q6J("ngIf",0==i.listIscrittiCorso.length),o.xp6(1),o.Q6J("ngForOf",i.listIscrittiCorso)}}function oo(n,a){if(1&n&&(o.TgZ(0,"ion-grid",6)(1,"ion-row")(2,"ion-col",5)(3,"div",7)(4,"ion-item",8),o._UZ(5,"ion-icon",9),o.TgZ(6,"ion-label",10)(7,"h2"),o._uU(8),o.ALo(9,"date"),o.qZA(),o.TgZ(10,"h2")(11,"span"),o._uU(12),o.ALo(13,"date"),o.ALo(14,"date"),o.qZA(),o.YNc(15,O,2,2,"ion-chip",11),o.qZA(),o.TgZ(16,"h1"),o._uU(17),o.qZA(),o.TgZ(18,"p",12),o._uU(19),o.ALo(20,"titlecase"),o.qZA(),o.TgZ(21,"p",12),o._uU(22),o.ALo(23,"titlecase"),o.qZA(),o.TgZ(24,"p",12),o._uU(25),o.qZA()()()()()(),o.YNc(26,X,14,3,"ion-row",3),o.YNc(27,W,7,2,"ion-row",3),o.qZA()),2&n){const i=o.oxw();o.xp6(5),o.Q6J("name",i.iconHeader),o.xp6(3),o.Oqu(o.xi3(9,11,i.impegnoDoc.DATAORAINIZIO,"EEEE dd/MM/yyyy ")),o.xp6(4),o.AsE("",o.xi3(13,14,i.impegnoDoc.DATAORAINIZIO,"H.mm")," - ",o.xi3(14,17,i.impegnoDoc.DATAORAFINE,"H.mm"),"\xa0"),o.xp6(3),o.Q6J("ngIf",i.settoreRefer==i.Tiposettore.settorePrenotazione),o.xp6(2),o.Oqu(i.impegnoDoc.DENOMINAZIONE),o.xp6(2),o.Oqu(o.lcZ(20,20,i.impegnoDoc.DENOMINAZIONELOCATION)),o.xp6(3),o.Oqu(o.lcZ(23,22,i.impegnoDoc.DENOMINAZIONECAMPO)),o.xp6(3),o.Oqu(i.impegnoDoc.DENOMINAZIONESPORT),o.xp6(1),o.Q6J("ngIf",i.loadingComplete&&!i.loadingError&&i.settoreRefer==i.Tiposettore.settorePrenotazione),o.xp6(1),o.Q6J("ngIf",i.loadingComplete&&!i.loadingError&&i.settoreRefer==i.Tiposettore.settoreCorso)}}const io=[{path:"",component:(()=>{class n{constructor(i,t,e,s){this.activatedRoute=i,this.navController=t,this.startService=e,this.loadingController=s,this.loadingError=!1,this.messageError="",this.loadingComplete=!1,this.captionHeader="Agenda",this.iconHeader="calendar",this.Tiposettore=l.bS,this.lockedFormPartecipanti=!0,this.lockedFormDurata=!0,this.modeIncasso="completo",this.activePageView="page-info",this.myToday=new Date}ngOnInit(){let i="pianificazioneId";this.loadingError=!1,this.loadingComplete=!1,this.messageError="",this.subParaMap=this.activatedRoute.paramMap.subscribe(t=>{t.has(i)?(this.idPianificazione=t.get(i),this.loadingController.create({message:"Attendere caricamento",backdropDismiss:!0,spinner:"circular"}).then(e=>{e.present(),this.requestDocs().then(()=>{e.dismiss(),this.loadingComplete=!0,this.loadingError=!1,this.messageError="",this.startService.presentToastMessage("Dati caricati")}).catch(s=>{if(g.M.consoleLog(s),e.dismiss(),this.loadingComplete=!0,this.loadingError=!0,"string"==typeof s)this.messageError=s;else try{this.messageError=s.message}catch(f){this.messageError="Errore nel recupero dei dati"}})})):(this.loadingError=!0,this.loadingComplete=!0,this.messageError="Pianificazione non definita")})}ngOnDestroy(){this.subParaMap&&this.subParaMap.unsubscribe()}get backPathArray(){return["/","appstart-home","tab-agenda"]}get backButtonHref(){let i="";return i=this.backPathArray.join("/").substring(1),i}onGoToBack(i){this.navController.navigateBack(this.backPathArray).then(t=>{t&&i&&0!=i.length&&this.startService.presentAlertMessage(i)})}onChangeSegmentModoIncasso(){console.log("Qua"),"parziale"==this.modeIncasso&&setTimeout(()=>{this.inputPrice&&this.inputPrice.getInputElement().then(i=>{i&&(i.style.fontSize="xx-large")})},250)}requestDocs(){return new Promise((i,t)=>{this.idPianificazione&&0!=this.idPianificazione.length?this.startService.requestImpegnoCustodeById(this.idPianificazione).then(e=>{if(e)return this.impegnoDoc=e,e;t("Non \xe8 stato trovato l'elemento richiesto")}).then(e=>this.requestDocRelFromImpegno(e)).then(e=>(g.M.consoleLog("Caricamento Impegno concluso"),g.M.consoleLog(e),this.iconHeader=this.impegnoDoc.getIconName(),e instanceof h._?(this.settoreRefer=l.bS.settoreCorso,this.corsoDoc=e,this.captionHeader="Corso"):e instanceof D._?(this.settoreRefer=l.bS.settorePrenotazione,this.pianificazioneDoc=e,this.captionHeader="Prenotazione"):e instanceof A.E&&(this.settoreRefer=l.bS.settoreEvento,this.eventoDoc=e,this.captionHeader="Evento"),e)).then(e=>(g.M.consoleLog("Caricamento documenti aggiuntivi"),this.additionalLoading())).then(()=>{console.log(this.prenotazioneDoc),console.log(this.pianificazioneDoc),i()}).catch(e=>{t(e)}):t("Pianificazione non definita")})}additionalLoading(){return new Promise((i,t)=>{this.settoreRefer==l.bS.settorePrenotazione?this.startService.requestPrenotazioneById(this.pianificazioneDoc.IDPRENOTAZIONE,2).then(e=>{e?(this.prenotazioneDoc=e,i()):t("Prenotazione non trovata")}).catch(e=>{t(e)}):this.settoreRefer==l.bS.settoreCorso?this.startService.requestPresenzeDataCorso(this.idPianificazione).then(e=>{this.listIscrittiCorso=e,i()}).catch(e=>{g.M.consoleLog(e),this.listIscrittiCorso=[],i()}):this.settoreRefer==l.bS.settoreEvento&&i()})}requestDocRelFromImpegno(i){return new Promise((t,e)=>{if(i)switch(i.SETTORE){case l.bS.settoreCorso:this.startService.requestCorsoById(i.IDREF).then(s=>{t(s)}).catch(s=>{e(s)});break;case l.bS.settorePrenotazione:this.startService.requestPianificazionePrenotazioneById(i.ID).then(s=>{t(s)}).catch(s=>{e(s)});break;case l.bS.settoreEvento:this.startService.requestEventoById(i.IDREF).then(s=>{t(s)}).catch(s=>{e(s)});break;default:e("Tipologia di riferimento non impostata")}else e("Informazioni insufficienti per il caricamento")})}get canEditDataPrenotazione(){return!0}onClickLockButton(i){if(this.canEditDataPrenotazione)switch(i){case"partecipanti":this.lockedFormPartecipanti=!this.lockedFormPartecipanti;break;case"durata":this.lockedFormDurata=!this.lockedFormDurata}}onValidationConferma(){let i=!1,t="",e="";if(i=!0,this.prenotazioneDoc&&this.pianificazioneDoc){if(this.pianificazioneDoc.paymentRequested())switch(this.modeIncasso){case"completo":this.pianificazioneDoc.INCASSOCUSTODE=this.pianificazioneDoc.RESIDUO;break;case"parziale":this.inputIncassoAttuale&&0!=this.inputIncassoAttuale?this.inputIncassoAttuale>this.pianificazioneDoc.RESIDUO?(i=!1,e=p.m.formatNumeric(this.pianificazioneDoc.RESIDUO),t=`<p>L'importo da incassare deve essere al massimo <strong>${e}</strong> Eur.</p>`):this.pianificazioneDoc.INCASSOCUSTODE=this.inputIncassoAttuale:(i=!1,e=p.m.formatNumeric(this.pianificazioneDoc.RESIDUO),t="<p>Indicare l'importo ricevuto dal cliente</p>");break;case"nessuno":this.pianificazioneDoc.INCASSOCUSTODE=0}}else i=!1,t="<p>Si sono verificati errori</p>",t+="<p>Ricaricare la prenotazione per proseguire</p>";return i||this.startService.presentAlertMessage(t),i}onClickConferma(){let i=!1,t="",e="",s=[];i=this.onValidationConferma(),i&&(this.pianificazioneDoc.NOTES=this.inputAnnotazioni,this.pianificazioneDoc.paymentRequested()?0!=this.pianificazioneDoc.INCASSOCUSTODE?(e=p.m.formatNumeric(this.pianificazioneDoc.INCASSOCUSTODE),this.pianificazioneDoc.INCASSOCUSTODE>0?(t="<p>Confermi la prenotazione e dichiari di aver incassato</p>",t+=`<p class="ion-text-bold ion-text-large">${e} \u20ac</p>`,t+="<p>dal cliente</p>"):(t="<p>Confermi la prenotazione e dichiari di aver restituito</p>",t+=`<p class="ion-text-bold ion-text-large">${e} \u20ac</p>`,t+="<p>al cliente</p>")):(t="<p>Confermi la prenotazione e dichiari di</p>",t+='<p class="ion-text-bold ion-text-large">NON AVER INCASSATO NULLA</p>',t+="<p>dal cliente</p>"):t="Confermi che il cliente si &egrave presentato ed ha usufruito della struttura ?",s=[{text:"CONFERMO",handler:()=>{this.onSubmitData()}},{text:"ANNULLA",role:"cancel"}],this.startService.presentAlertMessage(t,"Conferma",s))}onSubmitData(){this.startService.showLoadingMessage("Salvataggio in corso...").then(i=>{i.present(),this.startService.onRequestCustodePianificazioneSave(this.pianificazioneDoc).then(t=>{i.dismiss(),this.onGoToBack("Aggiornamento effettuato con successo")}).catch(t=>{i.dismiss(),this.startService.presentAlertMessage(t,"Errore occorso")})})}onChangedNumPlayer(i){this.pianificazioneDoc.NUMPARTECIPANTI=i,this.onRequestRicalcoloTotalePianificazione()}onChangeDurata(i){i!=this.pianificazioneDoc.DURATAORE&&(this.pianificazioneDoc.DURATAORE=i,this.onRequestRicalcoloTotalePianificazione())}onRequestRicalcoloTotalePianificazione(){this.startService.showLoadingMessage("Attendere ricalcolo").then(i=>{i.present(),this.startService.onRequestCustodePianificazioneChange(this.pianificazioneDoc).then(t=>{i.dismiss(),this.prenotazioneDoc=t,this.pianificazioneDoc=this.prenotazioneDoc.PRENOTAZIONEPIANIFICAZIONE.find(e=>e.ID==this.idPianificazione),console.log(this.pianificazioneDoc),console.log(this.prenotazioneDoc),this.startService.presentToastMessage("Ricalcolo effettuato")}).catch(t=>{i.dismiss(),this.startService.presentAlertMessage(t)})})}}return n.\u0275fac=function(i){return new(i||n)(o.Y36(d.gz),o.Y36(r.SH),o.Y36(x.D),o.Y36(r.HT))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-agenda-custode-details"]],viewQuery:function(i,t){if(1&i&&o.Gf(z,5),2&i){let e;o.iGM(e=o.CRH())&&(t.inputPrice=e.first)}},decls:9,vars:4,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],[4,"ngIf"],["class","ion-no-margin ion-no-padding",4,"ngIf"],["sizeXs","12","sizeSm","12","sizeMd","12","sizeLg","6","offsetLg","3","sizeXl","6","offsetXl","3"],[1,"ion-no-margin","ion-no-padding"],[1,"ion-no-padding","div-header"],["lines","none","color","light"],["slot","start","color","primary",3,"name"],[1,"ion-text-wrap"],["color","danger",4,"ngIf"],[1,"ion-text-bold"],["color","danger"],["mode","md",3,"ngModel","ngModelChange"],["value","page-info"],["value","page-conferma"],["mode","ios"],["detail","false","button","true","lines","none",3,"click",4,"ngIf"],["lines","none",4,"ngIf"],[3,"numPlayer","changeNumPlayer",4,"ngIf"],["lines","none","mode","ios"],["detail","false","button","true",3,"click",4,"ngIf"],["size","","color","success",3,"activeDurata","changeDurata",4,"ngIf"],["lines","none"],["detail","false","button","false","lines","none"],["slot","start","size","large","name","layers-outline"],["slot","end",1,"ion-text-wrap","ion-text-right"],[1,"ion-text-large","ion-text-bold"],["slot","start","size","large","name","wallet-outline"],["detail","false","button","true","lines","none",3,"click"],["slot","start","size","large","name","person-circle-outline","color","primary"],["size","small","color","danger",4,"ngIf"],["size","small","color","danger"],["slot","start","name","information-circle-outline"],["slot","end","size","small","color","success",3,"click"],[3,"numPlayer","changeNumPlayer"],["detail","false","button","true",3,"click"],["slot","start","size","large","name","time-outline","color","primary"],["slot","end","size","small","color","danger",4,"ngIf"],["slot","end","size","small","color","danger"],["size","","color","success",3,"activeDurata","changeDurata"],["color","danger","detail","false","button","false","lines","none"],["slot","start","size","large","name","cash-outline"],["color","success","detail","false","button","false","lines","none"],["expand","block","fill","outline","color","success","size","large"],[1,"ion-text-large"],["class","ion-margin-top",4,"ngIf"],[1,"ion-no-margin"],["class","ion-margin-top","lines","none",4,"ngIf"],[1,"ion-margin-top"],[1,"ion-margin-horizontal"],["aria-label","annotazioni","maxlength","1000","helperText","annotazioni","placeholder","inserisci annotazioni per la segreteria",3,"autoGrow","counter"],["expand","full","shape","fill","color","success",3,"click"],["name","checkmark-outline","slot","start"],["lines","none",1,"ion-margin-top"],["mode","ios",1,"ion-margin-bottom"],["class","ion-no-margin ion-padding-top",4,"ngIf"],[1,"ion-margin-bottom","ion-no-padding"],["color","light","class","ion-margin-vertical",4,"ngIf"],["slot","start","size","large","name","money-outline"],[1,"ion-no-margin","ion-padding-top"],["mode","ios",1,"modo-incasso",3,"ngModel","ionChange","ngModelChange"],["value","nessuno"],["value","completo"],["value","parziale"],[1,"ion-no-margin","ion-text-bold"],["class","ion-text-right ion-text-wrap","slot","end",4,"ngIf"],["expand","full","slot","end","size","small","color","danger",4,"ngIf"],["slot","end",1,"ion-text-right","ion-text-wrap"],["expand","full","slot","end","size","small","color","danger"],["color","light",1,"ion-margin-vertical"],["size","large","inputmode","number","aria-label","Adesso Incasso","type","number","placeholder","digita l'importo",1,"ion-text-right","input-price",3,"ngModel","ngModelChange"],["inputprice",""],["name","logo-euro","slot","end"],[4,"ngFor","ngForOf"],["slot","start","name","person-outline"]],template:function(i,t){1&i&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),o._UZ(3,"ion-back-button",2),o.qZA(),o.TgZ(4,"ion-title"),o._uU(5),o.qZA()()(),o.TgZ(6,"ion-content"),o.YNc(7,w,12,1,"ion-grid",3),o.YNc(8,oo,28,24,"ion-grid",4),o.qZA()),2&i&&(o.xp6(3),o.Q6J("defaultHref",t.backButtonHref),o.xp6(2),o.Oqu(t.captionHeader),o.xp6(2),o.Q6J("ngIf",t.loadingComplete&&t.loadingError),o.xp6(1),o.Q6J("ngIf",t.loadingComplete&&!t.loadingError))},dependencies:[_.sg,_.O5,u.JJ,u.On,r.oU,r.YG,r.Sm,r.PM,r.FN,r.Zi,r.tO,r.Dq,r.hM,r.wI,r.W2,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.q_,r.yh,r.Nd,r.cJ,r.GO,r.g2,r.wd,r.sr,r.as,r.QI,r.j9,r.cs,C.E,Z,_.rS,_.H9,_.uU],styles:["div.div-header[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{margin-right:15px;font-size:50px}.danger-price[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);color:var(--ion-color-danger-contrast)}.success-price[_ngcontent-%COMP%]{background-color:var(--ion-color-succes);color:var(--ion-color-success-contrast)}.player-icons[_ngcontent-%COMP%]{min-width:20px}.player-indicator-icon[_ngcontent-%COMP%]{height:50px;width:50px}.info-list[_ngcontent-%COMP%]   .item-nominativo[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%], .info-list[_ngcontent-%COMP%]   .item-data[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{font-weight:700}.info-list[_ngcontent-%COMP%]   .item-sport[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}.checkout-grid[_ngcontent-%COMP%]   .row-persone[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{height:70px}.checkout-grid[_ngcontent-%COMP%]   .row-importi-1[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{display:flex;padding-top:8px}.checkout-grid[_ngcontent-%COMP%]   .row-importi-1[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-label.label-importo[_ngcontent-%COMP%]{margin:auto;display:table;font-size:22px}.checkout-grid[_ngcontent-%COMP%]   .row-importi-1[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-label.label-info[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;font-size:12px}.checkout-grid[_ngcontent-%COMP%]   .row-importi-2[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{height:100px;display:flex}.checkout-grid[_ngcontent-%COMP%]   .row-importi-2[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-label.label-importo[_ngcontent-%COMP%]{margin:auto;display:table;font-size:38px}.checkout-grid[_ngcontent-%COMP%]   .row-importi-2[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-label.label-info[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px}ion-segment.modo-incasso[_ngcontent-%COMP%]{--background: white !important;--color-checked: black !important}.segment-button-checked.ios[_ngcontent-%COMP%]::part(native), .segment-button-checked.md[_ngcontent-%COMP%]::part(native){color:#000}ion-input.input-price[_ngcontent-%COMP%]   .native-input.sc-ion-input-ios[_ngcontent-%COMP%]{font-size:xx-large}"]}),n})()}];let no=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[d.Bz.forChild(io),d.Bz]}),n})();var eo=c(46939);let to=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[_.ez,u.u5,r.Pc,no,eo.q]}),n})()}}]);