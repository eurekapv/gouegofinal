"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3617],{13617:(z,u,n)=>{n.r(u),n.d(u,{HistoryBookingPageModule:()=>B});var m=n(69808),y=n(52382),r=n(7706),p=n(2840);const A=(0,n(47423).fo)("Share",{web:()=>n.e(7907).then(n.bind(n,17907)).then(i=>new i.ShareWeb)});var I=n(13396),O=n(34021),d=n(42041),P=n(58698),T=n(75822),v=n(69214),t=n(31223),f=n(15174),x=n(5346);function b(i,a){if(1&i&&(t.TgZ(0,"ion-button",24),t._UZ(1,"ion-icon",25),t.qZA()),2&i){const o=t.oxw().$implicit;t.s9C("href","mailto:"+o._EMAIL_Location+"?subject=Prenotazione numero "+o.PROGRESSIVO)}}function N(i,a){1&i&&t._UZ(0,"ion-icon",29)}function C(i,a){1&i&&t._UZ(0,"ion-icon",30)}function E(i,a){if(1&i&&(t.TgZ(0,"ion-item",5),t.YNc(1,N,1,0,"ion-icon",26),t.TgZ(2,"ion-label",27),t._uU(3),t.qZA(),t.YNc(4,C,1,0,"ion-icon",28),t.qZA()),2&i){const o=t.oxw().index,e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=o),t.xp6(2),t.AsE("DATA ",o+1," DI ",e.myPrenotazione.PRENOTAZIONEPIANIFICAZIONE.length,""),t.xp6(1),t.Q6J("ngIf",o<e.myPrenotazione.PRENOTAZIONEPIANIFICAZIONE.length-1)}}function _(i,a){if(1&i){const o=t.EpF();t.TgZ(0,"swiper-slide")(1,"div",9)(2,"div",10)(3,"h6"),t._uU(4),t.qZA(),t._UZ(5,"qrcode",11),t.TgZ(6,"p"),t._UZ(7,"ion-icon",12),t._uU(8," Presenta il Qr-code o l'ID prenotazione all'ingresso "),t.qZA()(),t.TgZ(9,"div",13)(10,"ion-button",14),t.NdJ("click",function(){const l=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.onClickTrash(l))}),t._UZ(11,"ion-icon",15),t.qZA(),t.YNc(12,b,2,1,"ion-button",16),t.TgZ(13,"ion-button",17),t.NdJ("click",function(){const l=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.onShare(l))}),t._UZ(14,"ion-icon",18),t.qZA()(),t.TgZ(15,"ion-list",19),t.YNc(16,E,5,4,"ion-item",7),t.TgZ(17,"ion-item")(18,"ion-label")(19,"h2"),t._uU(20),t.qZA()(),t.TgZ(21,"ion-chip",0)(22,"i",20),t._UZ(23,"span",21),t.qZA()()(),t.TgZ(24,"ion-item")(25,"ion-label")(26,"h2"),t._uU(27),t.ALo(28,"titlecase"),t.ALo(29,"date"),t.qZA(),t.TgZ(30,"p",22),t._uU(31),t.ALo(32,"date"),t.ALo(33,"date"),t.qZA()(),t.TgZ(34,"ion-chip",0),t._uU(35),t.qZA()(),t.TgZ(36,"ion-item")(37,"ion-label")(38,"h2"),t._uU(39),t.qZA(),t.TgZ(40,"p"),t._uU(41),t.ALo(42,"titlecase"),t.qZA(),t.TgZ(43,"p"),t._uU(44),t.ALo(45,"titlecase"),t.qZA()(),t.TgZ(46,"ion-chip",0),t._uU(47),t._UZ(48,"ion-icon",23),t.qZA()()()()()}if(2&i){const o=a.$implicit,e=t.oxw();t.xp6(4),t.hij("ID: ",o.PROGRESSIVO,""),t.xp6(1),t.Q6J("qrdata",o.ID),t.xp6(7),t.Q6J("ngIf",o&&o._EMAIL_Location),t.xp6(4),t.Q6J("ngIf",e.myPrenotazione.PRENOTAZIONEPIANIFICAZIONE.length>1),t.xp6(4),t.Oqu(o._DENOMINAZIONE_Sport),t.xp6(3),t.Q6J("innerHTML",e.getIcon(o.IDSPORT),t.oJD),t.xp6(4),t.Oqu(t.lcZ(28,15,t.xi3(29,17,o.DATAORAINIZIO,"EEEE dd/LL/yyyy"))),t.xp6(4),t.AsE("dalle ",t.xi3(32,20,o.DATAORAINIZIO,"HH:mm")," alle ",t.xi3(33,23,o.DATAORAFINE,"HH:mm")," "),t.xp6(4),t.AsE(" ",o.DURATAORE," ",1==o.DURATAORE?"Ora":"Ore"," "),t.xp6(4),t.Oqu(o._DENOMINAZIONE_Campo),t.xp6(2),t.Oqu(t.lcZ(42,26,o._COMUNE_Location)),t.xp6(3),t.Oqu(t.lcZ(45,28,o._INDIRIZZO_Location)),t.xp6(3),t.hij(" ",o.NUMPARTECIPANTI," ")}}function S(i,a){if(1&i&&(t.TgZ(0,"ion-item",5)(1,"ion-label",1),t._uU(2," Pagato "),t.qZA(),t.TgZ(3,"ion-label",6),t._uU(4),t.ALo(5,"currency"),t.qZA()()),2&i){const o=t.oxw();t.xp6(4),t.hij(" ",t.xi3(5,1,o.myPrenotazione.INCASSATO,"EUR")," ")}}d.tq.use([d.W_,d.tl]);const M=[{path:"",component:(()=>{class i{constructor(o,e,s,l,c,g,h,D){this.router=o,this.navCtr=e,this.startService=s,this.toastCtr=l,this.docStructureService=c,this.loadingController=g,this.docstructrureService=h,this.alertController=D,this.myPrenotazione=new P.i,this.arPayments=[],this.sliderOpts={pagination:!0,slidesPerView:1,spaceBetween:0,initialSlide:0}}ngOnInit(){this.subStartConfig=this.startService.startConfig.subscribe(o=>{this.startConfig=o}),this.loadingController.create({spinner:"circular",message:"Caricamento",backdropDismiss:!0}).then(o=>{o.present(),this.router.paramMap.subscribe(e=>{e.has("historyId")?(this.historyId=e.get("historyId"),0!==this.historyId.length?this.requestByHistoryId(this.historyId).then(()=>{this.loadingController.dismiss()}).catch(s=>{this.loadingController.dismiss(),this.showMessage(s),this.onGoToBack()}):(this.showMessage("Informazioni prenotazioni errate"),this.onGoToBack())):(this.showMessage("Informazioni prenotazioni errate"),this.onGoToBack())})})}ngOnDestroy(){this.subStartConfig&&this.subStartConfig.unsubscribe()}requestByHistoryId(o){let e="",s="";return new Promise((c,g)=>{73==o.length?(e=o.substring(0,36),s=o.substring(37,73),36!==e.length||36!==s.length?g("HistoryId non valido"):(this.idPrenotazione=e,this.idPianificazione=s,this.startService.requestPrenotazioneById(this.idPrenotazione,2,!0).then(h=>(this.myPrenotazione=h,this.startService.requestAreaById(h.IDAREAOPERATIVA))).then(h=>{this.myArea=h,this.setPaymentFromArea(),c()}).catch(h=>{g(h)}))):g("HistoryId non valido")})}setPaymentFromArea(){}get backPathArray(){return this.startService.getUrlPageHistoryPersonal("list")}get backButtonHref(){let o="";return o=this.backPathArray.join("/").substring(1),o}onGoToBack(){this.navCtr.navigateBack(this.backPathArray)}getIcon(o){return this.startService.getSportIcon(o)}onShare(o){let s,l,c,e="";if(this.myPrenotazione&&o){for(const g of this.myArea.AREALINKS)if(g.TIPOURL==O.GV.home){e=g.REFERURL;break}e||(e=""),s=this.startConfig.getUrlLogo(),l=this.myPrenotazione.NOMINATIVO+"  ha prenotato il "+o.DATAORAINIZIO.toLocaleDateString()+" alle "+o.DATAORAINIZIO.toLocaleTimeString(),this.startConfig.companyName&&(l+=" presso "+this.startConfig.companyName),o._INDIRIZZO_Location&&(l+=" "+o._INDIRIZZO_Location),o._DENOMINAZIONE_Campo&&(l+=" (Campo: "+o._DENOMINAZIONE_Campo),o._DENOMINAZIONE_Sport&&(l+=", Attivit\xe0: "+o._DENOMINAZIONE_Sport+")"),c="Prenotazione "+o.PROGRESSIVO,A.canShare().then(g=>{g.value&&A.share({title:c,text:l,url:e})})}else this.showMessage("Errore nella condivisione")}onClickTrash(o){let e="",s=[];o&&(s=[{text:"Conferma",handler:()=>{this.execDeletePianificazione(o.ID)}},{text:"Annulla",role:"cancel"}],e="Stai effettuando la cancellazione della data del "+v.GA.formatDate(o.DATAORAINIZIO,"dd/MM/yyyy"),e+="\n",e+="Vuoi proseguire ?",this.startService.presentAlertMessage(e,"Sei sicuro ?",s))}execDeletePianificazione(o){this.loadingController.create({message:"Cancellazione...",spinner:"circular",backdropDismiss:!0}).then(e=>e.present()).then(()=>this.startService.requestDeletePianificazione(o)).then(e=>{this.loadingController.dismiss(),this.showMessage(e.message),e.result&&this.onGoToBack()}).catch(e=>{this.loadingController.dismiss(),this.showMessage(e.message)})}showMessage(o,e="alert"){"alert"==e?this.startService.presentAlertMessage(o):"toast"==e&&this.startService.presentToastMessage(o)}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(p.gz),t.Y36(r.SH),t.Y36(T.D),t.Y36(r.yF),t.Y36(I.l),t.Y36(r.HT),t.Y36(I.l),t.Y36(r.Br))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-history-booking"]],decls:29,vars:14,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["init","false","appSwiper","",3,"config"],[4,"ngFor","ngForOf"],["lines","full"],[2,"text-align","right"],["lines","full",4,"ngIf"],["expand","block","color","tertiary",3,"disabled"],[2,"width","100%"],["mode","md",1,"ion-text-center","div-qr"],[3,"qrdata"],["name","information-circle-outline","color","primary"],[1,"ion-text-center","div-btns"],["layout","icon-top","fill","clear","size","large",3,"click"],["name","trash-outline"],["fill","clear","size","large",3,"href",4,"ngIf"],["fill","clear","size","large",3,"click"],["name","share-social-outline"],["lines","none"],[1,"icon-sport"],[3,"innerHTML"],[2,"font-weight","700"],["name","person"],["fill","clear","size","large",3,"href"],["name","mail-outline"],["color","primary","class","no-margin-vertical","slot","start","name","chevron-back",4,"ngIf"],[1,"no-margin-vertical"],["color","primary","class","no-margin-vertical","slot","end","name","chevron-forward",4,"ngIf"],["color","primary","slot","start","name","chevron-back",1,"no-margin-vertical"],["color","primary","slot","end","name","chevron-forward",1,"no-margin-vertical"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Prenotazione "),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div")(8,"swiper-container",3),t.YNc(9,_,49,30,"swiper-slide",4),t.qZA(),t.TgZ(10,"ion-list")(11,"ion-list-header"),t._uU(12," PAGAMENTO "),t.qZA(),t.TgZ(13,"ion-item",5)(14,"ion-label",1),t._uU(15," Importo "),t.qZA(),t.TgZ(16,"ion-label",6),t._uU(17),t.ALo(18,"currency"),t.qZA()(),t.YNc(19,S,6,4,"ion-item",7),t.TgZ(20,"ion-item",5)(21,"ion-label",1),t._uU(22," Residuo "),t.qZA(),t.TgZ(23,"ion-label",6),t._uU(24),t.ALo(25,"currency"),t.qZA()()()()(),t.TgZ(26,"ion-footer")(27,"ion-button",8),t._uU(28),t.qZA()()),2&o&&(t.xp6(3),t.Q6J("defaultHref",e.backButtonHref),t.xp6(5),t.Q6J("config",e.sliderOpts),t.xp6(1),t.Q6J("ngForOf",e.myPrenotazione.PRENOTAZIONEPIANIFICAZIONE),t.xp6(8),t.hij(" ",t.xi3(18,8,e.myPrenotazione.TOTALE,"EUR")," "),t.xp6(2),t.Q6J("ngIf",e.myPrenotazione.TOTALE!=e.myPrenotazione.INCASSATO),t.xp6(5),t.hij(" ",t.xi3(25,11,e.myPrenotazione.RESIDUO,"EUR")," "),t.xp6(3),t.Q6J("disabled",!0),t.xp6(1),t.hij(" ",e.myPrenotazione.getCaptionStatePayment(!1)," "))},dependencies:[m.sg,m.O5,r.oU,r.YG,r.Sm,r.hM,r.W2,r.fr,r.Gu,r.gu,r.Ie,r.Q$,r.q_,r.yh,r.wd,r.sr,r.cs,f.V,x.T,m.rS,m.H9,m.uU],styles:["swiper-container[_ngcontent-%COMP%]{--swiper-pagination-bullet-inactive-color: var(--ion-color-step-200, #cccccc);--swiper-pagination-color: var(--ion-color-primary, #3880ff);--swiper-pagination-progressbar-bg-color: rgba(var(--ion-text-color-rgb, 0, 0, 0), .25);--swiper-scrollbar-bg-color: rgba(var(--ion-text-color-rgb, 0, 0, 0), .1);--swiper-scrollbar-drag-bg-color: rgba(var(--ion-text-color-rgb, 0, 0, 0), .5)}swiper-container[_ngcontent-%COMP%]   .swiper-pagination-bullets[_ngcontent-%COMP%]{bottom:initial;top:10px}.div-qr[_ngcontent-%COMP%]{background-color:var(--ion-color-light);padding-top:3vh;padding-bottom:3vh}.div-qr[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--ion-color-primary);font-weight:700}.div-qr[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:8px 0 0;color:#2b2b2b;padding-left:25px;padding-right:25px}.div-btns[_ngcontent-%COMP%]{border-bottom-style:solid;border-bottom-color:#e4e4e4;border-bottom-width:1px}.btn-pay[_ngcontent-%COMP%]{margin-top:4vh}i[_ngcontent-%COMP%]{font-size:30px}"]}),i})()}];let U=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(M),p.Bz]}),i})();var H=n(46939),R=n(24586);let B=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez,y.u5,r.Pc,U,f.N,H.q,R.D]}),i})()}}]);