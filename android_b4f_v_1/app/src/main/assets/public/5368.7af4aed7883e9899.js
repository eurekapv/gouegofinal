"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5368],{35368:(q,d,a)=>{a.r(d),a.d(d,{ListClubCardsPageModule:()=>b});var c=a(69808),h=a(52382),o=a(7706),u=a(2840),f=a(22648),T=a(75822),p=a(69129),m=a(28130),e=a(31223),g=a(15174);const _=["accordiontessere"];function C(t,r){1&t&&(e.TgZ(0,"ion-item",21)(1,"ion-label",7),e._uU(2," Non sono presenti tessere di questa tipologia "),e.qZA(),e._UZ(3,"ion-icon",22),e.qZA())}function v(t,r){if(1&t&&(e.TgZ(0,"div")(1,"ion-grid")(2,"ion-row")(3,"ion-col",25)(4,"ion-label"),e._uU(5," Scadenza "),e.qZA(),e.TgZ(6,"ion-badge"),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.TgZ(9,"ion-col",25),e._UZ(10,"qrcode",26),e.qZA()()()()),2&t){const i=e.oxw(2).$implicit;e.xp6(7),e.hij(" ",e.xi3(8,3,i.DATASCADENZA,"dd/LL/yyyy")," "),e.xp6(3),e.Q6J("qrdata",i.CODICE)("colorLight",i.isValid()?"#9fd18b":"#df413a")}}function A(t,r){if(1&t&&(e.TgZ(0,"div")(1,"ion-item",27)(2,"ion-label"),e._uU(3," Scadenza "),e.qZA(),e.TgZ(4,"ion-badge",28),e._uU(5),e.ALo(6,"date"),e.qZA()()()),2&t){const i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("color",i.isValid()?"success":"danger"),e.xp6(4),e.hij(" ",e.xi3(6,2,i.DATASCADENZA,"dd/LL/yyyy")," ")}}function Z(t,r){if(1&t&&(e.TgZ(0,"ion-card",24)(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-card-subtitle"),e._uU(5),e.qZA()(),e.TgZ(6,"ion-card-content"),e.YNc(7,v,11,6,"div",20),e.YNc(8,A,7,5,"div",20),e.qZA()()),2&t){const i=e.oxw().$implicit,s=e.oxw(2);e.Q6J("color",i.isValid()?"success":"danger"),e.xp6(3),e.Oqu(i.isValid()?"Tessera Valida":"Tessera Scaduta"),e.xp6(2),e.Oqu(i.CODICE),e.xp6(2),e.Q6J("ngIf",s.flagShowQRCode(i)),e.xp6(1),e.Q6J("ngIf",0==s.flagShowQRCode(i))}}function E(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Z,9,5,"ion-card",23),e.qZA()),2&t){const i=r.$implicit,s=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i.IDTIPOTESSERA==s.ID)}}function x(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"ion-item",30),e.NdJ("click",function(){const l=e.CHM(i).$implicit,U=e.oxw(3);return e.KtG(U.onDownloadTemplate(l))}),e._UZ(1,"ion-icon",31),e.TgZ(2,"ion-label",7),e._uU(3),e.qZA(),e._UZ(4,"ion-icon",32),e.qZA()}if(2&t){const i=r.$implicit;e.xp6(3),e.hij(" ",i.DESCRIZIONE," ")}}function S(t,r){if(1&t&&(e.TgZ(0,"ion-list")(1,"ion-list-header"),e._uU(2,"Moduli richieste"),e.qZA(),e.YNc(3,x,5,1,"ion-item",29),e.qZA()),2&t){const i=e.oxw().$implicit;e.xp6(3),e.Q6J("ngForOf",i.TIPITESSERETEMPLATE)}}function L(t,r){if(1&t&&(e.TgZ(0,"ion-accordion",12)(1,"ion-item",13)(2,"ion-label"),e._uU(3),e.qZA(),e._UZ(4,"ion-icon",14),e.qZA(),e.TgZ(5,"div",15)(6,"ion-grid")(7,"ion-row")(8,"ion-col",16),e.YNc(9,C,4,0,"ion-item",17),e.YNc(10,E,2,1,"div",18),e.qZA(),e.TgZ(11,"ion-col",19),e.YNc(12,S,4,1,"ion-list",20),e.qZA()()()()()),2&t){const i=r.$implicit,s=e.oxw();e.Q6J("value",i.ID),e.xp6(3),e.Oqu(i.DENOMINAZIONE),e.xp6(1),e.Q6J("name",i.FLAGCLUB?"home-outline":"planet-outline"),e.xp6(5),e.Q6J("ngIf",0==s.existListTessereUtente(i.ID)),e.xp6(1),e.Q6J("ngForOf",s.listTessereUtente),e.xp6(2),e.Q6J("ngIf",0!=i.TIPITESSERETEMPLATE.length)}}const I=[{path:"",component:(()=>{class t{constructor(i,s,n,l){this.fileService=i,this.loadingController=s,this.navController=n,this.startService=l,this.selectedArea=new f.u,this.onWaitingListTipoTessere(),this.onWaitingListTessereUtente()}ngOnInit(){this.isDesktop=this.startService.isDesktop,this.selectedArea=this.startService.areaSelectedValue,this.actualUtente=this.startService.activeUtenteDoc,this.actualUtente?this.requestAllData():this.onGoToBack()}get backPathArray(){return["/","appstart-home","tab-profile"]}get backButtonHref(){let i="";return i=this.backPathArray.join("/").substring(1),i}onGoToBack(){this.navController.navigateBack(this.backPathArray)}doRefresh(i){this.requestAllData(i)}requestAllData(i){this.refreshEvent=i,i?this.startService.requestListTipoTessere().then(()=>this.startService.requestListTessereUtente()).then(()=>{}).catch(s=>{this.startService.presentToastMessage(s),this.refreshEvent&&this.refreshEvent.target.complete()}):this.loadingController.create().then(s=>{this.loadingElement=s,this.loadingElement.present(),this.startService.requestListTipoTessere().then(()=>this.startService.requestListTessereUtente()).then(()=>{}).catch(n=>{this.startService.presentToastMessage(n),this.loadingElement&&this.loadingElement.dismiss()})})}onWaitingListTipoTessere(){this.listTipoTessere$=this.startService.listTipoTessere$,this.listTipoTessere$.subscribe(i=>{this.listTipoTessere=i,this.expandAccordion(),this.refreshEvent&&this.refreshEvent.target.complete(),this.loadingElement&&this.loadingElement.dismiss()})}onWaitingListTessereUtente(){this.listTessereUtente$=this.startService.listTessereUtente$,this.listTessereUtente$.subscribe(i=>{this.listTessereUtente=i})}filterListTessereUtente(i){let s=[];return this.listTessereUtente&&(s=this.listTessereUtente.filter(n=>n.IDTIPOTESSERA==i)),s}existListTessereUtente(i){let s=-1;return this.listTessereUtente&&(s=this.listTessereUtente.findIndex(n=>n.IDTIPOTESSERA==i)),-1!=s}flagShowQRCode(i){let s=!1;return i&&i.CODICE&&0!=i.CODICE.length&&(s=!0),s}expandAccordion(){const i=this.accordionGroup;let s=[];this.listTipoTessere&&(s=this.listTipoTessere.map(n=>n.ID),i&&(i.value=s))}onDownloadTemplate(i){i&&i.FILENAMEESTENSIONE&&i.FILENAMEESTENSIONE.length>0?this.loadingController.create({message:"Caricamento",spinner:"circular",backdropDismiss:!0}).then(s=>{s.present(),this.startService.requestDocumento(i.FILENAMEESTENSIONE).then(n=>{s.dismiss(),n?this.fileService.open(n):this.startService.showAlertMessage("File non visualizzabile")}).catch(n=>{s.dismiss(),p.M.consoleLog(n,"error"),this.startService.showAlertMessage("Impossibile scaricare il file")})}):this.startService.showAlertMessage("Errore, file non presente in archivio")}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(m.I),e.Y36(o.HT),e.Y36(o.SH),e.Y36(T.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-club-cards"]],viewQuery:function(i,s){if(1&i&&e.Gf(_,7),2&i){let n;e.iGM(n=e.CRH())&&(s.accordionGroup=n.first)}},decls:21,vars:3,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["sizeXs","12","sizeSm","12","sizeMd","12","sizeLg","6","offsetLg","3","sizeXl","6","offsetXl","3"],[1,"info"],["color","light","lines","none"],[1,"ion-text-wrap"],["name","information-circle-outline","color","primary"],[1,"ion-padding-horizontal",3,"multiple"],["accordiontessere",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","header","color","warning"],["slot","start",3,"name"],["slot","content",1,"ion-padding"],["size","12","sizeXs","12","size-sm","12","sizeMd","12","sizeXl","12","sizeXl","12"],["lines","none",4,"ngIf"],[4,"ngFor","ngForOf"],["size","12","size-xs","12","size-sm","12","size-md","6","size-lg","8","size-xl","8"],[4,"ngIf"],["lines","none"],["slot","start","name","id-card-outline"],[3,"color",4,"ngIf"],[3,"color"],["size","6","size-xs","12","size-sm","12"],[3,"qrdata","colorLight"],["lines","none",3,"color"],["slot","end"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start","name","document-attach-outline"],["slot","end","name","cloud-download-outline"]],template:function(i,s){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Tesseramenti"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-refresher",3),e.NdJ("ionRefresh",function(l){return s.doRefresh(l)}),e._UZ(8,"ion-refresher-content"),e.qZA(),e.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col",4)(12,"div",5)(13,"ion-item",6)(14,"ion-label")(15,"p",7),e._UZ(16,"ion-icon",8),e._uU(17," qui trovi l'elenco delle tessere associative disponibili al centro; puoi verificarne la scadenza ed eventualmente scaricare i modelli per la richiesta iscrizione "),e.qZA()()()(),e.TgZ(18,"ion-accordion-group",9,10),e.YNc(20,L,13,6,"ion-accordion",11),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("defaultHref",s.backButtonHref),e.xp6(15),e.Q6J("multiple",!0),e.xp6(2),e.Q6J("ngForOf",s.listTipoTessere))},dependencies:[c.sg,c.O5,o.We,o.eh,o.oU,o.yp,o.Sm,o.PM,o.FN,o.Zi,o.tO,o.Dq,o.wI,o.W2,o.jY,o.Gu,o.gu,o.Ie,o.Q$,o.q_,o.yh,o.nJ,o.Wo,o.Nd,o.wd,o.sr,o.cs,g.V,c.uU],styles:["div.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic;font-weight:600}div.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}"]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(I),u.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,h.u5,o.Pc,P,g.N]}),t})()}}]);