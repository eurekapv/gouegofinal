"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5823],{5823:(x,d,c)=>{c.r(d),c.d(d,{ListInvoicesAccountPageModule:()=>U});var l=c(69808),p=c(52382),s=c(7706),g=c(2840),m=c(75822),h=c(55351),u=c(69129),f=c(28130),e=c(31223),A=c(92058),v=c(34021);let T=(()=>{class i{transform(t){let n="";return n=v.Gs.decode(v.Dl,t),n}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"tipomasterdocumento",type:i,pure:!0}),i})();function P(i,a){1&i&&(e.TgZ(0,"div",12)(1,"ion-label"),e._uU(2,"Nessuna ricevuta"),e.qZA(),e.TgZ(3,"ion-label"),e._uU(4,"disponibile"),e.qZA()())}function I(i,a){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.NOTESSTAMPA)}}function S(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,O=e.oxw(2);return e.KtG(O.onClickElement(r))}),e._UZ(1,"ion-icon",15),e.TgZ(2,"ion-label")(3,"h3"),e._uU(4),e.ALo(5,"tipomasterdocumento"),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.YNc(9,I,2,1,"p",11),e.qZA(),e.TgZ(10,"ion-chip",16),e._uU(11),e.ALo(12,"currency"),e.qZA()()}if(2&i){const t=a.$implicit;e.xp6(4),e.AsE("",e.lcZ(5,5,t.TIPOLOGIA)," num. ",t.NUMEROSTAMPA,""),e.xp6(3),e.hij("Emessa il: ",e.xi3(8,7,t.DATADOCUMENTO,"dd/LL/yyyy"),""),e.xp6(2),e.Q6J("ngIf",t.NOTESSTAMPA&&0!==t.NOTESSTAMPA.length),e.xp6(2),e.Oqu(e.xi3(12,10,t.TOTDOCUMENTO,"EUR"))}}function Z(i,a){if(1&i&&(e.TgZ(0,"div")(1,"ion-list"),e.YNc(2,S,13,13,"ion-item",13),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.listRicevute)}}const M=[{path:"",component:(()=>{class i{constructor(t,n,o,r){this.loadingController=t,this.startService=n,this.navController=o,this.fileService=r,this.actualUtente=new h.o,this.listRicevute=[],this.yearSelected=new Date}ngOnInit(){this.actualUtente=this.startService.activeUtenteDoc,this.actualUtente?this.requestRicevute():this.onGoToBack()}get backPathArray(){return["/","appstart-home","tab-profile"]}get backButtonHref(){let t="";return t=this.backPathArray.join("/").substring(1),t}onGoToBack(){this.navController.navigateBack(this.backPathArray)}requestRicevute(t){let n;this.yearSelected&&(n=this.yearSelected.getFullYear(),t?this.startService.requestInvoices(this.actualUtente,n).then(o=>{this.listRicevute=o,t.target.complete()}).catch(o=>{u.M.consoleLog(o,"error"),this.startService.presentAlertMessage(o.message,"Errore di connessione"),t.target.complete()}):this.loadingController.create().then(o=>{o.present(),this.startService.requestInvoices(this.actualUtente,n).then(r=>{this.listRicevute=r,o.dismiss()}).catch(r=>{u.M.consoleLog(r,"error"),this.startService.presentAlertMessage(r.message,"Errore di connessione"),o.dismiss()})}))}onClickElement(t){this.loadingController.create({message:"Caricamento",spinner:"circular",backdropDismiss:!0}).then(n=>{n.present(),this.startService.downloadInvoice(t).then(o=>{n.dismiss(),o.result?this.startService.base64toBlob(o.code).then(r=>{this.startService.isDesktop?this.fileService.openDesktop(r):this.fileService.openMobile(r)}):this.startService.presentAlertMessage(o.message,"Scaricamento fallito")}).catch(o=>{n.dismiss(),u.M.consoleLog(o,"error"),this.startService.presentAlertMessage(o.message,"Errore di connessione")})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.HT),e.Y36(m.D),e.Y36(s.SH),e.Y36(f.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-invoices"]],decls:21,vars:4,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["slot","fixed",3,"ionRefresh"],["sizeXs","12","sizeSm","12","sizeMd","12","sizeLg","6","offsetLg","3","sizeXl","6","offsetXl","3"],[1,"info"],["color","light","lines","none"],[1,"ion-text-wrap"],["name","information-circle-outline","color","primary"],["textAlignmentRight","true","calendarMode","year","iconColor","primary","iconName","calendar-outline","itemLines","full","label","Periodo","title","Seleziona un Anno",3,"actualDate","actualDateChange"],["class","nofind-cnt reduce-height",4,"ngIf"],[4,"ngIf"],[1,"nofind-cnt","reduce-height"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["slot","start","color","","name","document-text-outline",1,"icon-left"],["color","primary","slot","end"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Ricevute Acquisti"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-refresher",3),e.NdJ("ionRefresh",function(r){return n.requestRicevute(r)}),e._UZ(8,"ion-refresher-content"),e.qZA(),e.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col",4)(12,"div",5)(13,"ion-item",6)(14,"ion-label")(15,"p",7),e._UZ(16,"ion-icon",8),e._uU(17," qui trovi l'elenco delle ricevute relative alle iscrizioni corsi ed alle prenotazioni presso il centro. "),e.qZA()()()(),e.TgZ(18,"app-dtinput",9),e.NdJ("actualDateChange",function(r){return n.yearSelected=r})("actualDateChange",function(){return n.requestRicevute()}),e.qZA(),e.YNc(19,P,5,0,"div",10),e.YNc(20,Z,3,1,"div",11),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("defaultHref",n.backButtonHref),e.xp6(15),e.Q6J("actualDate",n.yearSelected),e.xp6(1),e.Q6J("ngIf",0===n.listRicevute.length),e.xp6(1),e.Q6J("ngIf",n.listRicevute.length>0))},dependencies:[l.sg,l.O5,s.oU,s.Sm,s.hM,s.wI,s.W2,s.jY,s.Gu,s.gu,s.Ie,s.Q$,s.q_,s.nJ,s.Wo,s.Nd,s.wd,s.sr,s.cs,A.V,l.H9,l.uU,T],styles:["div.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic;font-weight:600}div.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}"]}),i})()}];let y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(M),g.Bz]}),i})();var C=c(24586),L=c(46939);let U=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.ez,p.u5,s.Pc,y,C.D,L.q]}),i})()}}]);