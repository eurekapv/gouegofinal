"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1618],{1618:(Z,M,g)=>{g.r(M),g.d(M,{AgendaTrainerPageModule:()=>Ze});var s=g(9808),h=g(4182),a=g(7026),C=g(2028),_=g(7181),f=g(7266),A=g(8223),I=g(2015),y=g(7304),x=g(9129),v=g(9442),d=g(5351),m=g(4021),l=g(6962),e=(g(9541),g(2096));function D(n,r){if(1&n&&e._UZ(0,"ion-icon",9),2&n){const t=e.oxw(2);e.Q6J("name",t.collapsed?"chevron-down-outline":"chevron-up-outline")}}function S(n,r){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e._UZ(3,"ion-radio",12),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(3);e.xp6(2),e.Oqu(t.DENOMINAZIONE),e.xp6(1),e.Q6J("disabled",i.readOnly)("value",t.ID)}}function N(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-radio-group",10),e.NdJ("ionChange",function(){return e.CHM(t),e.oxw(2).onChangeRadioGroup()})("ngModelChange",function(o){return e.CHM(t),e.oxw(2).myValutazione.IDLIVELLOFINALE=o}),e.YNc(1,S,4,3,"ion-item",11),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.myValutazione.IDLIVELLOFINALE),e.xp6(1),e.Q6J("ngForOf",t.listLivelli)}}function V(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list",1)(1,"ion-item-group",2)(2,"ion-item",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onChangeCollapse()}),e._UZ(3,"ion-icon",4),e.TgZ(4,"ion-label")(5,"h2"),e._uU(6),e.qZA(),e.TgZ(7,"p")(8,"ion-text",5),e._uU(9),e.qZA()(),e.TgZ(10,"p")(11,"ion-text",5),e._uU(12,"Conseguito:\xa0"),e.qZA(),e.TgZ(13,"ion-text",6),e._uU(14),e.qZA()()(),e.YNc(15,D,1,1,"ion-icon",7),e.qZA()(),e.YNc(16,N,2,2,"ion-radio-group",8),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("color",t.flagComplete?"success":"warning")("name",t.flagComplete?"checkmark-done-circle-outline":"alert-circle-outline"),e.xp6(3),e.Oqu(t.myValutazione.NOMINATIVO),e.xp6(3),e.hij("Attuale:\xa0",t.getLabelLevel(t.myValutazione.IDLIVELLOENTRATA),""),e.xp6(5),e.Oqu(t.getLabelLevel(t.myValutazione.IDLIVELLOFINALE)),e.xp6(1),e.Q6J("ngIf",!t.readOnly),e.xp6(1),e.Q6J("ngIf",!t.collapsed)}}g(427);let E=(()=>{class n{constructor(){this.readOnly=!1,this.listLivelli=[],this.onChoose=new e.vpe,this.collapsed=!0,this.flagComplete=!1}set valutazione(t){this.myValutazione=t,this.myValutazione&&(this.idSelectedLevel=this.myValutazione.IDLIVELLOFINALE?this.myValutazione.IDLIVELLOFINALE:this.myValutazione.IDLIVELLOENTRATA),this.setFlagComplete()}onChangeCollapse(){this.readOnly||(this.collapsed=!this.collapsed)}ngOnInit(){}setFlagComplete(){let t=!1;this.myValutazione&&this.myValutazione.IDLIVELLOFINALE&&0!=this.myValutazione.IDLIVELLOFINALE.length&&(t=!0),this.flagComplete=t}getLabelLevel(t){let o,i="non definito";return t&&(o=this.listLivelli.find(c=>c.ID==t),o&&(i=o.DENOMINAZIONE)),i}onChangeRadioGroup(){this.setFlagComplete(),this.onChoose.emit(this.myValutazione)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-level-setter"]],inputs:{readOnly:"readOnly",listLivelli:"listLivelli",valutazione:"valutazione"},outputs:{onChoose:"onChoose"},decls:1,vars:1,consts:[["class","ion-no-margin",4,"ngIf"],[1,"ion-no-margin"],["color","light"],["lines","none","color","light",3,"click"],["slot","start",3,"color","name"],["color","medium",2,"font-style","italic"],["color","medium",2,"font-style","italic","font-weight","bold"],["slot","end",3,"name",4,"ngIf"],[3,"ngModel","ionChange","ngModelChange",4,"ngIf"],["slot","end",3,"name"],[3,"ngModel","ionChange","ngModelChange"],[4,"ngFor","ngForOf"],["slot","start","color","success",3,"disabled","value"]],template:function(t,i){1&t&&e.YNc(0,V,17,7,"ion-list",0),2&t&&e.Q6J("ngIf",i.myValutazione)},directives:[s.O5,a.q_,a.Ub,a.Ie,a.gu,a.Q$,a.yW,a.se,a.QI,h.JJ,h.On,s.sg,a.B7,a.U5],styles:["ion-item-group[_ngcontent-%COMP%]{min-height:50px}"]}),n})();var w=g(1626);function J(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-segment",20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().selectedView=o})("ionChange",function(o){return e.CHM(t),e.oxw().onChangeSegment(o)}),e.TgZ(1,"ion-segment-button",21),e._UZ(2,"ion-icon",22),e.TgZ(3,"ion-label"),e._uU(4,"Valutazione"),e.qZA()(),e.TgZ(5,"ion-segment-button",21),e._UZ(6,"ion-icon",23),e.TgZ(7,"ion-label"),e._uU(8,"Livelli"),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.selectedView),e.xp6(1),e.Q6J("value",1),e.xp6(4),e.Q6J("value",2)}}function U(n,r){1&n&&(e.TgZ(0,"ion-fab",24)(1,"ion-fab-button",25),e._uU(2,"Prova"),e.qZA()())}function q(n,r){if(1&n&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",26),e.TgZ(2,"ion-label"),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.xi3(4,1,t.myCorso.ORAINIZIO,"HH:mm")," ")}}function F(n,r){if(1&n&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",27),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.hij("",t.myCorso._DENOMINAZIONE_Livello?t.myCorso._DENOMINAZIONE_Livello:"Tutti i Livelli"," ")}}function Q(n,r){if(1&n&&(e.TgZ(0,"ion-item"),e._UZ(1,"ion-icon",28),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.hij("",t.myCorso._DESCTOOLTIP_CategoriaEta?t.myCorso._DESCTOOLTIP_CategoriaEta:"Per tutte le et\xe0"," ")}}function k(n,r){if(1&n&&(e.TgZ(0,"ion-item",29),e._UZ(1,"ion-icon",30),e.TgZ(2,"ion-label"),e._uU(3),e.ALo(4,"targetSesso"),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,1,t.myCorso.TARGETSESSO))}}function R(n,r){1&n&&(e.TgZ(0,"ion-item",25)(1,"ion-label"),e._uU(2,"Scheda Bloccata. Contattare Segreteria"),e.qZA()())}function Y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-col")(1,"ion-icon",35),e.NdJ("click",function(){const c=e.CHM(t).index;return e.oxw(2).setStars(c+1)}),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("name",t?"star":"star-outline")}}function H(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"ion-item",29)(2,"ion-label",32),e._uU(3,"Soddisfazione Corso"),e.qZA(),e.TgZ(4,"ion-row"),e.YNc(5,Y,2,1,"ion-col",33),e.qZA()(),e.TgZ(6,"ion-item")(7,"ion-label",32),e._uU(8,"Considerazioni finali"),e.qZA(),e.TgZ(9,"ion-textarea",34),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().myCorsoValutazione.TESTOVALUTAZIONE=o}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.collStars),e.xp6(4),e.Q6J("disabled",!t.canUpdate)("readonly",!t.canUpdate)("ngModel",t.myCorsoValutazione.TESTOVALUTAZIONE)}}function B(n,r){1&n&&(e.TgZ(0,"div",37)(1,"ion-label"),e._uU(2,"Nessun iscritto al corso"),e.qZA()())}function G(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-level-setter",41),e.NdJ("onChoose",function(o){return e.CHM(t),e.oxw(3).onChangeLivello(o)}),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw(3);e.Q6J("readOnly",!i.canUpdate)("listLivelli",i.myListLivelli)("valutazione",t)}}function j(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"ion-item",29)(2,"ion-label")(3,"h6"),e._uU(4,"Partecipanti"),e.qZA()(),e.TgZ(5,"ion-chip",38),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).chooseLivelloFinale()}),e._UZ(6,"ion-icon",39),e.TgZ(7,"ion-label"),e._uU(8),e.qZA()()(),e.YNc(9,G,1,3,"app-level-setter",40),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(8),e.AsE("",t.myListValutazioni.length,"\xa0",1!=t.myListValutazioni.length?"Iscritti al corso":"Iscritto al corso",""),e.xp6(1),e.Q6J("ngForOf",t.myListValutazioni)}}function W(n,r){if(1&n&&(e.TgZ(0,"div",31),e.YNc(1,B,3,0,"div",36),e.YNc(2,j,10,3,"div",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showAlertNoIscritti),e.xp6(1),e.Q6J("ngIf",t.showListIscritti)}}function $(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"ion-footer")(1,"ion-button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e._uU(2," Conferma Valutazione "),e.qZA()()}}let L=(()=>{class n{constructor(t,i,o,c,p){this.modalCtrl=t,this.startService=i,this.actSheetController=o,this.toastController=c,this.alertController=p,this.canUpdate=!1,this.cardCollapsed=!0,this.myListLivelli=[],this.myListValutazioni=[],this.selectedView=1,this.showSegmentButton=!0,this.showAlertNoIscritti=!1,this.showListIscritti=!1,this.collStars=[],this.starIndex=0,this.maxNumberStars=5,this.setStars(0,!0)}set docCorsoValutazione(t){this.myCorsoValutazione=t,this.canUpdate=!1,t&&(t.FLAGBOZZA&&(this.canUpdate=!0),null!=t.VOTAZIONEFINALE&&(this.starIndex=t.VOTAZIONEFINALE),this.myListValutazioni=t.CORSOVALUTAZIONELIVELLO&&0!=t.CORSOVALUTAZIONELIVELLO.length?t.CORSOVALUTAZIONELIVELLO:[],this.setShowListaIscritti()),this.setStars(this.starIndex,!0)}set docCorso(t){this.myCorso=t}set collLivelli(t){this.myListLivelli=t,0==t.length&&(this.showSegmentButton=!1)}ngOnInit(){}setShowListaIscritti(){let t=!1;this.myListValutazioni&&0!=this.myListValutazioni.length&&(t=!0),this.showListIscritti=t,this.showAlertNoIscritti=!t}setStars(t,i=!1){if(this.canUpdate||i){if(0==this.collStars.length)for(let o=0;o<this.maxNumberStars;o++)this.collStars.push(o+1<=t);else for(let o=0;o<this.collStars.length;o++)this.collStars[o]=o+1<=t;this.starIndex=t}}chooseLivelloFinale(){let i,t=[];if(this.canUpdate&&this.myListLivelli&&0!=this.myListLivelli.length){for(const o of this.myListLivelli)i={text:o.DENOMINAZIONE,handler:()=>{this.applyLivelloFinaleForAll(o)}},t.push(i);i={text:"Annulla",icon:"arrow-undo-sharp",role:"cancel"},t.push(i),this.actSheetController.create({header:"Quale livello applichi a tutti i partecipanti ?",buttons:t}).then(o=>{o.present()})}}applyLivelloFinaleForAll(t){t&&this.myListValutazioni&&this.myListValutazioni.forEach(i=>{i.IDLIVELLOFINALE=t.ID})}onClickCollapsed(){this.cardCollapsed=!this.cardCollapsed}onChangeLivello(t){}onConfirm(){let i,t=[];this.canUpdate?(i={text:"Per modificarla in seguito",icon:"save-outline",handler:()=>{this.confirmSavingAs(!0)}},t.push(i),i={text:"In modo definitivo",icon:"document-lock-outline",handler:()=>{this.confirmSavingAs(!1)}},t.push(i),i={text:"Annulla",icon:"arrow-undo-sharp",role:"cancel"},t.push(i),this.actSheetController.create({header:"Come stai salvando la Scheda di Valutazione",buttons:t}).then(o=>{o.present()})):this.modalCtrl.dismiss()}confirmSavingAs(t){this.myCorsoValutazione.FLAGBOZZA=!!t,this.myCorsoValutazione.IDUTENTE=this.startService.actualUtente.ID,this.myCorsoValutazione.NOMINATIVO=this.startService.actualUtente.NOMINATIVO,this.myCorsoValutazione.VOTAZIONEFINALE=this.starIndex,this.startService.requestForSaveSchedaValutazioneCorso(this.myCorsoValutazione).then(i=>{i.result?(this.showMessage("Scheda salvata correttamente","toast"),this.modalCtrl.dismiss()):this.showMessage(i.message)}).catch(i=>{this.showMessage(i)})}onChangeSegment(t){}closeModal(){this.modalCtrl.dismiss()}showFabProva(){let t=!1;return this.myCorso&&this.myCorso.TIPO==m.oG.prova&&(t=!0),t}showMessage(t,i){"alert"==i?this.alertController.create({message:t,buttons:["OK"]}).then(c=>{c.present()}):this.toastController.create({message:t,duration:3e3}).then(o=>{o.present()})}getIcon(t){return this.startService.getSportIcon(t.IDSPORT)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.IN),e.Y36(l.D),e.Y36(a.BX),e.Y36(a.yF),e.Y36(a.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-valutazione-trainer"]],inputs:{docCorsoValutazione:"docCorsoValutazione",docCorso:"docCorso",collLivelli:"collLivelli"},decls:50,vars:26,consts:[["color","primary"],["slot","start"],["fill","clear",3,"click"],["name","arrow-back"],["mode","md"],[3,"ngModel","ngModelChange","ionChange",4,"ngIf"],[1,"ion-no-padding"],["vertical","top","horizontal","end",4,"ngIf"],["button","false","lines","none"],["slot","start",1,"icon-sport"],[3,"innerHTML"],[1,"ion-text-wrap"],["color","primary",1,"ion-text-wrap"],[2,"font-weight","bold"],["color","light",3,"click"],["slot","start",3,"name"],[4,"ngIf"],["lines","none",4,"ngIf"],["color","danger",4,"ngIf"],["class","contentExpand",4,"ngIf"],[3,"ngModel","ngModelChange","ionChange"],[3,"value"],["name","star-outline"],["name","bar-chart-outline"],["vertical","top","horizontal","end"],["color","danger"],["name","time-outline","slot","start"],["name","stats-chart-outline","slot","start"],["name","bookmark-outline","slot","start"],["lines","none"],["name","transgender-outline","slot","start"],[1,"contentExpand"],["position","stacked"],[4,"ngFor","ngForOf"],["autoGrow","true",1,"back-medium",3,"disabled","readonly","ngModel","ngModelChange"],["size","large",3,"name","click"],["class","nofind-cnt",4,"ngIf"],[1,"nofind-cnt"],["color","warning","slot","end",3,"click"],["name","people-circle-outline"],[3,"readOnly","listLivelli","valutazione","onChoose",4,"ngFor","ngForOf"],[3,"readOnly","listLivelli","valutazione","onChoose"],["color","tertiary","expand","block",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return i.closeModal()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Valutazione"),e.qZA()(),e.TgZ(7,"ion-toolbar",4),e.YNc(8,J,9,3,"ion-segment",5),e.qZA()(),e.TgZ(9,"ion-content")(10,"ion-card")(11,"ion-card-header",6),e.YNc(12,U,3,0,"ion-fab",7),e.TgZ(13,"ion-item",8)(14,"i",9),e._UZ(15,"span",10),e.qZA(),e.TgZ(16,"ion-label")(17,"h1",11),e._uU(18),e.qZA(),e.TgZ(19,"h3",11),e._uU(20),e.qZA()()(),e.TgZ(21,"ion-item",8)(22,"ion-label",12)(23,"p"),e._uU(24," da\xa0"),e.TgZ(25,"ion-text",13),e._uU(26),e.ALo(27,"titlecase"),e.ALo(28,"date"),e.qZA(),e._uU(29," a\xa0"),e.TgZ(30,"ion-text",13),e._uU(31),e.ALo(32,"titlecase"),e.ALo(33,"date"),e.qZA()()()()(),e.TgZ(34,"ion-card-content")(35,"ion-list",6)(36,"ion-item-group")(37,"ion-item-divider",14),e.NdJ("click",function(){return i.onClickCollapsed()}),e._UZ(38,"ion-icon",15),e.TgZ(39,"ion-label")(40,"h2"),e._uU(41,"Altre informazioni"),e.qZA()()()(),e.YNc(42,q,5,4,"ion-item",16),e.YNc(43,F,4,1,"ion-item",16),e.YNc(44,Q,4,1,"ion-item",16),e.YNc(45,k,5,3,"ion-item",17),e.qZA()()(),e.YNc(46,R,3,0,"ion-item",18),e.YNc(47,H,10,4,"div",19),e.YNc(48,W,3,2,"div",19),e.qZA(),e.YNc(49,$,3,0,"ion-footer",16)),2&t&&(e.xp6(8),e.Q6J("ngIf",i.showSegmentButton),e.xp6(4),e.Q6J("ngIf",i.showFabProva()),e.xp6(3),e.Q6J("innerHTML",i.getIcon(i.myCorso),e.oJD),e.xp6(3),e.Oqu(i.myCorso.DENOMINAZIONE),e.xp6(2),e.Oqu(i.myCorso._DENOMINAZIONE_Sport),e.xp6(6),e.hij("",e.lcZ(27,16,e.xi3(28,18,i.myCorso.DATAINIZIO,"EEE dd/MM/yyyy"))," "),e.xp6(5),e.hij("",e.lcZ(32,21,e.xi3(33,23,i.myCorso.DATAFINE,"EEE dd/MM/yyyy"))," "),e.xp6(7),e.Q6J("name",i.cardCollapsed?"chevron-down-outline":"chevron-up-outline"),e.xp6(4),e.Q6J("ngIf",!i.cardCollapsed),e.xp6(1),e.Q6J("ngIf",!i.cardCollapsed),e.xp6(1),e.Q6J("ngIf",!i.cardCollapsed),e.xp6(1),e.Q6J("ngIf",i.myCorso.TARGETSESSO&&!i.cardCollapsed),e.xp6(1),e.Q6J("ngIf",!i.canUpdate),e.xp6(1),e.Q6J("ngIf",1==i.selectedView),e.xp6(1),e.Q6J("ngIf",2==i.selectedView),e.xp6(1),e.Q6J("ngIf",i.canUpdate))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,s.O5,a.cJ,a.QI,h.JJ,h.On,a.GO,a.Q$,a.W2,a.PM,a.Zi,a.IJ,a.W4,a.Ie,a.yW,a.FN,a.q_,a.Ub,a.rH,a.Nd,s.sg,a.wI,a.g2,a.j9,a.hM,E,a.fr],pipes:[s.rS,s.uU,w.u],styles:[".back-medium[_ngcontent-%COMP%]{--background: var(--ion-color-light, #f4f5f8)}.contentExpand[_ngcontent-%COMP%]{height:100%}"]}),n})();var K=g(2058);function X(n,r){if(1&n&&(e.TgZ(0,"h5")(1,"span"),e._uU(2),e.ALo(3,"lowercase"),e.ALo(4,"date"),e.qZA(),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"date"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,2,e.xi3(4,4,t.myCorso.DATAFINE,"EEE")),"\xa0"),e.xp6(3),e.hij(" ",e.lcZ(6,7,e.xi3(7,9,t.myCorso.DATAFINE,"d MMM yy"))," ")}}function ee(n,r){1&n&&(e.TgZ(0,"ion-chip",15)(1,"span"),e._uU(2,"PROVA"),e.qZA()())}function te(n,r){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.labelSport)}}function ne(n,r){if(1&n&&(e.TgZ(0,"ion-chip",6)(1,"ion-label")(2,"h4")(3,"strong"),e._uU(4),e.qZA()()()()),2&n){const t=e.oxw(2);e.Q6J("color",t.colorItem()),e.xp6(4),e.Oqu(t.labelLivello)}}function ie(n,r){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.labelLocation)}}function oe(n,r){if(1&n&&(e.TgZ(0,"div",1)(1,"ion-grid",2)(2,"ion-row",3)(3,"ion-col",4)(4,"ion-label",5)(5,"h5")(6,"span"),e._uU(7),e.ALo(8,"lowercase"),e.ALo(9,"date"),e.qZA(),e._uU(10),e.ALo(11,"titlecase"),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"ion-chip",6)(14,"ion-label")(15,"h4"),e._uU(16),e.ALo(17,"date"),e.qZA()(),e._UZ(18,"ion-icon",7),e.qZA(),e.YNc(19,X,8,12,"h5",8),e.qZA()(),e.TgZ(20,"ion-col",9)(21,"ion-label")(22,"p",10),e.YNc(23,ee,3,0,"ion-chip",11),e.TgZ(24,"span")(25,"strong"),e._uU(26),e.qZA()()(),e.TgZ(27,"h4",12),e._uU(28),e.qZA(),e.YNc(29,te,2,1,"p",8),e.qZA()(),e.TgZ(30,"ion-col",13)(31,"ion-label"),e.YNc(32,ne,5,2,"ion-chip",14),e.YNc(33,ie,2,1,"h5",8),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(7),e.hij("",e.lcZ(8,12,e.xi3(9,14,t.myCorso.DATAINIZIO,"EEE")),"\xa0"),e.xp6(3),e.hij(" ",e.lcZ(11,17,e.xi3(12,19,t.myCorso.DATAINIZIO,"d MMM yy"))," "),e.xp6(3),e.Q6J("color",t.colorItem()),e.xp6(3),e.Oqu(e.xi3(17,22,t.myCorso.ORAINIZIO,"HH:mm")),e.xp6(3),e.Q6J("ngIf",1!=t.myCorso.NUMEROLEZIONI),e.xp6(1),e.Q6J("ngClass",t.getClassColorColumn()),e.xp6(3),e.Q6J("ngIf",t.valueTipoCorso==t.tipoCorso.prova),e.xp6(3),e.Oqu(t.labelSiglaCalendario),e.xp6(2),e.Oqu(t.labelDenominazioneCorso),e.xp6(1),e.Q6J("ngIf",0!=t.labelSport.length),e.xp6(3),e.Q6J("ngIf",0!=t.labelLivello.length),e.xp6(1),e.Q6J("ngIf",0!=t.labelLocation.length)}}function ae(n,r){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.TgZ(2,"span"),e._uU(3,"\xa0minuti"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.myPianificazione.getMinutiLezione()," ")}}function le(n,r){1&n&&(e.TgZ(0,"ion-chip",15)(1,"span"),e._uU(2,"PROVA"),e.qZA()())}function se(n,r){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.labelSport)}}function re(n,r){if(1&n&&(e.TgZ(0,"ion-chip",6)(1,"ion-label")(2,"h4")(3,"strong"),e._uU(4),e.qZA()()()()),2&n){const t=e.oxw(2);e.Q6J("color",t.colorItem()),e.xp6(4),e.Oqu(t.labelLivello)}}function ce(n,r){if(1&n&&(e.TgZ(0,"h5",10)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.labelLocation)}}function ge(n,r){if(1&n&&(e.TgZ(0,"p",10)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.labelCampo)}}function me(n,r){if(1&n&&(e.TgZ(0,"div",1)(1,"ion-grid",2)(2,"ion-row",3)(3,"ion-col",4)(4,"ion-label",5)(5,"h5")(6,"span"),e._uU(7),e.ALo(8,"lowercase"),e.ALo(9,"date"),e.qZA(),e._uU(10),e.ALo(11,"titlecase"),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"ion-chip",6)(14,"ion-label")(15,"h4"),e._uU(16),e.ALo(17,"date"),e.qZA()(),e._UZ(18,"ion-icon",7),e.qZA(),e.YNc(19,ae,4,1,"h5",8),e.qZA()(),e.TgZ(20,"ion-col",9)(21,"ion-label")(22,"p",10),e.YNc(23,le,3,0,"ion-chip",11),e.TgZ(24,"span")(25,"strong"),e._uU(26),e.qZA()()(),e.TgZ(27,"h4",12),e._uU(28),e.qZA(),e.YNc(29,se,2,1,"p",8),e.qZA()(),e.TgZ(30,"ion-col",13)(31,"ion-label"),e.YNc(32,re,5,2,"ion-chip",14),e.YNc(33,ce,3,1,"h5",16),e.YNc(34,ge,3,1,"p",16),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(7),e.hij("",e.lcZ(8,13,e.xi3(9,15,t.myPianificazione.DATAORAINIZIO,"EEE")),"\xa0"),e.xp6(3),e.hij(" ",e.lcZ(11,18,e.xi3(12,20,t.myPianificazione.DATAORAINIZIO,"d MMM yy"))," "),e.xp6(3),e.Q6J("color",t.colorItem()),e.xp6(3),e.Oqu(e.xi3(17,23,t.myPianificazione.DATAORAINIZIO,"HH:mm")),e.xp6(3),e.Q6J("ngIf",0!=t.myPianificazione.getMinutiLezione()),e.xp6(1),e.Q6J("ngClass",t.getClassColorColumn()),e.xp6(3),e.Q6J("ngIf",t.valueTipoCorso==t.tipoCorso.prova),e.xp6(3),e.Oqu(t.labelSiglaCalendario),e.xp6(2),e.Oqu(t.labelDenominazioneCorso),e.xp6(1),e.Q6J("ngIf",0!=t.labelSport.length),e.xp6(3),e.Q6J("ngIf",0!=t.labelLivello.length),e.xp6(1),e.Q6J("ngIf",0!=t.labelLocation.length),e.xp6(1),e.Q6J("ngIf",0!=t.labelCampo.length)}}let _e=(()=>{class n{constructor(){this.typeList="corsi",this.tipoCorso=m.oG,this.labelSiglaCalendario="",this.labelDenominazioneCorso="",this.labelLocation="",this.labelLivello="",this.labelCampo="",this.labelSport="",this.click=new e.vpe}set myDocument(t){t instanceof I._?(this.myCorso=t,this.typeList="corsi"):t instanceof v.N&&(this.myPianificazione=t,this.typeList="pianificazioni"),this.setLabel()}ngOnInit(){}onClick(){this.click.emit()}colorItem(){let t,i="success";switch(t=m.cJ.PASSATO,this.typeList){case"corsi":this.myCorso&&(t=this.myCorso.tempoCorso());break;case"pianificazioni":this.myPianificazione&&(t=this.myPianificazione.tempoCorso());break;default:t=m.cJ.PASSATO}switch(t){case m.cJ.FUTURO:i="warning";break;case m.cJ.IN_CORSO:i="success";break;case m.cJ.PASSATO:i="danger"}return i}getClassColorColumn(){let t;switch(t=m.cJ.PASSATO,this.typeList){case"corsi":this.myCorso&&(t=this.myCorso.tempoCorso());break;case"pianificazioni":this.myPianificazione&&(t=this.myPianificazione.tempoCorso());break;default:t=m.cJ.PASSATO}return t}setLabel(){let t="";this.labelSiglaCalendario="",this.labelDenominazioneCorso="",this.valueTipoCorso=null,this.labelLocation="",this.labelLivello="",this.labelCampo="",this.labelSport="",this.myCorso?(t="SIGLACALENDARIO",this.labelSiglaCalendario=this.nullValue(this.myCorso[t]),t="DENOMINAZIONE",this.labelDenominazioneCorso=this.nullValue(this.myCorso[t]),t="TIPO",this.valueTipoCorso=this.myCorso[t],t="_DENOMINAZIONE_Location",this.labelLocation=this.nullValue(this.myCorso[t]),t="_DENOMINAZIONE_Livello",this.labelLivello=this.nullValue(this.myCorso[t]),t="_DENOMINAZIONE_Sport",this.labelSport=this.nullValue(this.myCorso[t])):this.myPianificazione&&(this.labelSiglaCalendario=this.nullValue(this.myPianificazione.getDocPropertyInRepository(["IDCORSO"],"SIGLACALENDARIO")),t="_DENOMINAZIONE_Corso",this.labelDenominazioneCorso=this.nullValue(this.myPianificazione[t]),this.valueTipoCorso=this.myPianificazione.getDocPropertyInRepository(["IDCORSO"],"TIPO"),t="_DENOMINAZIONE_Location",this.labelLocation=this.nullValue(this.myPianificazione[t]),this.labelLivello=this.nullValue(this.myPianificazione.getDocPropertyInRepository(["IDCORSO","IDLIVELLOENTRATA"],"DENOMINAZIONE")),this.labelSport=this.nullValue(this.myPianificazione.getDocPropertyInRepository(["IDCORSO","IDSPORT"],"DENOMINAZIONE")),t="_DENOMINAZIONE_Campo",this.labelCampo=this.nullValue(this.myPianificazione[t]))}nullValue(t){return t||""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-item-agenda-trainer"]],inputs:{myDocument:"myDocument"},outputs:{click:"click"},decls:2,vars:2,consts:[["class","custom-element",4,"ngIf"],[1,"custom-element"],[1,"ion-no-padding"],[1,"ion-align-items-center"],["size","3",1,"ion-no-padding","col-left"],[1,"center-label"],[3,"color"],["name","time-outline"],[4,"ngIf"],["size","5",1,"ion-no-padding","col-center",3,"ngClass"],[1,"text-truncate"],["color","warning",4,"ngIf"],[1,"ion-text-wrap"],["size","4",1,"ion-no-padding","col-right"],[3,"color",4,"ngIf"],["color","warning"],["class","text-truncate",4,"ngIf"]],template:function(t,i){1&t&&(e.YNc(0,oe,34,25,"div",0),e.YNc(1,me,35,26,"div",0)),2&t&&(e.Q6J("ngIf","corsi"==i.typeList),e.xp6(1),e.Q6J("ngIf","pianificazioni"==i.typeList))},directives:[s.O5,a.jY,a.Nd,a.wI,a.Q$,a.hM,a.gu,s.mk],pipes:[s.i8,s.uU,s.rS],styles:["h2[_ngcontent-%COMP%]{font-size:16px}h3[_ngcontent-%COMP%]{color:gray;font-size:12px;font-weight:480}h4[_ngcontent-%COMP%]{font-size:14px}div.custom-element[_ngcontent-%COMP%]{cursor:pointer;padding:8px 5px;border-bottom:1px;border-bottom-style:solid;border-bottom-color:#b5b5b5}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]{padding-right:0}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:center}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:large}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:medium}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:medium}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-left[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]{padding-left:0}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;color:#727272}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:large}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:medium}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center.undef[_ngcontent-%COMP%]{border-left-color:var(--ion-color-primary)}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center.concluso[_ngcontent-%COMP%]{border-left-color:var(--ion-color-danger)}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center.futuro[_ngcontent-%COMP%]{border-left-color:var(--ion-color-warning)}div.custom-element[_ngcontent-%COMP%]   ion-col.col-center.incorso[_ngcontent-%COMP%]{border-left-color:var(--ion-color-success)}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]{text-align:center;padding-left:0}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:x-small;color:#727272}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:large}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:medium}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:x-small}div.custom-element[_ngcontent-%COMP%]   ion-col.col-right[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:xx-small}div.custom-element[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}div.custom-element[_ngcontent-%COMP%]   ion-badge.badge-icon-only[_ngcontent-%COMP%]{font-size:30px}div.custom-element[_ngcontent-%COMP%]   ion-badge.badge-icon-only[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-top:4px}"]}),n})();function de(n,r){if(1&n&&(e.TgZ(0,"ion-segment-button",5)(1,"ion-label"),e._uU(2),e.qZA()()),2&n){const t=r.$implicit;e.Q6J("value",t),e.xp6(2),e.Oqu(t.title)}}function ue(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-item-agenda-trainer",19),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(3).onClickImpegno(c)}),e.qZA()}2&n&&e.Q6J("myDocument",r.$implicit)}function pe(n,r){if(1&n&&(e.TgZ(0,"div",17)(1,"ion-list",17),e.YNc(2,ue,1,1,"app-item-agenda-trainer",18),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.myListPianificazioni)}}function he(n,r){1&n&&(e.TgZ(0,"div",20)(1,"ion-label"),e._uU(2,"Nessun corso trovato"),e.qZA()())}function Ce(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"ion-segment",12),e.NdJ("ngModelChange",function(){return e.CHM(t),e.oxw().requestImpegni()})("ngModelChange",function(o){return e.CHM(t),e.oxw().impegniSelectedMode=o}),e.YNc(2,de,3,2,"ion-segment-button",13),e.qZA(),e.TgZ(3,"app-dtinput",14),e.NdJ("actualDateChange",function(o){return e.CHM(t),e.oxw().selectedDate=o})("actualDateChange",function(){return e.CHM(t),e.oxw().requestImpegni()}),e.qZA(),e.YNc(4,pe,3,1,"div",15),e.YNc(5,he,3,0,"div",16),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.impegniSelectedMode),e.xp6(1),e.Q6J("ngForOf",t.impegniModes),e.xp6(1),e.Q6J("title",t.titleModalImpegniDate)("label",t.labelModalImpegniDate)("calendarMode",t.calendarModeImpegniDate)("actualDate",t.selectedDate),e.xp6(1),e.Q6J("ngIf",t.myListPianificazioni&&0!=t.myListPianificazioni.length),e.xp6(1),e.Q6J("ngIf",!t.myListPianificazioni||0==t.myListPianificazioni.length)}}function fe(n,r){if(1&n&&(e.TgZ(0,"ion-segment-button",5)(1,"ion-label"),e._uU(2),e.qZA()()),2&n){const t=r.$implicit;e.Q6J("value",t),e.xp6(2),e.Oqu(t.title)}}function Te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-item-agenda-trainer",19),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(3).onClickCorso(c)}),e.qZA()}2&n&&e.Q6J("myDocument",r.$implicit)}function Oe(n,r){if(1&n&&(e.TgZ(0,"div",17)(1,"ion-list",17),e.YNc(2,Te,1,1,"app-item-agenda-trainer",18),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.myListCorsi)}}function Me(n,r){1&n&&(e.TgZ(0,"div",20)(1,"ion-label"),e._uU(2,"Nessun corso trovato"),e.qZA()())}function Ae(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"ion-segment",12),e.NdJ("ngModelChange",function(){return e.CHM(t),e.oxw().requestTimeCorsi()})("ngModelChange",function(o){return e.CHM(t),e.oxw().valutazioniSelectedMode=o}),e.YNc(2,fe,3,2,"ion-segment-button",13),e.qZA(),e.YNc(3,Oe,3,1,"div",15),e.YNc(4,Me,3,0,"div",16),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.valutazioniSelectedMode),e.xp6(1),e.Q6J("ngForOf",t.valutazioniModes),e.xp6(1),e.Q6J("ngIf",t.myListCorsi&&0!=t.myListCorsi.length),e.xp6(1),e.Q6J("ngIf",!t.myListCorsi||0==t.myListCorsi.length)}}var T=(()=>{return(n=T||(T={})).impegni="impegni",n.corsi="corsi",T;var n})();const xe=[{path:"",component:(()=>{class n{constructor(t,i,o,c,p,O,Le,be){this.startService=t,this.navController=i,this.loadingController=o,this.toastController=c,this.alertController=p,this.modalController=O,this.docStructureService=Le,this.actionController=be,this.lingua=m.SQ.italiano,this.utente=new d.oD,this.myListPianificazioni=[],this.selectedDate=new Date,this.impegniModes=[{value:m.p2.giorno,title:"Giorno"},{value:m.p2.settimana,title:"Settimana"},{value:m.p2.mese,title:"Mese"}],this.impegniSelectedMode=this.impegniModes[0],this.valutazioniModes=[{value:m.Rd.passati,title:"Conclusi"},{value:m.Rd.attivi,title:"In Esecuzione"},{value:m.Rd.futuri,title:"Futuri"}],this.valutazioniSelectedMode=this.valutazioniModes[1],this.PageRangeSearch=m.p2,this.collapsedFilterCorsi=!0,this.myListCorsi=[],this.showFilter=!0,this.PageView=T,this.selectedView=T.impegni,this.listenChangeListCorsi()}ngOnInit(){this.utente=this.startService.actualUtente,this.utente.isTrainer||this.utente.isAssistenteTrainer?this.requestImpegni():this.navController.navigateRoot("/home")}ngOnDestroy(){this.subListenCorsi&&this.subListenCorsi.unsubscribe()}get titleModalImpegniDate(){let t="";if(this.impegniSelectedMode)switch(this.impegniSelectedMode.value){case m.p2.giorno:t="Impegni Giorno";break;case m.p2.settimana:t="Impegni Settimana";break;case m.p2.mese:t="Impegni Mensili"}return t}get labelModalImpegniDate(){let t="";if(this.impegniSelectedMode)switch(this.impegniSelectedMode.value){case m.p2.giorno:case m.p2.settimana:t="del";break;case m.p2.mese:t="di"}return t}get calendarModeImpegniDate(){let t=_.CV.date;if(this.impegniSelectedMode)switch(this.impegniSelectedMode.value){case m.p2.giorno:case m.p2.settimana:t=_.CV.date;break;case m.p2.mese:t=_.CV.monthYear;break;default:t=_.CV.date}return t}prepareDateForSearchImpegni(){let t,i,o;switch(this.impegniSelectedMode.value){case m.p2.giorno:t=this.selectedDate,i=this.selectedDate;break;case m.p2.settimana:t=_.GA.getStartEndDate(this.selectedDate,"week","start"),i=_.GA.getStartEndDate(this.selectedDate,"week","end");break;case m.p2.mese:t=_.GA.getStartEndDate(this.selectedDate,"month","start"),i=_.GA.getStartEndDate(this.selectedDate,"month","end")}return o={startDate:t,endDate:i},o}requestImpegni(t){let i;this.loadingController.create({message:"Caricamento...",spinner:"circular",backdropDismiss:!0}).then(o=>{o.present(),i=this.prepareDateForSearchImpegni(),this.startService.requestImpegniTrainer(this.utente.ID,i.startDate,i.endDate).then(c=>{this.docStructureService.getRelMultiDocCollection(c,[["IDCORSO","IDLIVELLOENTRATA"],["IDCORSO","IDSPORT"],["IDCORSO"]]).then(()=>{this.myListPianificazioni=c,o.dismiss(),t&&t.target&&t.target.complete()}).catch(()=>{this.myListPianificazioni=c,o.dismiss(),t&&t.target&&t.target.complete()})}).catch(c=>{t&&t.target&&t.target.complete(),o.dismiss(),x.M.consoleLog(c,"error"),this.startService.presentToastMessage("Errore di connessione")})})}requestTimeCorsi(t){this.loadingController.create({message:"Caricamento...",spinner:"circular",backdropDismiss:!0}).then(i=>{t&&t.target&&t.target.complete(),this.myLoadingForCorsi=i,this.myLoadingForCorsi.present(),this.startService.requestTimeTrainerCourse(this.utente.ID,this.valutazioniSelectedMode.value)})}onClickImpegno(t){let i,p,o=!1,c=new Date;t&&(i=t.getDocInRepository(["IDCORSO"]),i&&(p=_.GA.mergeDateAndTime(i.DATAFINE,i.ORAINIZIO),c>=p&&(o=!0))),o?this.askPresenzeValutazioni(t):this.showSchedaPresenze(t.ID)}showSchedaPresenze(t){t&&0!=t.length&&this.navController.navigateForward("/agenda-trainer/"+t)}_forValutazioneRequestCorso(t){let i,o,c;return new Promise(p=>{t?t instanceof I._?p(t):t instanceof v.N?(i=new I._(!0),i.ID=t.IDCORSO,c=new f.dR,c.active=!0,o=new f.Kl,o.decode=c,this.docStructureService.requestNew(i,o).then(O=>{p(O&&0!=O.length?O[0]:null)}).catch(O=>{x.M.consoleLog(O),p(null)})):p(null):p(null)})}onClickCorso(t){this.showSchedaValutazioni(t)}showSchedaValutazioni(t){t&&this.loadingController.create({message:"Caricamento...",spinner:"circular",backdropDismiss:!0}).then(i=>{i.present(),this._forValutazioneRequestCorso(t).then(o=>{o?this._requestAndOpenValutazione(o,i):(i.dismiss(),this.startService.presentToastMessage("Informazioni corso non trovate"))})})}_requestAndOpenValutazione(t,i){t?this.startService.requestSchedaValutazioneCorso(t.ID).then(o=>{this.startService.requestLivelliForSport(t.IDSPORT).then(c=>{i.dismiss(),this._openModaleSchedaValutazione(o,t,c)}).catch(c=>{i.dismiss(),x.M.consoleLog(c),this.startService.presentToastMessage("Recupero Livelli fallito")})}).catch(o=>{i.dismiss(),this.startService.presentAlertMessage("Si \xe8 verificato un errore"),x.M.consoleLog(o)}):i.dismiss()}_openModaleSchedaValutazione(t,i,o){t&&i&&this.modalController.create({component:L,componentProps:{docCorsoValutazione:t,docCorso:i,collLivelli:o}}).then(c=>{c.present()})}onChangeCollapseFilterCorsi(){this.collapsedFilterCorsi=!this.collapsedFilterCorsi}onChangePageRangeSearch(t){this.requestImpegni()}getItemParamsFromPianificazione(t){return y.g.getParamsPianificazioneCorso(t)}getIconSport(t){return this.startService.getSportIcon(t)}getColorIconCorso(t){let i="primary",o=new Date(_.GA.formatDateISO(new Date));return t&&(i=t.DATAFINE<o?"danger":t.DATAINIZIO>o?"warning":"success"),i}onScroll(t){t.detail.currentY<5?this.showFilter=!0:t.detail.deltaY>20?this.showFilter=!1:t.detail.deltaY<-20&&(this.showFilter=!0)}doRefresh(t){this.selectedView==this.PageView.impegni?this.requestImpegni(t):this.selectedView==this.PageView.corsi&&this.requestTimeCorsi(t)}onChangeSegment(t){switch(this.selectedView){case T.corsi:this.requestTimeCorsi();break;case T.impegni:this.requestImpegni()}}listenChangeListCorsi(){this.subListenCorsi=this.startService.listCorsiTrainer.subscribe(t=>{this.myListCorsi=t,this.myLoadingForCorsi&&this.myLoadingForCorsi.dismiss()},t=>{this.myListCorsi=[],this.myLoadingForCorsi&&this.myLoadingForCorsi.dismiss()})}askPresenzeValutazioni(t){let i=this;t&&this.actionController.create({header:"Cosa vuoi fare",buttons:[{icon:"bar-chart-outline",text:"Valutazioni",handler:()=>{i.showSchedaValutazioni(t)}},{icon:"people-circle-outline",text:"Presenze",handler:()=>{i.showSchedaPresenze(t.ID)}},{icon:"arrow-undo-outline",text:"Annulla",role:"cancel"}]}).then(o=>{o.present()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.D),e.Y36(a.SH),e.Y36(a.HT),e.Y36(a.yF),e.Y36(a.Br),e.Y36(a.IN),e.Y36(A.l),e.Y36(a.BX))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-agenda-trainer"]],decls:21,vars:5,consts:[["color","primary"],["slot","start"],["defaultHref","/home"],["mode","md"],[3,"ngModel","ngModelChange","ionChange"],[3,"value"],["name","today-outline"],["name","bar-chart-outline"],["scrollEvents","",3,"ionScroll"],["slot","fixed",3,"ionRefresh"],["class","contentExpand",4,"ngIf"],[1,"contentExpand"],["mode","ios","scrollable","true",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["itemColor","light","itemLines","full","iconName","calendar-outline","iconColor","primary","maskFormat","dddd dd/MM/yyyy",3,"title","label","calendarMode","actualDate","actualDateChange"],["class","ion-no-padding",4,"ngIf"],["class","nofind-cnt",4,"ngIf"],[1,"ion-no-padding"],[3,"myDocument","click",4,"ngFor","ngForOf"],[3,"myDocument","click"],[1,"nofind-cnt"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Agenda Impegni"),e.qZA()(),e.TgZ(6,"ion-toolbar",3)(7,"ion-segment",4),e.NdJ("ngModelChange",function(c){return i.selectedView=c})("ionChange",function(c){return i.onChangeSegment(c)}),e.TgZ(8,"ion-segment-button",5),e._UZ(9,"ion-icon",6),e.TgZ(10,"ion-label"),e._uU(11,"Impegni"),e.qZA()(),e.TgZ(12,"ion-segment-button",5),e._UZ(13,"ion-icon",7),e.TgZ(14,"ion-label"),e._uU(15,"Valutazioni"),e.qZA()()()()(),e.TgZ(16,"ion-content",8),e.NdJ("ionScroll",function(c){return i.onScroll(c)}),e.TgZ(17,"ion-refresher",9),e.NdJ("ionRefresh",function(c){return i.doRefresh(c)}),e._UZ(18,"ion-refresher-content"),e.qZA(),e.YNc(19,Ce,6,8,"div",10),e.YNc(20,Ae,5,4,"div",10),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngModel",i.selectedView),e.xp6(1),e.Q6J("value",i.PageView.impegni),e.xp6(4),e.Q6J("value",i.PageView.corsi),e.xp6(7),e.Q6J("ngIf",i.selectedView==i.PageView.impegni),e.xp6(1),e.Q6J("ngIf",i.selectedView==i.PageView.corsi))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.cJ,a.QI,h.JJ,h.On,a.GO,a.gu,a.Q$,a.W2,a.nJ,a.Wo,s.O5,s.sg,K.V,a.q_,_e],styles:[".contentExpand[_ngcontent-%COMP%]{height:100%}ion-select[_ngcontent-%COMP%]::part(icon){display:none!important}.mb-8[_ngcontent-%COMP%]{margin-bottom:8px}ion-segment[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}"]}),n})()},{path:":pianificazioneCorsoId",loadChildren:()=>g.e(9042).then(g.bind(g,9042)).then(n=>n.AgendaTrainerDetailPageModule)}];let Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[C.Bz.forChild(xe)],C.Bz]}),n})();var b=g(933),z=g(4586);const ve=[{path:"",component:L}];let Pe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[C.Bz.forChild(ve)],C.Bz]}),n})(),ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez,h.u5,a.Pc,Pe,z.D,b.q]]}),n})(),Ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez,h.u5,a.Pc,Ie,b.q,z.D,ye]]}),n})()},2058:(Z,M,g)=>{g.d(M,{V:()=>v});var s=g(2096),h=g(7587),a=g(7181),C=g(9129),_=g(7026),f=g(9808);function A(d,m){if(1&d&&s._UZ(0,"ion-icon",5),2&d){const l=s.oxw();s.Q6J("icon",l._iconName)("slot",l._iconSlot)("color",l._iconColor)}}function I(d,m){if(1&d&&(s.TgZ(0,"ion-label",6),s._uU(1),s.qZA()),2&d){const l=s.oxw();s.xp6(1),s.hij("",l._label," ")}}function y(d,m){if(1&d&&(s.TgZ(0,"ion-toolbar",10)(1,"ion-title",11),s._uU(2),s.qZA()()),2&d){const l=s.oxw(2);s.xp6(2),s.Oqu(l._title)}}function x(d,m){if(1&d){const l=s.EpF();s.TgZ(0,"ion-content"),s.YNc(1,y,3,1,"ion-toolbar",7),s.TgZ(2,"ion-datetime",8,9),s.NdJ("ionChange",function(){s.CHM(l);const e=s.MAs(3);return s.oxw().dateChanged(e.value)}),s.qZA()()}if(2&d){const l=s.oxw();s.xp6(1),s.Q6J("ngIf",l._showCalendarTitle),s.xp6(1),s.Q6J("presentation",l._calendarMode)("readonly",l._readonly)("value",l.formattedDateTimeString)("max",l._isoMaxDate)}}let v=(()=>{class d{constructor(){this.actualDateChange=new s.vpe,this._itemColor="",this._itemLines="",this._itemDetail=!1,this._iconName="",this._iconColor="",this._iconSlot="",this._label="",this._slotText="",this._title="",this._isoMaxDate="2099-12-31T23:59:59",this._componentId="",this._componentId=(new h.kK).newID(),this._itemDetail=!1,this._itemLines="full",this._iconColor="primary",this._iconSlot="start",this._maskFormat="dd/MM/yyyy",this._calendarMode=a.CV.date,this._readonly=!1,this._showCalendarTitle=!1,this._slotText="",this.initMaskFromMode()}set title(l){this._title=l,0!=l.length&&(this._showCalendarTitle=!0)}set itemLines(l){this._itemLines=l}set itemColor(l){this._itemColor=l}set itemDetail(l){this._itemDetail=l}set label(l){this._label=l}set textAlignmentRight(l){this._slotText=l?"end":""}set iconName(l){this._iconName=l}set iconColor(l){this._iconColor=l}set iconSlot(l){this._iconSlot=l}set actualDate(l){this._actualDate=l}set maskFormat(l){this._maskFormat=l}set calendarMode(l){this._calendarMode=l,this.initMaskFromMode()}set readonly(l){this._readonly=l}set isoMaxDate(l){this._isoMaxDate=l}ngOnInit(){}get withLabel(){let l=!1;return this._label&&0!=this._label.length&&(l=!0),l}get withIcon(){let l=!1;return this._iconName&&0!=this._iconName.length&&(l=!0),l}get formattedDateTimeString(){let l;if(this._actualDate){let u=this._actualDate.getTimezoneOffset(),e=new Date;e.setTime(this._actualDate.getTime()-60*u*1e3),l=e.toISOString()}else l="";return l}initMaskFromMode(){let l="";switch(this._calendarMode){case a.CV.date:l="dd/MM/yyyy";break;case a.CV.dateTime:l="dd/MM/yyyy H:mm";break;case a.CV.month:l="MMMM";break;case a.CV.monthYear:l="MMMM yyyy";break;case a.CV.yearMonth:l="yyyy MMMM";break;case a.CV.time:l="H:mm";break;case a.CV.timeDate:l="H:mm dd/MM/yyyy";break;case a.CV.year:l="yyyy"}this._maskFormat=l}dateChanged(l){let u=new Date(l),e=u.getTimezoneOffset(),P=new Date;P.setTime(u.getTime()+60*e*1e3),this._actualDate.getTime()!=P.getTime()&&(this.actualDateChange.emit(u),C.M.consoleLog("Emetto la data "+u.toDateString()))}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275cmp=s.Xpm({type:d,selectors:[["app-dtinput"]],inputs:{title:"title",itemLines:"itemLines",itemColor:"itemColor",itemDetail:"itemDetail",label:"label",textAlignmentRight:"textAlignmentRight",iconName:"iconName",iconColor:"iconColor",iconSlot:"iconSlot",actualDate:"actualDate",maskFormat:"maskFormat",calendarMode:"calendarMode",readonly:"readonly",isoMaxDate:"isoMaxDate"},outputs:{actualDateChange:"actualDateChange"},decls:9,vars:12,consts:[[3,"color","lines","detail","id"],[3,"icon","slot","color",4,"ngIf"],["slot","start","position","fixed",4,"ngIf"],[3,"slot"],[3,"trigger"],[3,"icon","slot","color"],["slot","start","position","fixed"],["class","datetime-title","color","primary",4,"ngIf"],["locale","it-IT","size","cover","showDefaultButtons","true","cancelText","Annulla","clearText","Elimina","doneText","Conferma",3,"presentation","readonly","value","max","ionChange"],["mydatetime",""],["color","primary",1,"datetime-title"],["size","small"]],template:function(l,u){1&l&&(s.TgZ(0,"ion-item",0),s.YNc(1,A,1,3,"ion-icon",1),s.YNc(2,I,2,1,"ion-label",2),s.TgZ(3,"ion-text",3)(4,"p"),s._uU(5),s.ALo(6,"date"),s.qZA()(),s.TgZ(7,"ion-modal",4),s.YNc(8,x,4,5,"ng-template"),s.qZA()()),2&l&&(s.Q6J("color",u._itemColor)("lines",u._itemLines)("detail",u._itemDetail)("id",u._componentId),s.xp6(1),s.Q6J("ngIf",u.withIcon),s.xp6(1),s.Q6J("ngIf",u.withLabel),s.xp6(1),s.Q6J("slot",u._slotText),s.xp6(2),s.Oqu(s.xi3(6,9,u._actualDate,u._maskFormat)),s.xp6(2),s.Q6J("trigger",u._componentId))},directives:[_.Ie,f.O5,_.gu,_.Q$,_.yW,_.ki,_.W2,_.sr,_.wd,_.x4,_.QI],pipes:[f.uU],styles:["ion-item[_ngcontent-%COMP%]{cursor:pointer}ion-toolbar.datetime-title[_ngcontent-%COMP%]{--padding-end: 10px;--padding-start: 10px}"]}),d})()},1626:(Z,M,g)=>{g.d(M,{u:()=>a});var s=g(4021),h=g(2096);let a=(()=>{class C{transform(f){let A="";return A=s.Gs.decode(s.Jw,f),A}}return C.\u0275fac=function(f){return new(f||C)},C.\u0275pipe=h.Yjl({name:"targetSesso",type:C,pure:!0}),C})()}}]);