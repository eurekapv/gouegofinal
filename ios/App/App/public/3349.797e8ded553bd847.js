"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3349],{3349:(S,p,l)=>{l.r(p),l.d(p,{HistorylistPageModule:()=>R});var u=l(9808),_=l(4182),n=l(7026),f=l(2028),Z=l(4021),m=l(3833),x=l(6962),A=l(6755),U=l(8223),d=l(9129),t=l(2096),I=l(6525);let y=(()=>{class i{transform(e,o,...r){let s="",a=[],g="",T=!1,h=0;return void 0!==e&&0!==e.length&&(a=e.split(";")),0!==a.length&&(a.length>3&&(T=!0),a.forEach(L=>{try{h=parseInt(L),h--,s=T?I.E.getsmallLabel(h,o):I.E.getLabel(h,o),0!==g.length&&(g+=", "),g+=s}catch(J){d.M.consoleLog(J,"error")}})),g}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"giorniPrevisti",type:i,pure:!0}),i})();function P(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"ion-toolbar",10)(1,"ion-segment",11),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw().selectedView=r})("ionChange",function(r){return t.CHM(e),t.oxw().onChangeSegment(r)}),t.TgZ(2,"ion-segment-button",12),t._UZ(3,"ion-icon",13),t.TgZ(4,"ion-label"),t._uU(5,"Prenotazioni"),t.qZA()(),t.TgZ(6,"ion-segment-button",14),t._UZ(7,"ion-icon",15),t.TgZ(8,"ion-label"),t._uU(9,"Corsi"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.selectedView)}}function C(i,c){1&i&&(t.TgZ(0,"div",19)(1,"ion-label"),t._uU(2,"Nessuna Iscrizione Corso"),t.qZA(),t.TgZ(3,"ion-label"),t._uU(4,"trovata"),t.qZA()())}function v(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).onClickCorso(s)}),t._UZ(1,"ion-icon",22),t.TgZ(2,"ion-label",23)(3,"p"),t._uU(4),t.ALo(5,"titlecase"),t.ALo(6,"date"),t._UZ(7,"br"),t._uU(8),t.ALo(9,"titlecase"),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"h1"),t._uU(12),t.qZA(),t.TgZ(13,"h3"),t._uU(14),t.ALo(15,"titlecase"),t.ALo(16,"giorniPrevisti"),t.qZA()(),t.TgZ(17,"ion-chip",24),t._uU(18),t.ALo(19,"date"),t._UZ(20,"ion-icon",25),t.qZA()()}if(2&i){const e=c.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("color",e.DATAFINE>o.today&&e.DATAINIZIO<o.today?"success":"danger"),t.xp6(3),t.hij("",t.lcZ(5,8,t.xi3(6,10,e.DATAINIZIO,"EEEE dd/MM/yyyy"))," "),t.xp6(4),t.hij(" ",t.lcZ(9,13,t.xi3(10,15,e.DATAFINE,"EEEE dd/MM/yyyy"))," "),t.xp6(4),t.AsE("",e.DENOMINAZIONESPORT," in ",e.DENOMINAZIONELOCATION,""),t.xp6(2),t.hij("",t.lcZ(15,18,t.xi3(16,20,e.GIORNIPREVISTI,o.lingua))," "),t.xp6(3),t.Q6J("color",e.DATAFINE>o.today&&e.DATAINIZIO<o.today?"success":"danger"),t.xp6(1),t.hij(" ",t.xi3(19,23,e.ORAINIZIO,"HH:mm")," ")}}function O(i,c){if(1&i&&(t.TgZ(0,"ion-list"),t.YNc(1,v,21,26,"ion-item",20),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.listUtenteCorsi)}}function E(i,c){if(1&i&&(t.TgZ(0,"div",16),t.YNc(1,C,5,0,"div",17),t.YNc(2,O,2,1,"ion-list",18),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e.listUtenteCorsi.length),t.xp6(1),t.Q6J("ngIf",0!==e.listUtenteCorsi.length)}}function N(i,c){1&i&&(t.TgZ(0,"div",19)(1,"ion-label"),t._uU(2,"Nessuna Prenotazione Campi"),t.qZA(),t.TgZ(3,"ion-label"),t._uU(4,"trovata"),t.qZA()())}function z(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(3).onClickPrenotazione(s)}),t._UZ(1,"ion-icon",26),t.TgZ(2,"ion-label")(3,"p"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"h1"),t._uU(7),t.ALo(8,"titlecase"),t.ALo(9,"date"),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"h3"),t._uU(12),t.ALo(13,"titlecase"),t.TgZ(14,"span"),t._uU(15),t.qZA(),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"titlecase"),t.qZA()()(),t.TgZ(19,"ion-chip",24),t._uU(20),t.qZA()()}if(2&i){const e=c.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("color",e.DATAORAFINE<o.today?"danger":"success"),t.xp6(3),t.Oqu(t.xi3(5,10,e.DATAORAINIZIO,"dd/MM/yyyy")),t.xp6(3),t.AsE("",t.lcZ(8,13,t.xi3(9,15,e.DATAORAINIZIO,"EEEE"))," ore ",t.xi3(10,18,e.DATAORAINIZIO,"HH:mm"),""),t.xp6(5),t.hij("",t.lcZ(13,21,e.COMUNELOCATION)," "),t.xp6(3),t.Oqu(e.COMUNELOCATION&&e.INDIRIZZOLOCATION?", ":""),t.xp6(2),t.Oqu(t.lcZ(18,23,e.INDIRIZZOLOCATION)),t.xp6(2),t.Q6J("color",e.DATAORAFINE<o.today?"danger":"success"),t.xp6(1),t.AsE(" ",e.DURATAORE>1?e.DURATAORE:60*e.DURATAORE," ",e.DURATAORE>1?"Ore":"Min."," ")}}function M(i,c){if(1&i&&(t.TgZ(0,"ion-list"),t.YNc(1,z,21,25,"ion-item",20),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.listUtentePrenotazione)}}function D(i,c){if(1&i&&(t.TgZ(0,"div",16),t.YNc(1,N,5,0,"div",17),t.YNc(2,M,2,1,"ion-list",18),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e.listUtentePrenotazione.length),t.xp6(1),t.Q6J("ngIf",0!==e.listUtentePrenotazione.length)}}const w=[{path:"",component:(()=>{class i{constructor(e,o,r,s,a,g){this.navCtrl=e,this.startService=o,this.loadingCtrl=r,this.toastCtrl=s,this.docstructureService=a,this.gestureCtrl=g,this.lingua=Z.SQ.italiano,this.selectedView="prenotazioni",this.showTabs=!0,this.today=new Date}ngOnInit(){this.sottoscrizionePrenotazioni(),this.sottoscrizioneIscrizioni()}ionViewDidEnter(){this.subDocUtente=this.startService.utente.subscribe(e=>{this.docUtente=e,this.docUtente&&this.requestPrenotazioni()})}requestPrenotazioni(){this.docUtente&&this.docUtente.ID&&this.loadingCtrl.create({spinner:"circular",message:"Caricamento",backdropDismiss:!0}).then(e=>{e.present();let o=new m.x(!0);o.IDUTENTE=this.docUtente.ID,this.docstructureService.requestNew(o).then(r=>{this.listUtentePrenotazione=r,e.dismiss()}).catch(r=>{e.dismiss(),d.M.consoleLog(r,"error"),this.showMessage("Errore nel caricamento")})})}requestIscrizioni(){this.docUtente&&this.docUtente.ID&&this.loadingCtrl.create({spinner:"circular",message:"Caricamento",backdropDismiss:!0}).then(e=>{e.present();let o=new A.i(!0);o.IDUTENTE=this.docUtente.ID,this.docstructureService.requestNew(o).then(r=>{this.listUtenteCorsi=r,e.dismiss()}).catch(r=>{e.dismiss(),d.M.consoleLog(r,"error"),this.showMessage("Errore nel caricamento")})})}sottoscrizionePrenotazioni(){this.subListUtentePrenotazioni=this.startService.listUtentePrenotazioni.subscribe(e=>{this.listUtentePrenotazione=e},e=>{})}sottoscrizioneIscrizioni(){this.subListUtenteIscrizioni=this.startService.listUtenteIscrizioni.subscribe(e=>{this.listUtenteCorsi=e},e=>{})}onChangeSegment(e){switch(this.selectedView){case"prenotazioni":this.requestPrenotazioni();break;case"corsi":this.requestIscrizioni()}}onClickCorso(e){this.navCtrl.navigateForward(["/","historylist","course",e.ID])}onClickPrenotazione(e){this.navCtrl.navigateForward(["/","historylist","booking",e.IDPRENOTAZIONE+"-"+e.ID])}doRefresh(e){if(this.docUtente&&this.docUtente.ID)switch(this.selectedView){case"prenotazioni":let o=new m.x(!0);o.IDUTENTE=this.docUtente.ID,this.docstructureService.requestNew(o).then(s=>{this.listUtentePrenotazione=s,e.target.complete()}).catch(s=>{e.target.complete(),d.M.consoleLog(s,"error"),this.showMessage("Errore nel caricamento")});break;case"corsi":let r=new A.i(!0);r.IDUTENTE=this.docUtente.ID,this.docstructureService.requestNew(r).then(s=>{this.listUtenteCorsi=s,e.target.complete()}).catch(s=>{e.target.complete(),d.M.consoleLog(s,"error"),this.showMessage("Errore nel caricamento")})}}showMessage(e){this.toastCtrl.create({message:e,duration:3e3}).then(o=>{o.present()})}onClickSettings(){this.navCtrl.navigateForward("/account")}onScroll(e){e.detail.currentY<5?this.showTabs=!0:e.detail.deltaY>20?this.showTabs=!1:e.detail.deltaY<-20&&(this.showTabs=!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(n.SH),t.Y36(x.D),t.Y36(n.HT),t.Y36(n.yF),t.Y36(U.l),t.Y36(n.TH))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-historylist"]],decls:16,vars:3,consts:[["color","primary"],["slot","start"],["defaultHref","/"],["slot","primary"],[3,"click"],["name","person-circle-outline"],["mode","md",4,"ngIf"],["id","content","scrollEvents","",3,"ionScroll"],["slot","fixed",3,"ionRefresh"],["class","contentExpand",4,"ngIf"],["mode","md"],["value","prenotazioni",3,"ngModel","ngModelChange","ionChange"],["value","prenotazioni"],["name","calendar-outline"],["value","corsi"],["name","school-outline"],[1,"contentExpand"],["class","nofind-cnt",4,"ngIf"],[4,"ngIf"],[1,"nofind-cnt"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["name","school","slot","start",1,"icon-school",3,"color"],[1,"ion-text-wrap"],[3,"color"],["name","time-outline"],["name","calendar","slot","start",1,"icon-prenotazioni",3,"color"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Attivit\xe0"),t.qZA(),t.TgZ(6,"ion-buttons",3)(7,"ion-button",4),t.NdJ("click",function(){return o.onClickSettings()}),t._UZ(8,"ion-icon",5),t.qZA()()(),t.YNc(9,P,10,1,"ion-toolbar",6),t.qZA(),t.TgZ(10,"ion-content",7),t.NdJ("ionScroll",function(s){return o.onScroll(s)}),t.TgZ(11,"ion-refresher",8),t.NdJ("ionRefresh",function(s){return o.doRefresh(s)}),t._UZ(12,"ion-refresher-content"),t.qZA(),t.YNc(13,E,3,2,"div",9),t.YNc(14,D,3,2,"div",9),t.qZA(),t._UZ(15,"ion-footer")),2&e&&(t.xp6(9),t.Q6J("ngIf",o.showTabs),t.xp6(4),t.Q6J("ngIf","corsi"==o.selectedView),t.xp6(1),t.Q6J("ngIf","prenotazioni"==o.selectedView))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.YG,n.gu,u.O5,n.cJ,n.QI,_.JJ,_.On,n.GO,n.Q$,n.W2,n.nJ,n.Wo,n.q_,u.sg,n.Ie,n.hM,n.fr],pipes:[u.rS,u.uU,y],styles:["h1[_ngcontent-%COMP%]{font-size:16px;font-weight:600}h2[_ngcontent-%COMP%]{font-size:14px;font-weight:500}h3[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.icon-school[_ngcontent-%COMP%], .icon-prenotazioni[_ngcontent-%COMP%]{font-size:40px}.icon-text[_ngcontent-%COMP%]{font-size:12px;margin-top:0;margin-bottom:2px;font-weight:600}.icon-text.article[_ngcontent-%COMP%]{font-size:10px}.contentExpand[_ngcontent-%COMP%]{height:100%}"]}),i})()}];let H=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.Bz.forChild(w)],f.Bz]}),i})();var b=l(4586);let R=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,_.u5,n.Pc,H,b.D]]}),i})()}}]);