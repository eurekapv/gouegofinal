"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4776],{4776:(y,O,p)=>{p.d(O,{W:()=>l});var m=p(9808),x=p(4182),d=p(7026),c=p(2028),I=p(7205),E=p(2096);const R=[{path:"",component:I.y}];let t=(()=>{class _{}return _.\u0275fac=function(S){return new(S||_)},_.\u0275mod=E.oAB({type:_}),_.\u0275inj=E.cJS({imports:[[c.Bz.forChild(R)],c.Bz]}),_})();var i=p(7217);let l=(()=>{class _{}return _.\u0275fac=function(S){return new(S||_)},_.\u0275mod=E.oAB({type:_}),_.\u0275inj=E.cJS({imports:[[m.ez,x.u5,d.Pc,t,i.S,x.UX]]}),_})()},7205:(y,O,p)=>{p.d(O,{y:()=>W});var m=p(4182),x=p(6962),d=p(5351),c=p(4021),I=p(2271),E=p(9662),R=p(9129);class t{static htmlParagraph(f){let e="";return e=`<p>${f}</p>`,e}}var i=p(2096),l=p(7026),_=p(7652),M=p(9808);function S(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"ion-buttons",15)(1,"ion-button",3),i.NdJ("click",function(){return i.CHM(e),i.oxw().backStepRegistration()}),i._UZ(2,"ion-icon",16),i.qZA()()}}function U(n,f){if(1&n&&(i.TgZ(0,"div",17),i._UZ(1,"img",18),i.qZA()),2&n){const e=i.oxw();i.Q6J("ngClass",e.isDesktop?"ion-text-center div-logo desktop":"ion-text-center div-logo"),i.xp6(1),i.Q6J("src",e.startConfig.getUrlLogo(),i.LSH)}}function k(n,f){if(1&n&&(i.TgZ(0,"ion-segment-button",21),i._uU(1," Registrati "),i.qZA()),2&n){const e=i.oxw(2);i.Q6J("value",e.pageState.REGISTRATION)}}function b(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"div",19)(1,"ion-segment",20),i.NdJ("ngModelChange",function(s){return i.CHM(e),i.oxw().actualStateSegment=s})("ionChange",function(s){return i.CHM(e),i.oxw().onSegmentChanged(s)}),i.TgZ(2,"ion-segment-button",21),i._uU(3," Accedi "),i.qZA(),i.YNc(4,k,2,1,"ion-segment-button",22),i.qZA()()}if(2&n){const e=i.oxw();i.xp6(1),i.Q6J("ngModel",e.actualStateSegment),i.xp6(1),i.Q6J("value",e.pageState.LOGIN),i.xp6(2),i.Q6J("ngIf",e.registrationInApp)}}function L(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"div",23)(1,"form",24)(2,"ion-list")(3,"ion-item",25)(4,"ion-label",26)(5,"i"),i._uU(6,"per accedere al proprio account utilizzare indirizzo email e password impostate in fase di registrazone"),i.qZA()()(),i.TgZ(7,"ion-item"),i._UZ(8,"ion-icon",27)(9,"ion-input",28),i.qZA(),i.TgZ(10,"ion-item"),i._UZ(11,"ion-icon",29)(12,"ion-input",30),i.qZA(),i.TgZ(13,"ion-item",31),i.NdJ("click",function(){return i.CHM(e),i.oxw().onClickReimpostaPsw()}),i.TgZ(14,"ion-label",32),i._uU(15," non ricordo la password "),i.qZA()()()()()}if(2&n){const e=i.oxw();i.xp6(1),i.Q6J("formGroup",e.formLogin)}}function V(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"ion-item",31),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).openPolicyLink()}),i.TgZ(1,"ion-label",32),i._uU(2," condizioni di registrazione "),i.qZA()()}}function F(n,f){if(1&n&&(i.TgZ(0,"div",23)(1,"form",24)(2,"ion-list")(3,"ion-item",25)(4,"ion-label",26)(5,"i"),i._uU(6,"per iniziare la registrazione \xe8 necessario impostare un indirizzo email valido ed un numero cellulare"),i.qZA()()(),i.TgZ(7,"ion-item"),i._UZ(8,"ion-icon",33)(9,"ion-input",34),i.qZA(),i.TgZ(10,"ion-item"),i._UZ(11,"ion-icon",35)(12,"ion-input",36),i.qZA(),i.YNc(13,V,3,0,"ion-item",37),i.TgZ(14,"ion-item",25)(15,"ion-label",26)(16,"i"),i._uU(17),i.qZA()()()()()()),2&n){const e=i.oxw();i.xp6(1),i.Q6J("formGroup",e.formContact),i.xp6(12),i.Q6J("ngIf",e.isPolicyLink()),i.xp6(4),i.Oqu(e.labelFooterRegistrazione)}}function D(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"ion-list")(1,"ion-item",25)(2,"ion-label",26)(3,"i"),i._uU(4),i.qZA()()(),i.TgZ(5,"ion-item")(6,"ion-input",42),i.NdJ("ngModelChange",function(s){return i.CHM(e),i.oxw(2).codeVerificationMail=s}),i.qZA()(),i.TgZ(7,"ion-item",31),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return s.onClickReinviaCodice(s.tipoVerifica.verificaemail)}),i.TgZ(8,"ion-label",32)(9,"i"),i._uU(10,"reinvia mail"),i.qZA()()()()}if(2&n){const e=i.oxw(2);i.xp6(4),i.hij("abbiamo inviato una mail a ",e.formContact.value.email,""),i.xp6(2),i.Q6J("ngModel",e.codeVerificationMail)("maxlength",e.codeLength)("minlength",e.codeLength)}}function J(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"ion-list")(1,"ion-item",25)(2,"ion-label",26)(3,"i"),i._uU(4),i.qZA()()(),i.TgZ(5,"ion-item")(6,"ion-input",43),i.NdJ("ngModelChange",function(s){return i.CHM(e),i.oxw(2).codeVerificationSms=s}),i.qZA()(),i.TgZ(7,"ion-item",31),i.NdJ("click",function(){i.CHM(e);const s=i.oxw(2);return s.onClickReinviaCodice(s.tipoVerifica.verificasms)}),i.TgZ(8,"ion-label",32)(9,"i"),i._uU(10,"reinvia sms"),i.qZA()()()()}if(2&n){const e=i.oxw(2);i.xp6(4),i.hij("abbiamo inviato un SMS a ",e.formContact.value.telephone,""),i.xp6(2),i.Q6J("ngModel",e.codeVerificationSms)("maxlength",e.codeLength)("minlength",e.codeLength)}}function Q(n,f){if(1&n&&(i.TgZ(0,"div",38)(1,"ion-grid")(2,"ion-row",39)(3,"ion-col",40),i._UZ(4,"img",41),i.qZA()()(),i.YNc(5,D,11,4,"ion-list",9),i.YNc(6,J,11,4,"ion-list",9),i.qZA()),2&n){const e=i.oxw();i.xp6(5),i.Q6J("ngIf",e.canVerify(e.tipoVerifica.verificaemail)),i.xp6(1),i.Q6J("ngIf",e.canVerify(e.tipoVerifica.verificasms))}}function q(n,f){1&n&&(i.TgZ(0,"ion-label")(1,"ion-text",0),i._uU(2,"inserire il nome"),i.qZA()())}function G(n,f){if(1&n&&(i.TgZ(0,"ion-item",57),i.YNc(1,q,3,0,"ion-label",9),i.qZA()),2&n){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",e.formRegister.controls.name.errors.required)}}function T(n,f){1&n&&(i.TgZ(0,"ion-label")(1,"ion-text",0),i._uU(2,"inserire il cognome"),i.qZA()())}function u(n,f){if(1&n&&(i.TgZ(0,"ion-item",57),i.YNc(1,T,3,0,"ion-label",9),i.qZA()),2&n){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",e.formRegister.controls.surname.errors.required)}}function w(n,f){1&n&&(i.TgZ(0,"ion-label")(1,"ion-text",0),i._uU(2,"inserire il codice di 16 caratteri"),i.qZA()())}function a(n,f){if(1&n&&(i.TgZ(0,"ion-item",57),i.YNc(1,w,3,0,"ion-label",9),i.qZA()),2&n){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",e.formRegister.controls.codFisc.errors)}}function r(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"ion-item",25)(1,"ion-label"),i._uU(2,"Accetto la "),i.TgZ(3,"a",58),i.NdJ("click",function(){return i.CHM(e),i.oxw(2).openPolicyLink()}),i._uU(4,"privacy policy"),i.qZA()(),i._UZ(5,"ion-checkbox",59),i.qZA()}}function g(n,f){if(1&n&&(i.TgZ(0,"div")(1,"form",24)(2,"ion-list")(3,"ion-item",25)(4,"ion-label",26)(5,"i"),i._uU(6,"ancora qualche informazione per concludere la registrazione"),i.qZA()()(),i.TgZ(7,"ion-item-group")(8,"ion-item-divider",44),i._UZ(9,"ion-icon",45),i.TgZ(10,"ion-label"),i._uU(11,"Credenziali accesso"),i.qZA()(),i.TgZ(12,"ion-item"),i._UZ(13,"ion-icon",33),i.TgZ(14,"ion-label")(15,"i"),i._uU(16),i.qZA()()(),i.TgZ(17,"ion-item"),i._UZ(18,"ion-icon",29)(19,"ion-input",46),i.qZA(),i.TgZ(20,"ion-item"),i._UZ(21,"ion-icon",29)(22,"ion-input",47),i.qZA()(),i.TgZ(23,"ion-item-group")(24,"ion-item-divider",44),i._UZ(25,"ion-icon",48),i.TgZ(26,"ion-label"),i._uU(27,"Qualche tua info"),i.qZA()(),i.YNc(28,G,2,1,"ion-item",49),i.TgZ(29,"ion-item"),i._UZ(30,"ion-icon",50)(31,"ion-input",51),i.qZA(),i.YNc(32,u,2,1,"ion-item",49),i.TgZ(33,"ion-item"),i._UZ(34,"ion-icon",50)(35,"ion-input",52),i.qZA(),i.YNc(36,a,2,1,"ion-item",49),i.TgZ(37,"ion-item"),i._UZ(38,"ion-icon",53)(39,"ion-input",54),i.qZA(),i.YNc(40,r,6,0,"ion-item",55),i.TgZ(41,"ion-item",25)(42,"ion-label"),i._uU(43,"voglio ricevere la newsletter"),i.qZA(),i._UZ(44,"ion-checkbox",56),i.qZA(),i.TgZ(45,"ion-item",25)(46,"ion-label",26)(47,"i"),i._uU(48,"se vuoi rimanere aggiornato sulle nostre attivit\xe0 ti invitiamo a spuntare la voce newsletter"),i.qZA()()()()()()()),2&n){const e=i.oxw();i.xp6(1),i.Q6J("formGroup",e.formRegister),i.xp6(15),i.Oqu(e.formContact.value.email),i.xp6(12),i.Q6J("ngIf",e.formRegister.controls.name.invalid&&(e.formRegister.controls.name.dirty||e.formRegister.controls.name.touched)),i.xp6(4),i.Q6J("ngIf",e.formRegister.controls.surname.invalid&&(e.formRegister.controls.surname.dirty||e.formRegister.controls.surname.touched)),i.xp6(4),i.Q6J("ngIf",e.formRegister.controls.codFisc.invalid&&(e.formRegister.controls.codFisc.dirty||e.formRegister.controls.codFisc.touched)),i.xp6(4),i.Q6J("ngIf",e.isPolicyLink())}}function C(n,f){1&n&&(i.TgZ(0,"div")(1,"ion-grid")(2,"ion-row",39)(3,"ion-col",40),i._UZ(4,"img",60),i.qZA()()(),i.TgZ(5,"ion-list")(6,"ion-list-header"),i._uU(7,"Benvenuto"),i.qZA(),i.TgZ(8,"ion-item",25)(9,"ion-label",32)(10,"h6"),i._uU(11,"adesso anche tu fai parte del nostro team"),i.qZA(),i.TgZ(12,"p"),i._uU(13,"offriamo divertimento e il miglior modo per rimanere in forma"),i.qZA()()(),i.TgZ(14,"ion-item",25),i._UZ(15,"ion-icon",61),i.TgZ(16,"ion-label",32),i._uU(17,"scopri i corsi che abbiamo pensato per te"),i.qZA()(),i.TgZ(18,"ion-item",25),i._UZ(19,"ion-icon",61),i.TgZ(20,"ion-label",32),i._uU(21,"organizza un incontro e prenota uno dei nostri campi"),i.qZA()(),i.TgZ(22,"ion-item",25),i._UZ(23,"ion-icon",61),i.TgZ(24,"ion-label",32),i._uU(25,"rimani aggiornato su tutti i nostri eventi"),i.qZA()()()())}function A(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"div",62)(1,"ion-button",63),i.NdJ("click",function(){return i.CHM(e),i.oxw().onClickFooterAvanti()}),i._uU(2," ACCEDI "),i.qZA()()}if(2&n){const e=i.oxw();i.xp6(1),i.Q6J("color",e.colorButton)("disabled",!e.formLogin.valid)}}function N(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"div",64)(1,"ion-button",63),i.NdJ("click",function(){return i.CHM(e),i.oxw().onClickFooterAvanti()}),i._uU(2,"Avanti"),i.qZA()()}if(2&n){const e=i.oxw();i.xp6(1),i.Q6J("color",e.colorButton)("disabled",!e.formContact.valid)}}function H(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"div",65)(1,"ion-button",63),i.NdJ("click",function(){return i.CHM(e),i.oxw().onClickFooterAvanti()}),i._uU(2," Verifica "),i.qZA()()}if(2&n){const e=i.oxw();i.xp6(1),i.Q6J("color",e.colorButton)("disabled",!e.isEnableAvantiOnVerify())}}function X(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"div",66)(1,"ion-button",67),i.NdJ("click",function(){return i.CHM(e),i.oxw().onClickFooterAvanti()}),i._uU(2," Registrati "),i.qZA()()}if(2&n){const e=i.oxw();i.xp6(1),i.Q6J("color",e.colorButton)}}function B(n,f){if(1&n){const e=i.EpF();i.TgZ(0,"div",68)(1,"ion-button",67),i.NdJ("click",function(){return i.CHM(e),i.oxw().closeModal()}),i._uU(2," Inizia "),i.qZA()()}if(2&n){const e=i.oxw();i.xp6(1),i.Q6J("color",e.colorButton)}}let W=(()=>{class n{constructor(e,o,s,h,P){this.modalCtrl=e,this.startService=o,this.loadingCtrl=s,this.alertCtrl=h,this.cryptoService=P,this.pageState=v,this.tipoVerifica=c.Xo,this.actualStatePage=v.LOGIN,this.actualStateSegment=v.LOGIN,this.stepRegistration=[],this.indexStepRegistration=0,this.docRichiestaCodici=new I.lA,this.registrationInApp=!1,this.codeVerificationMail="",this.codeVerificationSms="",this.codeLength=5,this.docUtente=new d.oD,this.emailVerificationYES=!1,this.smsVerificationYES=!1,this.emailVerificata="",this.telVerificato="",this.colorButton="tertiary",this.indexStepRegistration=0,this.actualStatePage=v.LOGIN,this.actualStateSegment=v.LOGIN,this.startListen=o.startConfig.subscribe(Z=>{this.startConfig=Z,this.startConfig&&this.startConfig.gruppo&&(this.docGruppo=this.startConfig.gruppo,this.registrationInApp=this.startConfig.gruppo.APPFLAGREGISTRAZIONE,this.createArrayStepRegistration(this.docGruppo))}),this.docArea=this.startService.areaSelectedValue}ngOnInit(){this.createLoginForm(),this.createRegisterForm(),this.createContactForm(),this.isDesktop=this.startService.isDesktop}getCaptionTitle(){let e;return e=this.actualStateSegment==v.LOGIN?"Login":"Nuovo Account",e}get isSegmentLogin(){let e=!1;return e=this.actualStateSegment==v.LOGIN,e}get labelFooterRegistrazione(){let e="";if(this.docGruppo)switch(this.docGruppo.APPTIPOVERIFICA){case c.Xo.noverifica:e="al termine della registrazione utilizzare l'indirizzo email per accedere al proprio account";break;case c.Xo.verificaemail:e="sar\xe0 inviata una email contenente un codice di convalida da inserire per poter accedere al proprio account";break;case c.Xo.verificaemailsms:e="sar\xe0 inviata una email ed un SMS contenente i codici di convalida da inserire per poter accedere al proprio account";break;case c.Xo.verificasms:e="sar\xe0 inviato un SMS contenente il codice di convalida da inserire per poter accedere al proprio account"}return e}onSegmentChanged(e){this.actualStatePage=e.detail.value==v.LOGIN?v.LOGIN:this.stepRegistration[this.indexStepRegistration]}createArrayStepRegistration(e){this.stepRegistration=[],1==e.APPFLAGREGISTRAZIONE&&(this.stepRegistration.push(v.CONTACT),e.APPTIPOVERIFICA!==c.Xo.noverifica&&this.stepRegistration.push(v.VERIFY),this.stepRegistration.push(v.REGISTRATION),this.stepRegistration.push(v.WELCOME))}nextStepRegistration(e=!1){if(this.indexStepRegistration+1<this.stepRegistration.length)for(let o=this.indexStepRegistration+1;o<this.stepRegistration.length;o++){let s=!0;const h=this.stepRegistration[o];if(e&&h==v.VERIFY&&(s=!1),s){this.indexStepRegistration=o,this.actualStatePage=h;break}}}backStepRegistration(){if(this.indexStepRegistration-1>=0)for(let e=this.indexStepRegistration-1;e>=0;e--){const o=this.stepRegistration[e];this.indexStepRegistration=e,this.actualStatePage=o;break}}closeModal(){this.modalCtrl.dismiss()}onClickFooterAvanti(){switch(this.actualStatePage){case v.LOGIN:this.onClickLogin();break;case v.CONTACT:this.onClickAvantiContact();break;case v.VERIFY:this.onClickAvantiVerifica();break;case v.REGISTRATION:this.onClickRegistrati()}}onClickLogin(){this.formLogin.valid&&this.loadingCtrl.create({message:"Controllo credenziali"}).then(e=>{e.present(),this.startService.userLogin(this.formLogin.value.username,this.formLogin.value.password).then(o=>{e.dismiss(),o.result?(this.startService.saveStorageUtente(this.formLogin.value.username,this.formLogin.value.password),this.formLogin.reset(),this.closeModal()):this.startService.presentAlertMessage(o.message)}).catch(o=>{let s="";s=t.htmlParagraph("Ops...Si \xe8 verificato un errore")+t.htmlParagraph(o),e.dismiss(),this.startService.presentAlertMessage(s),R.M.consoleLog(o)})})}onClickReimpostaPsw(){this.modalCtrl.create({component:E.w}).then(e=>{e.present(),this.modalCtrl.dismiss()})}onClickAvantiContact(){let e=this.formContact.value.email,o=this.formContact.value.telephone,s=!0,h=!1,P="";if(this.docGruppo.APPTIPOVERIFICA==c.Xo.noverifica)this.emailVerificationYES=!0,this.smsVerificationYES=!0,s=!1,h=!0,this.docRichiestaCodici.REQUESTSMSCODE=!1,this.docRichiestaCodici.REQUESTEMAILCODE=!1;else switch(this.docGruppo.APPTIPOVERIFICA){case c.Xo.verificaemail:this.emailVerificationYES&&this.emailVerificata==e?(s=!1,h=!0,this.docRichiestaCodici.REQUESTEMAILCODE=!1):(s=!0,h=!0,this.docRichiestaCodici.REQUESTEMAILCODE=!0,this.docRichiestaCodici.EMAIL=e);break;case c.Xo.verificaemailsms:this.emailVerificationYES&&this.emailVerificata==e&&this.smsVerificationYES&&this.telVerificato==o?(s=!1,h=!0,this.docRichiestaCodici.REQUESTEMAILCODE=!1,this.docRichiestaCodici.REQUESTSMSCODE=!1):(s=!0,h=!0,(0==this.emailVerificationYES||this.emailVerificata!==e)&&(this.docRichiestaCodici.REQUESTEMAILCODE=!0,this.docRichiestaCodici.EMAIL=e),(0==this.smsVerificationYES||this.telVerificato!==o)&&(this.docRichiestaCodici.REQUESTSMSCODE=!0,this.docRichiestaCodici.TELEPHONE=o));break;case c.Xo.verificasms:this.smsVerificationYES&&this.telVerificato==o?(s=!1,h=!0,this.docRichiestaCodici.REQUESTSMSCODE=!1):(s=!0,h=!0,this.docRichiestaCodici.REQUESTSMSCODE=!0,this.docRichiestaCodici.TELEPHONE=o);break;default:h=!1,P="Ops..qualcosa \xe8 andato storto"}h?s?this.sendServerRichiestaCodici():this.nextStepRegistration(!0):this.startService.presentAlertMessage(P)}sendServerRichiestaCodici(e=!0,o){this.loadingCtrl.create({message:"Invio Codici in corso..."}).then(s=>{s.present(),this.docRichiestaCodici.IDAREA=this.docArea.ID,this.docRichiestaCodici.USE=c.I4.forRegistration,this.startService.registrationSendCodici(this.docRichiestaCodici).then(h=>{s.dismiss(),this.docRichiestaCodici.IDREFER=h.idRefer,this.docRichiestaCodici.REQUESTSMSCODE=!1,this.docRichiestaCodici.REQUESTEMAILCODE=!1,e&&this.nextStepRegistration(!1),o&&0!==o.length&&this.startService.presentToastMessage(o)}).catch(h=>{let P="";P=t.htmlParagraph("Ops...Si \xe8 verificato un errore")+t.htmlParagraph(h),s.dismiss(),this.startService.presentAlertMessage(P),R.M.consoleLog(h)})})}canVerify(e){let o;if(this.docGruppo)if(e)switch(e){case c.Xo.verificaemail:o=[c.Xo.verificaemail,c.Xo.verificaemailsms].includes(this.docGruppo.APPTIPOVERIFICA);break;case c.Xo.verificasms:o=[c.Xo.verificasms,c.Xo.verificaemailsms].includes(this.docGruppo.APPTIPOVERIFICA)}else o=[c.Xo.verificaemail,c.Xo.verificaemailsms,c.Xo.verificasms].includes(this.docGruppo.APPTIPOVERIFICA);return o}onClickReinviaCodice(e){let o="",s=!1,h=!1;if(this.docRichiestaCodici){switch(o="Verr\xe0 inviato un nuovo codice a ",e){case c.Xo.verificaemail:o+=this.docRichiestaCodici.EMAIL,s=!0;break;case c.Xo.verificasms:o+=this.docRichiestaCodici.TELEPHONE,h=!0}this.alertCtrl.create({header:"Reinvio pincode",message:o,buttons:[{text:"Annulla",role:"cancel"},{text:"Reinvia",handler:()=>{this.docRichiestaCodici.REQUESTEMAILCODE=s,this.docRichiestaCodici.REQUESTSMSCODE=h,this.sendServerRichiestaCodici(!1,"Codice reinviato con successo")}}]}).then(P=>{P.present()})}}onClickAvantiVerifica(){let s,e=this.isEnableAvantiOnVerify(),o="";e?this.docRichiestaCodici&&this.docRichiestaCodici.IDREFER&&0!==this.docRichiestaCodici.IDREFER.length?(s=new I.Rx,s.IDAREA=this.docRichiestaCodici.IDAREA,s.IDREFER=this.docRichiestaCodici.IDREFER,(this.docGruppo.APPTIPOVERIFICA==c.Xo.verificaemail||this.docGruppo.APPTIPOVERIFICA==c.Xo.verificaemailsms)&&(s.EMAILPINCODE=this.getInputVerifyCode(c.Xo.verificaemail)),(this.docGruppo.APPTIPOVERIFICA==c.Xo.verificasms||this.docGruppo.APPTIPOVERIFICA==c.Xo.verificaemailsms)&&(s.SMSPINCODE=this.getInputVerifyCode(c.Xo.verificasms)),this.sendServerVerificaCodici(s)):(e=!1,o="Errore: Richiedere il reinvio"):o="Controllare i dati inseriti",e||this.startService.presentAlertMessage(o)}sendServerVerificaCodici(e){e&&this.loadingCtrl.create({message:"Verifica Codici"}).then(o=>{o.present(),this.startService.registrationVerifyCodici(e).then(s=>{o.dismiss(),s.result?(this.emailVerificationYES=!0,this.emailVerificata=this.docRichiestaCodici.EMAIL,this.smsVerificationYES=!0,this.telVerificato=this.docRichiestaCodici.TELEPHONE,this.nextStepRegistration()):(this.emailVerificationYES=!1,this.emailVerificata="",this.smsVerificationYES=!1,this.telVerificato="")}).catch(s=>{let h="";h=t.htmlParagraph("Ops...Si \xe8 verificato un errore")+t.htmlParagraph(s),o.dismiss(),this.startService.presentAlertMessage(h),R.M.consoleLog(s)})})}onClickRegistrati(){let e;this.formRegister.valid?(e=this.formRegister.value.codFisc,e=e.toUpperCase(),this.loadingCtrl.create({message:"Check Codice Fiscale"}).then(o=>{o.present(),this.startService.checkCodiceFiscale(e,!0,!0).then(s=>{o.dismiss(),s.checkValidate?this.execRegistrati(s):this.startService.presentAlertMessage(s.msgValidate)}).catch(s=>{o.dismiss(),this.startService.presentAlertMessage(s.msgValidate)})})):this.startService.presentAlertMessage("Controlla i dati inseriti per procedere")}execRegistrati(e){let o="",s="",h=[],P=!1;this.docUtente.NOME=this.formRegister.value.name,this.docUtente.COGNOME=this.formRegister.value.surname,P=!1,o=this.formRegister.value.psw,s=o,h=this.cryptoService.mySplitPassword(s),h?(this.docRichiestaCodici.TOKEN=h[0],(!this.docRichiestaCodici.IDAREA||0==this.docRichiestaCodici.IDAREA.length)&&(this.docRichiestaCodici.IDAREA=this.docArea.ID),this.docUtente.INPUTPASSWORD=h[1],this.docUtente.SHAPASSWORD="",this.docUtente.CODICEFISCALE=e.codiceFiscale,this.docUtente.SESSO=e.sesso,this.docUtente.NATOIL=e.dataNascita,this.docUtente.NATOA=e.comune,this.docUtente.NATOCAP=e.cap,this.docUtente.NATOPROV=e.provincia,this.docUtente.NATOISOSTATO=e.stato,this.docUtente.WEBLOGIN=this.formContact.value.email,this.docUtente.EMAIL=this.formContact.value.email,this.docUtente.MOBILENUMBER=this.formContact.value.telephone,this.docUtente.NEWSLETTER=1==this.formRegister.value.chkNewsletter,this.loadingCtrl.create({message:"Registrazione"}).then(Z=>{Z.present(),this.startService.registrationFinalize(this.docUtente,this.docRichiestaCodici).then(Y=>{Z.dismiss(),this.nextStepRegistration(),this.loginAfterRegister(this.docUtente.WEBLOGIN,o)}).catch(Y=>{let z="";z=t.htmlParagraph("Ops...Si \xe8 verificato un errore")+t.htmlParagraph(Y),Z.dismiss(),this.startService.presentAlertMessage(z),R.M.consoleLog(Y)})})):this.startService.presentToastMessage("Dati non corretti")}loginAfterRegister(e,o){e&&o&&this.startService.userLogin(e,o).then(s=>{s.result?this.startService.saveStorageUtente(e,o):this.startService.presentAlertMessage(s.message)})}onClickInizia(){this.modalCtrl.dismiss()}createLoginForm(){this.formLogin=new m.cw({username:new m.NI(null,{updateOn:"change",validators:[m.kI.required]}),password:new m.NI(null,{updateOn:"change",validators:[m.kI.required]})})}createContactForm(){this.formContact=new m.cw({email:new m.NI(null,{updateOn:"change",validators:[m.kI.required,m.kI.email]}),telephone:new m.NI(null,{updateOn:"change",validators:[m.kI.required,m.kI.pattern("^[+]*[0-9]{7,}")]})})}createRegisterForm(){this.formRegister=new m.cw({name:new m.NI(null,{updateOn:"change",validators:[m.kI.required]}),surname:new m.NI(null,{updateOn:"change",validators:[m.kI.required]}),psw:new m.NI(null,{updateOn:"change",validators:[m.kI.required]}),verifyPsw:new m.NI(null,{updateOn:"change",validators:[m.kI.required]}),codFisc:new m.NI(null,{updateOn:"change",validators:[m.kI.required,m.kI.pattern("^[A-Za-z]{6}[0-9]{2}[A-Za-z]{1}[0-9]{2}[A-Za-z]{1}[0-9]{3}[A-Za-z]{1}")]}),chkPrivacy:new m.NI(!1,{updateOn:"change",validators:[this.isPolicyLink()?m.kI.requiredTrue:m.kI.nullValidator]}),chkNewsletter:new m.NI(!0,{updateOn:"change",validators:[]})},[this.pswValidator])}pswValidator(e){if(e.get("verifyPsw").value!=e.get("psw").value)return{invalid:!0}}getInputVerifyCode(e){let o="";return e==c.Xo.verificaemail?o=this.codeVerificationMail:e==c.Xo.verificasms&&(o=this.codeVerificationSms),o}isEnableAvantiOnVerify(){let e=!0;if(this.docGruppo){if(this.docGruppo.APPTIPOVERIFICA!==c.Xo.noverifica)switch(this.docGruppo.APPTIPOVERIFICA){case c.Xo.verificaemail:e=!(!this.codeVerificationMail||this.codeVerificationMail.length!=this.codeLength);break;case c.Xo.verificasms:e=!(!this.codeVerificationSms||this.codeVerificationSms.length!=this.codeLength);break;case c.Xo.verificaemailsms:e=!(!this.codeVerificationMail||this.codeVerificationMail.length!=this.codeLength||!this.codeVerificationSms||this.codeVerificationSms.length!=this.codeLength)}}else e=!1;return e}isPolicyLink(){let e,o=!1;return this.docArea&&(e=this.docArea.findAreaLinkByPageType(c.GV.policyPrivacy),e&&e.REFERURL&&(o=!0)),o}openPolicyLink(){let e;this.docArea&&(e=this.docArea.findAreaLinkByPageType(c.GV.policyPrivacy),e&&e.REFERURL&&this.startService.openLink(e.REFERURL))}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(l.IN),i.Y36(x.D),i.Y36(l.HT),i.Y36(l.Br),i.Y36(_.$))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-new-login"]],decls:22,vars:14,consts:[["color","primary"],["slot","start",4,"ngIf"],["slot","end"],["fill","clear",3,"click"],["name","close"],[3,"ngClass",4,"ngIf"],["class","ion-padding",4,"ngIf"],["class","ion-padding-horizontal",4,"ngIf"],["class","step-verifica",4,"ngIf"],[4,"ngIf"],["id","footer-login",4,"ngIf"],["id","footer-contact",4,"ngIf"],["id","footer-verify",4,"ngIf"],["id","footer-registration",4,"ngIf"],["id","footer-welcome",4,"ngIf"],["slot","start"],["name","arrow-back"],[3,"ngClass"],[3,"src"],[1,"ion-padding"],["color","primary","mode","md",3,"ngModel","ngModelChange","ionChange"],[3,"value"],[3,"value",4,"ngIf"],[1,"ion-padding-horizontal"],[3,"formGroup"],["lines","none"],[1,"ion-text-wrap","ion-text-center"],["slot","start","name","at-outline","color","primary"],["inputmode","email","type","email","placeholder","E-mail","formControlName","username","autocomplete","on"],["slot","start","name","key-outline","color","primary"],["inputmode","text","type","password","placeholder","Password","formControlName","password","autocomplete","current-password"],["detail","true","button","true","lines","none",1,"ion-text-end",3,"click"],[1,"ion-text-wrap"],["name","at-outline","slot","start","color","primary"],["type","email","placeholder","E-Mail","formControlName","email"],["name","call-outline","slot","start","color","primary"],["type","tel","inputmode","tel","placeholder","+39 Cellulare","formControlName","telephone"],["detail","true","button","true","class","ion-text-end","lines","none",3,"click",4,"ngIf"],[1,"step-verifica"],[1,"row-img"],["sizeXs","8","offsetXs","2"],["src","assets/img/otpverif.png","alt","",1,"height-viewport"],["placeholder","inserisci codice mail","type","tel","inputmode","numeric",1,"code-input",3,"ngModel","maxlength","minlength","ngModelChange"],["placeholder","inserisci codice sms","type","tel","inputmode","numeric",1,"code-input",3,"ngModel","maxlength","minlength","ngModelChange"],["sticky","true","color","light"],["name","key-outline","slot","end","color","primary"],["type","text","placeholder","immetti una password ","formControlName","psw"],["type","text","placeholder","ripeti la password","formControlName","verifyPsw"],["name","person-outline","slot","end","color","primary"],["class","alert-validation",4,"ngIf"],["slot","start","name","id-card-outline","color","primary"],["type","text","placeholder","nome","formControlName","name"],["type","text","placeholder","cognome","formControlName","surname"],["slot","start","name","card-outline","color","primary"],["type","text","placeholder","codice fiscale","formControlName","codFisc"],["lines","none",4,"ngIf"],["mode","md","slot","start","color","primary","formControlName","chkNewsletter"],[1,"alert-validation"],[3,"click"],["mode","md","slot","start","color","primary","formControlName","chkPrivacy"],["src","assets/img/teamvolley.png","alt","",1,"height-viewport"],["slot","start","name","checkmark-outline","color","primary"],["id","footer-login"],["expand","block",1,"btn-confirm",3,"color","disabled","click"],["id","footer-contact"],["id","footer-verify"],["id","footer-registration"],["expand","block",1,"btn-confirm",3,"color","click"],["id","footer-welcome"]],template:function(e,o){1&e&&(i.TgZ(0,"ion-header")(1,"ion-toolbar",0),i.YNc(2,S,3,0,"ion-buttons",1),i.TgZ(3,"ion-title"),i._uU(4),i.qZA(),i.TgZ(5,"ion-buttons",2)(6,"ion-button",3),i.NdJ("click",function(){return o.closeModal()}),i._UZ(7,"ion-icon",4),i.qZA()()()(),i.TgZ(8,"ion-content"),i.YNc(9,U,2,2,"div",5),i.YNc(10,b,5,3,"div",6),i.YNc(11,L,16,1,"div",7),i.YNc(12,F,18,3,"div",7),i.YNc(13,Q,7,2,"div",8),i.YNc(14,g,49,6,"div",9),i.YNc(15,C,26,0,"div",9),i.qZA(),i.TgZ(16,"ion-footer"),i.YNc(17,A,3,2,"div",10),i.YNc(18,N,3,2,"div",11),i.YNc(19,H,3,2,"div",12),i.YNc(20,X,3,1,"div",13),i.YNc(21,B,3,1,"div",14),i.qZA()),2&e&&(i.xp6(2),i.Q6J("ngIf",o.actualStatePage==o.pageState.REGISTRATION||o.actualStatePage==o.pageState.VERIFY),i.xp6(2),i.Oqu(o.getCaptionTitle()),i.xp6(5),i.Q6J("ngIf",o.isSegmentLogin),i.xp6(1),i.Q6J("ngIf",o.actualStatePage!==o.pageState.WELCOME),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.LOGIN),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.CONTACT),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.VERIFY),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.REGISTRATION),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.WELCOME),i.xp6(2),i.Q6J("ngIf",o.actualStatePage==o.pageState.LOGIN),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.CONTACT),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.VERIFY),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.REGISTRATION),i.xp6(1),i.Q6J("ngIf",o.actualStatePage==o.pageState.WELCOME))},directives:[l.Gu,l.sr,M.O5,l.Sm,l.YG,l.gu,l.wd,l.W2,M.mk,l.cJ,l.QI,m.JJ,m.On,l.GO,m._Y,m.JL,m.sg,l.q_,l.Ie,l.Q$,l.pK,l.j9,m.u,l.jY,l.Nd,l.wI,m.nD,m.wO,l.Ub,l.rH,l.yW,l.nz,l.w,l.yh,l.fr],styles:["div.div-logo[_ngcontent-%COMP%]{background-color:#fff;padding-top:3vh;padding-bottom:3vh;margin-bottom:3vh}div.div-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15vh}div.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:var(--ion-color-medium)}div.div-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}div.div-logo.desktop[_ngcontent-%COMP%]{padding-top:1vh;padding-bottom:0vh;margin-bottom:0vh}div.form-verifica[_ngcontent-%COMP%]{width:320px;margin:auto;margin-bottom:8vh;text-align:center}div.form-verifica[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{background:white}div.form-verifica[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{display:inline;border-radius:15px;margin:2px;border:3px solid var(--ion-color-primary);text-align:center;font-family:Arial,Helvetica,sans-serif;color:var(--ion-color-medium);font-size:40px}div.form-verifica.desktop[_ngcontent-%COMP%]{margin-bottom:2vh}h6[_ngcontent-%COMP%]{font-size:small}a[_ngcontent-%COMP%], span.link[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:underline;cursor:pointer}ion-item-divider[_ngcontent-%COMP%]{--padding-top: 5px;--padding-bottom: 5px;--padding-end: 10px}div.step-0[_ngcontent-%COMP%]   .lbl-info[_ngcontent-%COMP%]{display:flex}div.step-0[_ngcontent-%COMP%]   .lbl-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:30px auto 20px;width:70%;font-style:italic}div.step-0[_ngcontent-%COMP%]   ion-item.check[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px}div.step-0[_ngcontent-%COMP%]   .psw-container[_ngcontent-%COMP%]{display:flex;width:100%}div.step-0[_ngcontent-%COMP%]   .psw-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:auto;cursor:pointer}div.step-0[_ngcontent-%COMP%]   ion-item.item-country[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{pointer-events:none}div.step-0[_ngcontent-%COMP%]   ion-item.item-country[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{margin:auto}div.step-verifica[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:15px}div.step-verifica[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row.submit[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding-top:40px}div.step-verifica[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{text-align:center;--padding-start: 5px;--padding-end: 5px;--padding-top: 10px;--padding-bottom: 10px;font-size:25px}.alert-validation[_ngcontent-%COMP%]{--background: antiquewhite;text-align:center}.alert-validation[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-weight:700}.prefix-selector[_ngcontent-%COMP%]{width:100%;margin:0}div.step-2[_ngcontent-%COMP%]{padding:15px}div.step-2[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], div.step-2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#454f63}div.step-2[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:30px;font-size:28px}div.step-2[_ngcontent-%COMP%]   div.top-spacer[_ngcontent-%COMP%]{height:30vh;width:100%;border-radius:15px;overflow:hidden}div.step-2[_ngcontent-%COMP%]   div.top-spacer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-height:100%;min-width:100%;-o-object-fit:cover;object-fit:cover}div.step-2[_ngcontent-%COMP%]   .code-input[_ngcontent-%COMP%]{text-align:center;padding:0;font-weight:600;font-size:50px;color:var(--ion-color-dark)}div.step-2[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:50px}"]}),n})();var v=(()=>{return(n=v||(v={}))[n.LOGIN=100]="LOGIN",n[n.CONTACT=210]="CONTACT",n[n.REGISTRATION=220]="REGISTRATION",n[n.VERIFY=230]="VERIFY",n[n.WELCOME=300]="WELCOME",v;var n})()},7217:(y,O,p)=>{p.d(O,{S:()=>i});var m=p(9808),x=p(4182),d=p(7026),c=p(2028),I=p(9662),E=p(2096);const R=[{path:"",component:I.w}];let t=(()=>{class l{}return l.\u0275fac=function(M){return new(M||l)},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({imports:[[c.Bz.forChild(R)],c.Bz]}),l})(),i=(()=>{class l{}return l.\u0275fac=function(M){return new(M||l)},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({imports:[[m.ez,d.Pc,t,x.u5,x.UX]]}),l})()},9662:(y,O,p)=>{p.d(O,{w:()=>G});var m=p(655),x=p(6962),d=p(4182),c=p(2271),I=p(4021),E=p(5351),R=p(9129),t=p(2096),i=p(7026),l=p(7652),_=p(9808);const M=["c1"],S=["c2"],U=["c3"],k=["c4"],b=["c5"];function L(u,w){1&u&&(t.TgZ(0,"span"),t._uU(1,"Indica una email o un numero cellulare utilizzato nella registrazione account, "),t._UZ(2,"br"),t._uU(3," e ti invieremo un pincode di recovery password"),t.qZA())}function V(u,w){1&u&&(t.TgZ(0,"span"),t._uU(1,"Indica una email utilizzata nella registrazione account, "),t._UZ(2,"br"),t._uU(3," e ti invieremo un pincode di recovery password"),t.qZA())}function F(u,w){1&u&&(t.TgZ(0,"span"),t._uU(1,"Indica un numero cellulare utilizzato nella registrazione account, "),t._UZ(2,"br"),t._uU(3," e ti invieremo un pincode di recovery password"),t.qZA())}function D(u,w){if(1&u){const a=t.EpF();t.TgZ(0,"div",9)(1,"form",10)(2,"ion-item"),t._UZ(3,"ion-icon",11)(4,"ion-input",12),t.qZA()(),t.TgZ(5,"ion-button",13),t.NdJ("click",function(){return t.CHM(a),t.oxw().onClickInviaCodice()}),t._uU(6," Invia Codice "),t.qZA(),t.TgZ(7,"div",14)(8,"p")(9,"span"),t._UZ(10,"ion-icon",15),t.qZA(),t.TgZ(11,"span"),t._uU(12,"\xa0"),t.qZA(),t.YNc(13,L,4,0,"span",8),t.YNc(14,V,4,0,"span",8),t.YNc(15,F,4,0,"span",8),t.qZA(),t.TgZ(16,"p")(17,"ion-text",16)(18,"span")(19,"i"),t._uU(20,"(contatta la struttura se non ricordi queste informazioni)"),t.qZA()()()()(),t.TgZ(21,"form",10)(22,"div",4)(23,"ion-segment")(24,"ion-input",17,18),t.NdJ("ionInput",function(g){return t.CHM(a),t.oxw().changeFocus(g)}),t.qZA(),t.TgZ(26,"ion-input",19,20),t.NdJ("ionInput",function(g){return t.CHM(a),t.oxw().changeFocus(g)}),t.qZA(),t.TgZ(28,"ion-input",21,22),t.NdJ("ionInput",function(g){return t.CHM(a),t.oxw().changeFocus(g)}),t.qZA(),t.TgZ(30,"ion-input",23,24),t.NdJ("ionInput",function(g){return t.CHM(a),t.oxw().changeFocus(g)}),t.qZA(),t.TgZ(32,"ion-input",25,26),t.NdJ("ionInput",function(g){return t.CHM(a),t.oxw().changeFocus(g)}),t.qZA()()()()()}if(2&u){const a=t.oxw();t.xp6(1),t.Q6J("formGroup",a.formContact),t.xp6(3),t.Q6J("placeholder",a.getPlaceHolder()),t.xp6(1),t.Q6J("disabled",!a.formContact.valid)("ngClass",a.isDesktop?"btn-send-code desktop":"btn-send-code"),t.xp6(8),t.Q6J("ngIf",a.canUseMail&&a.canUseMobile),t.xp6(1),t.Q6J("ngIf",a.canUseMail&&!a.canUseMobile),t.xp6(1),t.Q6J("ngIf",!a.canUseMail&&a.canUseMobile),t.xp6(6),t.Q6J("formGroup",a.formVerify),t.xp6(1),t.Q6J("ngClass",a.isDesktop?"form-verifica desktop":"form-verifica")}}function J(u,w){if(1&u&&(t.TgZ(0,"div",27)(1,"p"),t._UZ(2,"ion-icon",28),t._uU(3," Inserisci la nuova password per l'account "),t.qZA(),t.TgZ(4,"p")(5,"ion-text",0),t._uU(6),t.qZA()(),t.TgZ(7,"form",10)(8,"ion-list")(9,"ion-item"),t._UZ(10,"ion-icon",29)(11,"ion-input",30),t.qZA(),t.TgZ(12,"ion-item"),t._UZ(13,"ion-icon",29)(14,"ion-input",31),t.qZA()()()()),2&u){const a=t.oxw();t.xp6(6),t.hij(" ",a.descrUtente,""),t.xp6(1),t.Q6J("formGroup",a.formPsw)}}function Q(u,w){if(1&u){const a=t.EpF();t.TgZ(0,"div")(1,"ion-button",32),t.NdJ("click",function(){return t.CHM(a),t.oxw().onClickVerifica()}),t._uU(2,"Verifica"),t.qZA()()}if(2&u){const a=t.oxw();t.xp6(1),t.Q6J("disabled",!a.formVerify.valid)}}function q(u,w){if(1&u){const a=t.EpF();t.TgZ(0,"div")(1,"ion-button",32),t.NdJ("click",function(){return t.CHM(a),t.oxw().onClickCambia()}),t._uU(2,"Cambia Password"),t.qZA()()}if(2&u){const a=t.oxw();t.xp6(1),t.Q6J("disabled",!a.formPsw.valid)}}let G=(()=>{class u{constructor(a,r,g,C,A){this.modalController=a,this.startService=r,this.loadingController=g,this.toastController=C,this.cryptoService=A,this.canUseMail=!1,this.canUseMobile=!1,this.PageState=T,this.stato=T.richiestaCodice,this.docRichiestaCodici=new c.lA,this.docVerifica=new c.Rx,this.idUtente="",this.descrUtente=""}ngOnInit(){this.startConfig=this.startService.actualStartConfig,this.canUseMail=this.startConfig.gruppo.APPTIPOVERIFICA==I.Xo.noverifica||this.startConfig.gruppo.APPTIPOVERIFICA==I.Xo.verificaemail||this.startConfig.gruppo.APPTIPOVERIFICA==I.Xo.verificaemailsms,this.canUseMobile=this.startConfig.gruppo.APPTIPOVERIFICA==I.Xo.verificaemailsms||this.startConfig.gruppo.APPTIPOVERIFICA==I.Xo.verificasms,this.createVerifyForm(),this.createContactForm(),this.createPswForm()}close(){this.modalController.dismiss()}get isDesktop(){return this.startService.isDesktop}getPlaceHolder(){let a="";return this.canUseMail&&this.canUseMobile?a="Email o Cellulare":this.canUseMail&&!this.canUseMobile?a="Email":!this.canUseMail&&this.canUseMobile&&(a="Cellulare"),a}createVerifyForm(){this.formVerify=new d.cw({c1:new d.NI(null,{updateOn:"change",validators:[d.kI.required,d.kI.maxLength(1),d.kI.minLength(1)]}),c2:new d.NI(null,{updateOn:"change",validators:[d.kI.required,d.kI.maxLength(1),d.kI.minLength(1)]}),c3:new d.NI(null,{updateOn:"change",validators:[d.kI.required,d.kI.maxLength(1),d.kI.minLength(1)]}),c4:new d.NI(null,{updateOn:"change",validators:[d.kI.required,d.kI.maxLength(1),d.kI.minLength(1)]}),c5:new d.NI(null,{updateOn:"change",validators:[d.kI.required,d.kI.maxLength(1),d.kI.minLength(1)]})})}createContactForm(){let a=[d.kI.required];this.canUseMail&&this.canUseMobile||(this.canUseMail?a.push(d.kI.email):this.canUseMobile&&a.push(d.kI.pattern(/^(\+\d{1,3}[- ]?)?\d{10}$/))),this.formContact=new d.cw({contatto:new d.NI(null,{updateOn:"change",validators:a})})}createPswForm(){this.formPsw=new d.cw({psw:new d.NI(null,{updateOn:"change",validators:[d.kI.required]}),confirmPsw:new d.NI(null,{updateOn:"change",validators:[d.kI.required]})},this.pswValidator)}pswValidator(a){if(a.get("confirmPsw").value!=a.get("psw").value)return{invalid:!0}}changeFocus(a){switch(a.target.id){case"1":this.c2.setFocus();break;case"2":this.c3.setFocus();break;case"3":this.c4.setFocus();break;case"4":this.c5.setFocus()}}onClickInviaCodice(){this.sendServerRichiestaCodici()}onClickVerifica(){let a=!0,r="";this.docRichiestaCodici&&this.docRichiestaCodici.IDREFER&&0!=this.docRichiestaCodici.IDREFER.length?(this.docVerifica=new c.Rx,this.docVerifica.IDREFER=this.docRichiestaCodici.IDREFER,this.docVerifica.IDAREA=this.docRichiestaCodici.IDAREA,this.docRichiestaCodici.REQUESTEMAILCODE?this.docVerifica.EMAILPINCODE=this.getInputPin():this.docRichiestaCodici.REQUESTSMSCODE?this.docVerifica.SMSPINCODE=this.getInputPin():(a=!1,r="C'\xe8 stato un problema, richiedi un nuovo codice")):(a=!1,r="C'\xe8 stato un problema, richiedi un nuovo codice"),a?this.sendServerVerificaCodici():this.showMessage(r)}onClickCambia(){let a=this.docRichiestaCodici,r=new E.oD,g="",C="",A=[];r.ID=this.idUtente,g=this.formPsw.value.psw,C=g,A=this.cryptoService.mySplitPassword(C),A?(a.TOKEN=A[0],r.INPUTPASSWORD=A[1],r.SHAPASSWORD="",this.sendServerFinalize(r,a)):this.showMessage("Password non utilizzabile")}sendServerRichiestaCodici(){this.loadingController.create({message:"Invio codice in corso...",spinner:"circular",backdropDismiss:!0}).then(a=>{let r;a.present(),r=this.formContact.value.contatto,r.includes("@")?(this.docRichiestaCodici.EMAIL=r,this.docRichiestaCodici.TELEPHONE="",this.docRichiestaCodici.REQUESTEMAILCODE=!0,this.docRichiestaCodici.REQUESTSMSCODE=!1):(this.docRichiestaCodici.TELEPHONE=r,this.docRichiestaCodici.EMAIL="",this.docRichiestaCodici.REQUESTSMSCODE=!0,this.docRichiestaCodici.REQUESTEMAILCODE=!1),this.docRichiestaCodici.USE=I.I4.forRecovery,this.docRichiestaCodici.IDAREA=this.startService.areaSelectedValue.ID,this.startService.recoverySendCodici(this.docRichiestaCodici).then(g=>{a.dismiss(),g.result?(this.showMessage(g.message),this.docRichiestaCodici.IDREFER=g.idRefer):(this.showMessage(g.message),this.docRichiestaCodici.IDREFER="",R.M.consoleLog(g.message))}).catch(g=>{a.dismiss(),R.M.consoleLog(g,"error"),this.showMessage("Errore di connessione"),this.docRichiestaCodici.IDREFER=""})})}sendServerVerificaCodici(){this.docVerifica&&this.loadingController.create({message:"Verifica in corso...",spinner:"circular",backdropDismiss:!0}).then(a=>{a.present(),this.startService.recoveryVerifyCodici(this.docVerifica).then(r=>{a.dismiss(),r.result?(this.idUtente=r.idRefer,this.descrUtente=r.descrRefer,this.stato=T.cambioPsw,this.showMessage("Codice di verifica valido")):(this.idUtente="",this.showMessage("Codice di verifica non valido"))}).catch(r=>{a.dismiss(),this.idUtente="",R.M.consoleLog(r,"error"),this.showMessage("Errore di connessione")})})}sendServerFinalize(a,r){this.loadingController.create({message:"Cambio password",spinner:"circular",backdropDismiss:!0}).then(g=>{g.present(),this.startService.recoveryFinalize(a,r).then(C=>{g.dismiss(),C.result?(this.showMessage("Modifica della password confermata"),this.modalController.dismiss()):(this.showMessage(C.message),R.M.consoleLog(C.message))}).catch(C=>{g.dismiss(),R.M.consoleLog(C,"error"),this.showMessage("Errore di connessione")})})}showMessage(a){return(0,m.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:a,duration:3e3})).present()})}getInputPin(){return this.formVerify.value.c1+this.formVerify.value.c2+this.formVerify.value.c3+this.formVerify.value.c4+this.formVerify.value.c5}}return u.\u0275fac=function(a){return new(a||u)(t.Y36(i.IN),t.Y36(x.D),t.Y36(i.HT),t.Y36(i.yF),t.Y36(l.$))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-psw-recovery"]],viewQuery:function(a,r){if(1&a&&(t.Gf(M,5),t.Gf(S,5),t.Gf(U,5),t.Gf(k,5),t.Gf(b,5)),2&a){let g;t.iGM(g=t.CRH())&&(r.c1=g.first),t.iGM(g=t.CRH())&&(r.c2=g.first),t.iGM(g=t.CRH())&&(r.c3=g.first),t.iGM(g=t.CRH())&&(r.c4=g.first),t.iGM(g=t.CRH())&&(r.c5=g.first)}},decls:15,vars:6,consts:[["color","primary"],["slot","end"],[3,"click"],["name","close"],[3,"ngClass"],[3,"src"],["class","ion-padding-horizontal ion-text-center",4,"ngIf"],["class","ion-padding div-psw",4,"ngIf"],[4,"ngIf"],[1,"ion-padding-horizontal","ion-text-center"],[3,"formGroup"],["slot","start","name","at-outline"],["type","text","formControlName","contatto",3,"placeholder"],["color","primary",3,"disabled","ngClass","click"],[1,"ion-no-padding","div-message"],["name","information-circle-outline"],["color","danger"],["clearOnEdit","","type","tel","inputmode","numeric","minlength","1","maxlength","1","formControlName","c1","id","1",1,"ion-no-padding","ion-align-self-center",3,"ionInput"],["c1",""],["clearOnEdit","","type","tel","inputmode","numeric","minlength","1","maxlength","1","formControlName","c2","id","2",1,"ion-no-padding","ion-align-self-center",3,"ionInput"],["c2",""],["clearOnEdit","","type","tel","inputmode","numeric","minlength","1","maxlength","1","formControlName","c3","id","3",1,"ion-no-padding","ion-align-self-center",3,"ionInput"],["c3",""],["clearOnEdit","","type","tel","inputmode","numeric","minlength","1","maxlength","1","formControlName","c4","id","4",1,"ion-no-padding","ion-align-self-center",3,"ionInput"],["c4",""],["clearOnEdit","","type","tel","inputmode","numeric","minlength","1","maxlength","1","formControlName","c5","id","5",1,"ion-no-padding","ion-align-self-center",3,"ionInput"],["c5",""],[1,"ion-padding","div-psw"],["color","primary","name","information-circle-outline"],["slot","start","name","lock-closed-outline"],["placeholder","Nuova password","type","password","inputmode","password","formControlName","psw"],["placeholder","Conferma Password","type","password","inputmode","password","formControlName","confirmPsw"],["color","primary","expand","block",3,"disabled","click"]],template:function(a,r){1&a&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3,"Recupero password"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){return r.close()}),t._UZ(6,"ion-icon",3),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"div",4),t._UZ(9,"img",5),t.qZA(),t.YNc(10,D,34,9,"div",6),t.YNc(11,J,15,2,"div",7),t.qZA(),t.TgZ(12,"ion-footer"),t.YNc(13,Q,3,1,"div",8),t.YNc(14,q,3,1,"div",8),t.qZA()),2&a&&(t.xp6(8),t.Q6J("ngClass",r.isDesktop?"ion-text-center div-logo desktop":"ion-text-center div-logo"),t.xp6(1),t.Q6J("src",r.startConfig.getUrlLogo(),t.LSH),t.xp6(1),t.Q6J("ngIf",r.stato==r.PageState.richiestaCodice),t.xp6(1),t.Q6J("ngIf",r.stato==r.PageState.cambioPsw),t.xp6(2),t.Q6J("ngIf",r.stato==r.PageState.richiestaCodice),t.xp6(1),t.Q6J("ngIf",r.stato==r.PageState.cambioPsw))},directives:[i.Gu,i.sr,i.wd,i.Sm,i.YG,i.gu,i.W2,_.mk,_.O5,d._Y,d.JL,d.sg,i.Ie,i.pK,i.j9,d.JJ,d.u,i.yW,i.cJ,i.QI,d.wO,d.nD,i.q_,i.fr],styles:["div.div-logo[_ngcontent-%COMP%]{background-color:#fff;padding-top:3vh;padding-bottom:3vh;margin-bottom:3vh}div.div-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15vh}div.div-logo.desktop[_ngcontent-%COMP%]{margin-bottom:0vh}div.div-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}div.div-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}div.form-verifica[_ngcontent-%COMP%]{width:320px;margin:auto;margin-bottom:8vh;text-align:center}div.form-verifica[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{background:white}div.form-verifica[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{display:inline;border-radius:15px;margin:2px;border:3px solid var(--ion-color-primary);text-align:center;font-family:Arial,Helvetica,sans-serif;color:var(--ion-color-medium);font-size:40px}div.form-verifica.desktop[_ngcontent-%COMP%]{margin-bottom:2vh}ion-button.btn-send-code[_ngcontent-%COMP%]{margin-top:5vh;margin-bottom:5vh}ion-button.btn-send-code.desktop[_ngcontent-%COMP%]{margin-top:3vh;margin-bottom:1vh}div.ion-padding[_ngcontent-%COMP%]{margin-top:5vh}div.div-psw[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),u})();var T=(()=>{return(u=T||(T={}))[u.richiestaCodice=10]="richiestaCodice",u[u.cambioPsw=20]="cambioPsw",T;var u})()}}]);