"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[699],{699:(R,d,s)=>{s.r(d),s.d(d,{EditAccountPageModule:()=>q});var c=s(9808),n=s(4182),f=s(378),a=s(7026),p=s(2028),A=s(5351),u=s(4021),Z=s(6962),N=s(7181),h=s(1799),v=s(1902),g=s(9129),t=s(2096),T=s(2058);function O(i,r){if(1&i&&(t.TgZ(0,"ion-select-option",27),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.description," ")}}function C(i,r){1&i&&(t.TgZ(0,"ion-item")(1,"ion-label",6),t._uU(2,"Cap"),t.qZA(),t._UZ(3,"ion-input",28),t.qZA())}function I(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateTel()}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-badge",30),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.utente.MOBILENUMBER?e.utente.MOBILENUMBER:"Non definito"),t.xp6(2),t.Oqu(e.utente.getLabelVerificaMobile())}}function E(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateEmail()}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-badge",30),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.utente.EMAIL?e.utente.EMAIL:"Non definita"),t.xp6(2),t.Oqu(e.utente.getLabelVerificaMail())}}function U(i,r){1&i&&(t.TgZ(0,"ion-item")(1,"ion-label",6),t._uU(2,"Cellulare"),t.qZA(),t._UZ(3,"ion-input",31),t.qZA())}function _(i,r){1&i&&(t.TgZ(0,"ion-item")(1,"ion-label",6),t._uU(2,"E-Mail"),t.qZA(),t._UZ(3,"ion-input",32),t.qZA())}const M=[{path:"",component:(()=>{class i{constructor(e,o,l,m,b){this.startService=e,this.navCtr=o,this.toastCtr=l,this.loadingController=m,this.modalController=b,this.utente=new A.oD,this.listSesso=[],this.docGruppo=new v.w,this.showCapNascita=!1,this.utenteListen=this.startService.utente.subscribe(y=>{this.utente=y,null==this.utente.MOBILENUMBER&&(this.utente.MOBILENUMBER=""),this.createForm()}),this.listSesso=u.Gs.getArray(u._z)}ngOnInit(){this.today=N.GA.formatDateISO(new Date),this.docGruppo=this.startService.actualStartConfig.gruppo}ngOnDestroy(){this.utenteListen&&this.utenteListen.unsubscribe()}createForm(){if(this.form=new n.cw({nome:new n.NI(this.utente.NOME,{updateOn:"change",validators:[n.kI.required]}),cognome:new n.NI(this.utente.COGNOME,{updateOn:"change",validators:[n.kI.required]}),sesso:new n.NI(this.utente.SESSO,{updateOn:"change",validators:[]}),provNascita:new n.NI(this.utente.NATOPROV,{updateOn:"change",validators:[]}),comNascita:new n.NI(this.utente.NATOA,{updateOn:"change",validators:[]}),statoNascita:new n.NI(this.utente.NATOISOSTATO,{updateOn:"change",validators:[]}),capNascita:new n.NI(this.utente.NATOCAP,{updateOn:"change",validators:[]}),provResidenza:new n.NI(this.utente.PROVINCIA,{updateOn:"change",validators:[]}),comResidenza:new n.NI(this.utente.COMUNE,{updateOn:"change",validators:[]}),indResidenza:new n.NI(this.utente.INDIRIZZO,{updateOn:"change",validators:[]}),capResidenza:new n.NI(this.utente.CAP,{updateOn:"change",validators:[]}),statoResidenza:new n.NI(this.utente.ISOSTATO,{updateOn:"change",validators:[]}),cf:new n.NI(this.utente.CODICEFISCALE,{updateOn:"change",validators:[n.kI.pattern("^[A-Za-z]{6}[0-9]{2}[A-Za-z]{1}[0-9]{2}[A-Za-z]{1}[0-9]{3}[A-Za-z]{1}")]})}),!this.docGruppo.needMobileVerify){let o=new n.NI(this.utente.MOBILENUMBER,{updateOn:"change",validators:[]});this.form.addControl("mobile",o)}if(!this.docGruppo.needEmailVerify){let o=new n.NI(this.utente.EMAIL,{updateOn:"change",validators:[n.kI.email]});this.form.addControl("email",o)}}onSubmit(){this.form.valid?(this.utente.NOME=this.form.value.nome,this.utente.COGNOME=this.form.value.cognome,this.utente.SESSO=this.form.value.sesso,this.utente.CODICEFISCALE=this.form.value.cf,this.utente.INDIRIZZO=this.form.value.indResidenza,this.utente.COMUNE=this.form.value.comResidenza,this.utente.CAP=this.form.value.capResidenza,this.utente.PROVINCIA=this.form.value.provResidenza,this.utente.ISOSTATO=this.form.value.statoResidenza,this.utente.NATOA=this.form.value.comNascita,this.utente.NATOCAP=this.form.value.capNascita,this.utente.NATOPROV=this.form.value.provNascita,this.utente.NATOISOSTATO=this.form.value.statoNascita,this.docGruppo.needEmailVerify||(this.utente.EMAIL=this.form.value.email),this.docGruppo.needMobileVerify||(this.utente.MOBILENUMBER=this.form.value.mobile),this.loadingController.create({message:"Aggiornamento dati...",spinner:"circular"}).then(e=>{e.present(),this.startService.updateUtente(this.utente).then(o=>{e.dismiss(),this.showMessage("Info Aggiornate"),this.closePage()},o=>{e.dismiss(),this.showMessage("Errore  di connessione"),g.M.consoleLog(o,"error")})})):this.startService.presentToastMessage("Alcune informazioni sono errate")}onCfChange(){let e=this.form.value.cf;null!=e&&null!=e&&0!=e.length&&this.startService.checkCodiceFiscale(e,!0).then(o=>{this.utente.NATOISOSTATO="Italia",this.utente.NATOA=o.comune,this.utente.NATOPROV=o.provincia,this.utente.NATOIL=o.dataNascita,this.utente.SESSO=o.sesso,this.utente.NATOCAP=o.cap,this.form.get("comNascita").setValue(this.utente.NATOA),this.form.get("provNascita").setValue(this.utente.NATOPROV),this.form.get("sesso").setValue(this.utente.SESSO),this.form.get("statoNascita").setValue(this.utente.NATOISOSTATO),this.form.get("capNascita").setValue(this.utente.NATOCAP),this.form.controls.cf.setErrors(null)}).catch(o=>{this.form.controls.cf.setErrors({incorrect:!0}),g.M.consoleLog(o,"error")})}closePage(){this.navCtr.navigateBack(["/","account"])}showMessage(e){this.toastCtr.create({message:e,duration:3e3}).then(o=>{o.present()})}validateTel(){this.modalController.create({component:h.I,componentProps:{params:{tipoVerifica:u.Xo.verificasms,updateDocUtente:!1}}}).then(e=>{e.present()})}validateEmail(){this.modalController.create({component:h.I,componentProps:{params:{tipoVerifica:u.Xo.verificaemail,updateDocUtente:!1}}}).then(e=>{e.present()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.D),t.Y36(a.SH),t.Y36(a.yF),t.Y36(a.HT),t.Y36(a.IN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-account"]],decls:87,vars:8,consts:[["color","primary"],["slot","start"],["defaultHref","/account"],[3,"formGroup"],["sticky","true","color","light"],["name","person-outline","slot","end","color","primary"],["slot","start","position","fixed"],["formControlName","nome"],["formControlName","cognome"],["formControlName","sesso","interface","popover"],[3,"value",4,"ngFor","ngForOf"],["formControlName","cf",3,"ionBlur"],["name","home-outline","slot","end","color","primary"],["formControlName","indResidenza"],["formControlName","comResidenza"],["type","tel","inputmode","tel","maxlength","5","formControlName","capResidenza"],["formControlName","provResidenza"],["formControlName","statoResidenza"],["name","logo-reddit","slot","end","color","primary"],["title","Data di nascita","label","Nato il",3,"actualDate","actualDateChange"],["formControlName","comNascita"],[4,"ngIf"],["formControlName","provNascita"],["formControlName","statoNascita"],["name","call-outline","slot","end","color","primary"],["button","",3,"click",4,"ngIf"],["color","tertiary","expand","block",3,"click"],[3,"value"],["formControlName","capNascita","type","tel","inputmode","tel","maxlength","5"],["button","",3,"click"],["color","success"],["formControlName","mobile"],["formControlName","email"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Qualcosa su di te"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"form",3)(8,"ion-list")(9,"ion-item-group")(10,"ion-item-divider",4),t._UZ(11,"ion-icon",5),t.TgZ(12,"ion-label"),t._uU(13,"Come ti chiami ?"),t.qZA()(),t.TgZ(14,"ion-item")(15,"ion-label",6),t._uU(16,"Nome"),t.qZA(),t._UZ(17,"ion-input",7),t.qZA(),t.TgZ(18,"ion-item")(19,"ion-label",6),t._uU(20,"Cognome"),t.qZA(),t._UZ(21,"ion-input",8),t.qZA(),t.TgZ(22,"ion-item")(23,"ion-label",6),t._uU(24,"Sesso"),t.qZA(),t.TgZ(25,"ion-select",9),t.YNc(26,O,2,2,"ion-select-option",10),t.qZA()(),t.TgZ(27,"ion-item")(28,"ion-label",6),t._uU(29,"Cod. fiscale"),t.qZA(),t.TgZ(30,"ion-input",11),t.NdJ("ionBlur",function(){return o.onCfChange()}),t.qZA()()(),t.TgZ(31,"ion-item-group")(32,"ion-item-divider",4),t._UZ(33,"ion-icon",12),t.TgZ(34,"ion-label"),t._uU(35,"Dove vivi ?"),t.qZA()(),t.TgZ(36,"ion-item")(37,"ion-label",6),t._uU(38,"Indirizzo"),t.qZA(),t._UZ(39,"ion-input",13),t.qZA(),t.TgZ(40,"ion-item")(41,"ion-label",6),t._uU(42,"Comune"),t.qZA(),t._UZ(43,"ion-input",14),t.qZA(),t.TgZ(44,"ion-item")(45,"ion-label",6),t._uU(46,"Cap"),t.qZA(),t._UZ(47,"ion-input",15),t.qZA(),t.TgZ(48,"ion-item")(49,"ion-label",6),t._uU(50,"Provincia"),t.qZA(),t._UZ(51,"ion-input",16),t.qZA(),t.TgZ(52,"ion-item")(53,"ion-label",6),t._uU(54,"Stato"),t.qZA(),t._UZ(55,"ion-input",17),t.qZA()(),t.TgZ(56,"ion-item-group")(57,"ion-item-divider",4),t._UZ(58,"ion-icon",18),t.TgZ(59,"ion-label"),t._uU(60,"Quando sei nato ?"),t.qZA()(),t.TgZ(61,"app-dtinput",19),t.NdJ("actualDateChange",function(m){return o.utente.NATOIL=m}),t.qZA(),t.TgZ(62,"ion-item")(63,"ion-label",6),t._uU(64,"Comune"),t.qZA(),t._UZ(65,"ion-input",20),t.qZA(),t.YNc(66,C,4,0,"ion-item",21),t.TgZ(67,"ion-item")(68,"ion-label",6),t._uU(69,"Provincia"),t.qZA(),t._UZ(70,"ion-input",22),t.qZA(),t.TgZ(71,"ion-item")(72,"ion-label",6),t._uU(73,"Stato"),t.qZA(),t._UZ(74,"ion-input",23),t.qZA()(),t.TgZ(75,"ion-item-group")(76,"ion-item-divider",4),t._UZ(77,"ion-icon",24),t.TgZ(78,"ion-label"),t._uU(79,"Cellulare e Email"),t.qZA()(),t.YNc(80,I,5,2,"ion-item",25),t.YNc(81,E,5,2,"ion-item",25),t.YNc(82,U,4,0,"ion-item",21),t.YNc(83,_,4,0,"ion-item",21),t.qZA()()()(),t.TgZ(84,"ion-footer")(85,"ion-button",26),t.NdJ("click",function(){return o.onSubmit()}),t._uU(86," Conferma "),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(19),t.Q6J("ngForOf",o.listSesso),t.xp6(35),t.Q6J("actualDate",o.utente.NATOIL),t.xp6(5),t.Q6J("ngIf",o.showCapNascita),t.xp6(14),t.Q6J("ngIf",o.docGruppo.needMobileVerify),t.xp6(1),t.Q6J("ngIf",o.docGruppo.needEmailVerify),t.xp6(1),t.Q6J("ngIf",!o.docGruppo.needMobileVerify),t.xp6(1),t.Q6J("ngIf",!o.docGruppo.needEmailVerify))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.W2,n._Y,n.JL,n.sg,a.q_,a.Ub,a.rH,a.gu,a.Q$,a.Ie,a.pK,a.j9,n.JJ,n.u,a.t9,a.QI,c.sg,a.n0,n.nD,T.V,c.O5,a.yp,a.fr,a.YG],styles:["ion-item-divider[_ngcontent-%COMP%]{--padding-top: 5px;--padding-bottom: 5px;--padding-end: 10px}form[_ngcontent-%COMP%]{padding-bottom:30px}"]}),i})()}];let S=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.Bz.forChild(M)],p.Bz]}),i})();var P=s(933);let q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,n.u5,a.Pc,S,n.UX,f.VerifyPageModule,P.q]]}),i})()}}]);