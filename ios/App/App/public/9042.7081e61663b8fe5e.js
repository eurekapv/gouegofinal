"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9042],{9042:(Q,p,l)=>{l.r(p),l.d(p,{AgendaTrainerDetailPageModule:()=>J});var g=l(9808),d=l(4182),o=l(7026),_=l(2028),u=l(5439),f=l(9129),T=l(9442),m=l(4021),P=l(6962),e=l(2096);function h(n,a){if(1&n){const i=e.EpF();e.TgZ(0,"ion-toolbar",20)(1,"ion-segment",21),e.NdJ("ngModelChange",function(r){return e.CHM(i),e.oxw().selectedSegment=r})("ionChange",function(r){return e.CHM(i),e.oxw().onChangeSegment(r)}),e.TgZ(2,"ion-segment-button",22),e._UZ(3,"ion-icon",23),e.TgZ(4,"ion-label"),e._uU(5,"Tutti presenti"),e.qZA()(),e.TgZ(6,"ion-segment-button",24),e._UZ(7,"ion-icon",25),e.TgZ(8,"ion-label"),e._uU(9,"Tutti assenti"),e.qZA()()()()}if(2&n){const i=e.oxw();e.xp6(1),e.Q6J("disabled",!i.selectedPianificazione.canUpdatePresenze(i.gapAggiornamentoPresenze))("ngModel",i.selectedSegment)}}function A(n,a){1&n&&e._UZ(0,"ion-icon",32)}function E(n,a){1&n&&e._UZ(0,"ion-icon",33)}function z(n,a){1&n&&e._UZ(0,"ion-icon",34)}function C(n,a){if(1&n&&(e.TgZ(0,"h4"),e._uU(1," Certificato medico: "),e.TgZ(2,"ion-badge",35),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&n){const i=e.oxw().$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("color",t.getColoreCertificato(i)),e.xp6(1),e.hij(" ",i.DATACERTIFICATOMEDICO?e.xi3(4,2,i.DATACERTIFICATOMEDICO,"dd/MM/yyyy"):"Non consegnato"," ")}}function Z(n,a){if(1&n&&(e.TgZ(0,"ion-badge",36),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.Q6J("color",i.PRESENTE?"primary":"danger"),e.xp6(1),e.hij(" ",i.PRESENTE?"Presente":"Assente"," ")}}function I(n,a){if(1&n){const i=e.EpF();e.TgZ(0,"ion-item",27),e.NdJ("click",function(){const s=e.CHM(i).$implicit,c=e.oxw(2);return c.selectedPianificazione.canUpdatePresenze(c.gapAggiornamentoPresenze)?c.onClickElement(s):{}}),e.YNc(1,A,1,0,"ion-icon",28),e.YNc(2,E,1,0,"ion-icon",29),e.YNc(3,z,1,0,"ion-icon",30),e.TgZ(4,"ion-label")(5,"h2"),e._uU(6),e.qZA(),e.YNc(7,C,5,5,"h4",13),e.qZA(),e.YNc(8,Z,2,2,"ion-badge",31),e.qZA()}if(2&n){const i=a.$implicit,t=e.oxw(2);e.Q6J("button",t.selectedPianificazione.canUpdatePresenze(t.gapAggiornamentoPresenze)),e.xp6(1),e.Q6J("ngIf",1==i.PRESENTE),e.xp6(1),e.Q6J("ngIf",0==i.PRESENTE),e.xp6(1),e.Q6J("ngIf",1!=i.PRESENTE&&0!=i.PRESENTE),e.xp6(3),e.Oqu(i.NOMINATIVO),e.xp6(1),e.Q6J("ngIf",t.tipoSocieta==t.TipoSocieta.sportiva),e.xp6(1),e.Q6J("ngIf",null!=i.PRESENTE&&null!=i.PRESENTE&&t.isDesktop)}}function N(n,a){if(1&n&&(e.TgZ(0,"ion-item-group")(1,"ion-item-divider",15)(2,"ion-label"),e._uU(3," Partecipanti "),e.qZA()(),e.YNc(4,I,9,7,"ion-item",26),e.qZA()),2&n){const i=e.oxw();e.xp6(4),e.Q6J("ngForOf",i.listPresenzeConfermate)}}function x(n,a){1&n&&e._UZ(0,"ion-icon",32)}function O(n,a){1&n&&e._UZ(0,"ion-icon",33)}function D(n,a){1&n&&e._UZ(0,"ion-icon",34)}function S(n,a){if(1&n&&(e.TgZ(0,"h4"),e._uU(1," Certificato medico: "),e.TgZ(2,"ion-badge",35),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&n){const i=e.oxw().$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("color",t.getColoreCertificato(i)),e.xp6(1),e.hij(" ",i.DATACERTIFICATOMEDICO?e.xi3(4,2,i.DATACERTIFICATOMEDICO,"dd/MM/yyyy"):"Non consegnato"," ")}}function M(n,a){if(1&n&&(e.TgZ(0,"ion-badge",36),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.Q6J("color",i.PRESENTE?"primary":"danger"),e.xp6(1),e.hij(" ",i.PRESENTE?"Presente":"Assente"," ")}}function b(n,a){if(1&n){const i=e.EpF();e.TgZ(0,"ion-item",27),e.NdJ("click",function(){const s=e.CHM(i).$implicit,c=e.oxw(2);return c.selectedPianificazione.canUpdatePresenze(c.gapAggiornamentoPresenze)?c.onClickElement(s):{}}),e.YNc(1,x,1,0,"ion-icon",28),e.YNc(2,O,1,0,"ion-icon",29),e.YNc(3,D,1,0,"ion-icon",30),e.TgZ(4,"ion-label")(5,"h2"),e._uU(6),e.qZA(),e.YNc(7,S,5,5,"h4",13),e.qZA(),e.YNc(8,M,2,2,"ion-badge",31),e.qZA()}if(2&n){const i=a.$implicit,t=e.oxw(2);e.Q6J("button",t.selectedPianificazione.canUpdatePresenze(t.gapAggiornamentoPresenze)),e.xp6(1),e.Q6J("ngIf",1==i.PRESENTE),e.xp6(1),e.Q6J("ngIf",0==i.PRESENTE),e.xp6(1),e.Q6J("ngIf",1!=i.PRESENTE&&0!=i.PRESENTE),e.xp6(3),e.Oqu(i.NOMINATIVO),e.xp6(1),e.Q6J("ngIf",t.tipoSocieta==t.TipoSocieta.sportiva),e.xp6(1),e.Q6J("ngIf",null!=i.PRESENTE&&null!=i.PRESENTE&&t.isDesktop)}}function v(n,a){if(1&n&&(e.TgZ(0,"ion-item-group")(1,"ion-item-divider",15)(2,"ion-label"),e._uU(3," Provvisori "),e.qZA()(),e.YNc(4,b,9,7,"ion-item",26),e.qZA()),2&n){const i=e.oxw();e.xp6(4),e.Q6J("ngForOf",i.listPresenzeInProva)}}function R(n,a){if(1&n&&(e.TgZ(0,"ion-item-group",14)(1,"ion-item-divider",15)(2,"ion-label"),e._uU(3," Note dalla segreteria "),e.qZA()(),e.TgZ(4,"ion-item"),e._UZ(5,"ion-icon",16),e.TgZ(6,"ion-label",10)(7,"p"),e._uU(8),e.qZA()()()()),2&n){const i=e.oxw();e.xp6(8),e.hij(" ",i.selectedPianificazione.NOTEADMIN," ")}}const U=[{path:"",component:(()=>{class n{constructor(i,t,r,s,c,w){this.activatedRoute=i,this.navController=t,this.startService=r,this.toastController=s,this.loadingController=c,this.alertController=w,this.listPresenze=[],this.listPresenzeConfermate=[],this.listPresenzeInProva=[],this.selectedPianificazione=new T.N,this.TipoSocieta=m.bI,this.showTabs=!0,this.selectedSegment=null,this.tipoSocieta=this.startService.actualStartConfig.gruppo.TIPOGRUPPO,this.isDesktop=r.isDesktop,this.gapAggiornamentoPresenze=r.areaSelectedValue.APPGAPOREPRESENZE}ngOnInit(){this.activatedRoute.paramMap.subscribe(i=>{this.idPianificazione=i.params.pianificazioneCorsoId,this.startService.getPianificazioneTrainerById(this.idPianificazione)?this.selectedPianificazione=this.startService.getPianificazioneTrainerById(this.idPianificazione):this.navController.navigateRoot("/home"),this.idCorso=this.selectedPianificazione.IDCORSO,this.startService.insertPresenzeIntoPianificazione(this.selectedPianificazione).then(()=>{this.listPresenze=this.selectedPianificazione.CORSOPRESENZE,this.dividiIscrizioni()})})}onClickElement(i){i.PRESENTE=null==i.PRESENTE||null==i.PRESENTE||!i.PRESENTE,this.selectedSegment=this.tuttiPresenti?"presente":this.tuttiAssenti?"assente":null}onSubmit(){this.selectedPianificazione.isModified(2)?this.loadingController.create({message:"Caricamento",spinner:"circular",backdropDismiss:!0}).then(i=>{i.present(),this.startService.requestUpdatePresenze(this.selectedPianificazione).then(t=>{i.dismiss(),t.result?(this.showMessage("Presenze aggiornate"),this.goBack()):(f.M.consoleLog(t),this.showMessage(t.message))}).catch(t=>{i.dismiss(),f.M.consoleLog(t,"error"),this.showMessage("Errore di connessione")})}):this.goBack()}getColoreCertificato(i){let r,t=u(new Date);if(i.DATACERTIFICATOMEDICO){let s=u(i.DATACERTIFICATOMEDICO);r=s<t?"danger":s<t.add(7,"days")?"warning":"primary"}else r="danger";return r}dividiIscrizioni(){this.listPresenzeConfermate=this.listPresenze.filter(i=>i.STATOISCRIZIONE==m.Pm.confermata),this.listPresenzeInProva=this.listPresenze.filter(i=>i.STATOISCRIZIONE==m.Pm.inProva)}showMessage(i){this.toastController.create({message:i,duration:3e3}).then(t=>{t.present()})}onGoBack(){this.selectedPianificazione.isModified(2)?this.alertController.create({header:"Vuoi davvero uscire?",message:"Se esci senza confermare, le presenze non verranno salvate",buttons:[{text:"Esci",handler:()=>{this.goBack()}},{text:"Rimani",role:"cancel"}]}).then(i=>{i.present()}):this.goBack()}goBack(){this.navController.pop().catch(()=>{this.navController.navigateRoot("/home")})}onScroll(i){i.detail.currentY<5?this.showTabs=!0:i.detail.deltaY>20?this.showTabs=!1:i.detail.deltaY<-20&&(this.showTabs=!0)}setAll(i){this.listPresenze.forEach(t=>{t.PRESENTE=i})}onChangeSegment(i){"presente"==i.detail.value?this.setAll(!0):"assente"==i.detail.value&&this.setAll(!1)}get tuttiPresenti(){let i=!0;return this.listPresenze.forEach(t=>{t.PRESENTE||(i=!1)}),i}get tuttiAssenti(){let i=!0;return this.listPresenze.forEach(t=>{t.PRESENTE&&(i=!1)}),i}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(_.gz),e.Y36(o.SH),e.Y36(P.D),e.Y36(o.yF),e.Y36(o.HT),e.Y36(o.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-agenda-trainer-detail"]],decls:45,vars:26,consts:[["color","primary"],["slot","start"],["fill","clear",3,"click"],["name","arrow-back"],["mode","md",4,"ngIf"],["scrolleEvents","",3,"ionScroll"],[2,"height","1vh"],[1,"ion-no-padding","div-header"],["lines","none","color","light"],["slot","start","name","school-outline","color","primary"],[1,"ion-text-wrap"],[1,"ion-padding-horizontal","info"],["name","information-circle-outline","color","primary"],[4,"ngIf"],[1,"notes"],["color","light"],["slot","start","name","pencil-outline"],["placeholder","Inserisci una nota","maxlength","200",3,"disabled","ngModel","ngModelChange"],["class","notes",4,"ngIf"],["color","primary","expand","block",3,"disabled","click"],["mode","md"],["id","segment","color","primary",3,"disabled","ngModel","ngModelChange","ionChange"],["value","presente","fill","outline","layout","icon-start"],["color","primary","name","thumbs-up"],["value","assente","layout","icon-start"],["color","primary","name","thumbs-down"],[3,"button","click",4,"ngFor","ngForOf"],[3,"button","click"],["slot","start","name","thumbs-up-outline","color","primary",4,"ngIf"],["slot","start","name","thumbs-down-outline","color","danger",4,"ngIf"],["slot","start","color","","name","person-circle-outline",4,"ngIf"],["slot","end",3,"color",4,"ngIf"],["slot","start","name","thumbs-up-outline","color","primary"],["slot","start","name","thumbs-down-outline","color","danger"],["slot","start","color","","name","person-circle-outline"],[1,"custom-badge",3,"color"],["slot","end",3,"color"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return t.onGoBack()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Presenze"),e.qZA()(),e.YNc(7,h,10,2,"ion-toolbar",4),e.qZA(),e.TgZ(8,"ion-content",5),e.NdJ("ionScroll",function(s){return t.onScroll(s)}),e._UZ(9,"div",6),e.TgZ(10,"div",7)(11,"ion-item",8),e._UZ(12,"ion-icon",9),e.TgZ(13,"ion-label",10)(14,"h2"),e._uU(15),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"h2"),e._uU(18),e.ALo(19,"date"),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"h1"),e._uU(22),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.ALo(25,"titlecase"),e.ALo(26,"titlecase"),e.qZA()()()(),e.TgZ(27,"div",11)(28,"p"),e._UZ(29,"ion-icon",12),e._uU(30),e.qZA()(),e.TgZ(31,"ion-list"),e.YNc(32,N,5,1,"ion-item-group",13),e.YNc(33,v,5,1,"ion-item-group",13),e.TgZ(34,"ion-item-group",14)(35,"ion-item-divider",15)(36,"ion-label"),e._uU(37," Note per la segreteria "),e.qZA()(),e.TgZ(38,"ion-item"),e._UZ(39,"ion-icon",16),e.TgZ(40,"ion-textarea",17),e.NdJ("ngModelChange",function(s){return t.selectedPianificazione.NOTETRAINER=s}),e.qZA()()(),e.YNc(41,R,9,1,"ion-item-group",18),e.qZA()(),e.TgZ(42,"ion-footer")(43,"ion-button",19),e.NdJ("click",function(){return t.onSubmit()}),e._uU(44," Conferma "),e.qZA()()),2&i&&(e.xp6(7),e.Q6J("ngIf",t.showTabs),e.xp6(8),e.Oqu(e.xi3(16,13,t.selectedPianificazione.DATAORAINIZIO,"EEEE dd/MM/yyyy ")),e.xp6(3),e.AsE("",e.xi3(19,16,t.selectedPianificazione.DATAORAINIZIO,"H.mm")," - ",e.xi3(20,19,t.selectedPianificazione.DATAORAFINE,"H.mm"),""),e.xp6(4),e.Oqu(t.selectedPianificazione._DENOMINAZIONE_Corso),e.xp6(2),e.Oqu(e.lcZ(25,22,t.selectedPianificazione._DENOMINAZIONE_Location)+" - "+e.lcZ(26,24,t.selectedPianificazione._DENOMINAZIONE_Campo)),e.xp6(6),e.hij(" ",t.selectedPianificazione.msgCanUpdatePresenze(t.gapAggiornamentoPresenze)," "),e.xp6(2),e.Q6J("ngIf",t.listPresenzeConfermate.length>0),e.xp6(1),e.Q6J("ngIf",t.listPresenzeInProva.length>0),e.xp6(7),e.Q6J("disabled",!t.selectedPianificazione.canUpdatePresenze(t.gapAggiornamentoPresenze))("ngModel",t.selectedPianificazione.NOTETRAINER),e.xp6(1),e.Q6J("ngIf",t.selectedPianificazione.NOTEADMIN&&t.selectedPianificazione.NOTEADMIN.length>0),e.xp6(2),e.Q6J("disabled",!t.selectedPianificazione.canUpdatePresenze(t.gapAggiornamentoPresenze)))},directives:[o.Gu,o.sr,o.Sm,o.YG,o.gu,o.wd,g.O5,o.cJ,o.QI,d.JJ,d.On,o.GO,o.Q$,o.W2,o.Ie,o.q_,o.Ub,o.rH,g.sg,o.yp,o.g2,o.j9,d.nD,o.fr],pipes:[g.uU,g.rS],styles:["div.div-header[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{margin-right:15px;font-size:50px}ion-badge.custom-badge[_ngcontent-%COMP%]{font-size:10px;padding:3px;display:ruby-base;margin-left:8px}ion-item-group[_ngcontent-%COMP%]{padding:10px}div.info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:gray;font-size:12px;margin-bottom:0;font-style:italic}.notes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic}.notes[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-style:italic!important;color:gray!important}ion-item-group[_ngcontent-%COMP%]{padding-left:0;padding-right:0}"]}),n})()}];let y=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.Bz.forChild(U)],_.Bz]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,d.u5,o.Pc,y]]}),n})()}}]);