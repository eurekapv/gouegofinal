{"version":3,"sources":["webpack:///src/app/pages/agenda-custode/agenda-custode-routing.module.ts","webpack:///src/app/pages/agenda-custode/agenda-custode.page.ts","webpack:///src/app/pages/agenda-custode/agenda-custode.page.html","webpack:///src/app/pages/agenda-custode/agenda-custode.module.ts","webpack:///node_modules/@ionic-native/barcode-scanner/__ivy_ngcc__/ngx/index.js","webpack:///src/app/pages/agenda-custode/filter-custode/filter-custode.page.ts","webpack:///src/app/pages/agenda-custode/filter-custode/filter-custode.page.html","webpack:///src/app/pages/agenda-custode/filter-custode/filter-custode.module.ts","webpack:///src/app/pages/agenda-custode/filter-custode/filter-custode-routing.module.ts"],"names":["routes","path","component","loadChildren","then","m","AgendaCustodeDetailsPageModule","AgendaCustodePageRoutingModule","forChild","AgendaCustodePage","barcodeScanner","loadingController","startService","toastController","alertController","actionSheeetController","modalController","navController","listOccupazioni","settimana","listLocations","filter","IDAREA","areaSelectedValue","ID","DATAINIZIO","Date","selectedIsoDate","toISOString","myIsDesktop","isDesktop","onListenAreaChange","requestOccupazioni","listenAreaSelected","unsubscribe","areaSelected","subscribe","elArea","labelAllLocations","DENOMINAZIONE","requestListLocation","myLocation","IDLOCATION","length","find","elLocation","labelLocation","idLocation","setLabelLocation","idArea","newRequestLocation","collLocation","event","create","message","spinner","elLoading","present","requestOccupazioniByFilter","dismiss","target","complete","error","console","log","showMessage","messaggio","type","alertOptions","buttons","elAlert","duration","elToast","elOccupazione","goToReservationDetail","getParamsOccupazioneCampo","componentProps","elModal","onDidDismiss","params","newFilter","data","scan","myId","text","idOccupazione","undefined","docOccupazione","TIPO","settorePrenotazione","navigateForward","requestOccupazioneById","getActionSheetLocationParams","elActionSheet","arButtons","button","handler","onChangeLocation","push","forEach","buttonLoc","buttonCancel","role","icon","header","showFilter","onChooseLocation","onChangeFilterDateImpegni","scanQr","AgendaCustodePageModule","BarcodeScanner","_super","_this","apply","arguments","Encode","TEXT_TYPE","EMAIL_TYPE","PHONE_TYPE","SMS_TYPE","prototype","options","encode","pluginName","plugin","pluginRef","repo","platforms","ɵfac","BarcodeScanner_Factory","t","ɵBarcodeScanner_BaseFactory","ɵprov","token","factory","ngDevMode","FilterCustodePage","actionSheetController","selectedLocation","today","dayNames","getArray","elGiorno","description","requestLocations","backdropDismiss","canSubmit","newDate","Object","label","presentActionSheet","submit","FilterCustodePageModule","FilterCustodePageRoutingModule"],"mappings":"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","file":"pages-agenda-custode-agenda-custode-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AgendaCustodePage } from './agenda-custode.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AgendaCustodePage\r\n  },\r\n  // {\r\n  //   path: 'filter-custode',\r\n  //   loadChildren: () => import('./filter-custode/filter-custode.module').then( m => m.FilterCustodePageModule)\r\n  // },\r\n  {\r\n    path: ':idPianificazione',\r\n    loadChildren: () => import('./agenda-custode-details/agenda-custode-details.module').then( m => m.AgendaCustodeDetailsPageModule)\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AgendaCustodePageRoutingModule {}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { ActionSheetController, AlertController, LoadingController, ModalController, NavController, ToastController } from '@ionic/angular';\r\nimport { ItemCalendario } from 'src/app/models/itemCalendario.model';\r\nimport { OccupazioneCampi } from 'src/app/models/occupazionecampi.model';\r\nimport { StartService } from 'src/app/services/start.service';\r\nimport { FilterCustodePage } from './filter-custode/filter-custode.page';\r\nimport { SettoreAttivita } from 'src/app/models/valuelist.model';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\r\nimport { Subscription } from 'rxjs';\r\nimport { Location } from 'src/app/models/location.model';\r\nimport { ActionSheetOptions, ActionSheetButton } from '@ionic/core';\r\n\r\n@Component({\r\n  selector: 'app-agenda-custode',\r\n  templateUrl: './agenda-custode.page.html',\r\n  styleUrls: ['./agenda-custode.page.scss'],\r\n})\r\nexport class AgendaCustodePage implements OnInit, OnDestroy {\r\n\r\n  listOccupazioni: OccupazioneCampi[] = [];\r\n  myIsDesktop: boolean;\r\n  filter:OccupazioneCampi;\r\n  listenAreaSelected: Subscription;\r\n  \r\n  settimana = ['Domenica', 'Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato']\r\n  selectedIsoDate: string;\r\n\r\n  labelAllLocations: string;\r\n  labelLocation: string;\r\n\r\n  listLocations: Location[] = [];\r\n\r\n  constructor(\r\n    private barcodeScanner: BarcodeScanner,\r\n    private loadingController: LoadingController,\r\n    private startService: StartService,\r\n    private toastController: ToastController,\r\n    private alertController: AlertController,\r\n    private actionSheeetController: ActionSheetController,\r\n    private modalController: ModalController,\r\n    private navController: NavController,\r\n    \r\n  ) { \r\n    //Filtro iniziale\r\n    this.filter = new OccupazioneCampi(true);\r\n    this.filter.IDAREA = this.startService.areaSelectedValue.ID;\r\n    this.filter.DATAINIZIO = new Date();\r\n    this.selectedIsoDate = this.filter.DATAINIZIO.toISOString();\r\n    this.myIsDesktop = this.startService.isDesktop;\r\n\r\n    //Ascolto i cambiamenti dell'area\r\n    this.onListenAreaChange();\r\n    \r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.requestOccupazioni();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.listenAreaSelected) {\r\n      this.listenAreaSelected.unsubscribe();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Recupero Area\r\n   */\r\n  onListenAreaChange() {\r\n    //Recupero le informazioni sull'area\r\n    this.listenAreaSelected = this.startService.areaSelected.subscribe(elArea => {\r\n\r\n      if (elArea) {\r\n        this.labelAllLocations = \"Locations di \" + elArea.DENOMINAZIONE;\r\n      }\r\n      else {\r\n        this.labelAllLocations = \"Tutte le Locations\"\r\n      }\r\n\r\n      //Preparo la lista location\r\n      this.requestListLocation(elArea.ID);\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * Imposta la label per Item Location\r\n   */\r\n  setLabelLocation() {\r\n    let myLocation: Location;\r\n\r\n    if (this.filter && this.filter.IDLOCATION && this.filter.IDLOCATION.length != 0) {\r\n\r\n      myLocation = this.listLocations.find(elLocation => {\r\n        return elLocation.ID == this.filter.IDLOCATION;\r\n      });\r\n    }\r\n\r\n    if (myLocation) {\r\n      this.labelLocation = myLocation.DENOMINAZIONE;\r\n    }\r\n    else {\r\n      this.labelLocation = this.labelAllLocations;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Evento per la scelta di una nuova location\r\n   * @param idLocation Nuova Location selezionata\r\n   */\r\n  onChangeLocation(idLocation:string) {\r\n\r\n    if (this.filter)  {\r\n      this.filter.IDLOCATION = idLocation;\r\n      this.setLabelLocation();\r\n      this.requestOccupazioni();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Recupero elenco locations\r\n   * @param idArea idArea riferimento\r\n   */\r\n  requestListLocation(idArea: string) {\r\n\r\n    this.startService.newRequestLocation(idArea)\r\n                    .then(collLocation => {\r\n                      //Location recuperate\r\n                      this.listLocations = collLocation;\r\n                      //Preparo la labelLocation\r\n                      this.setLabelLocation();\r\n                    });\r\n\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Richiedo nuovamente le occupazioni campi sulla base del filtro\r\n   * @param event evento che ha scatenato la richiesta (usato per dismettere il refresher se presente)\r\n   */\r\n  requestOccupazioni(event?){\r\n    this.loadingController.create({\r\n      message: 'Caricamento...',\r\n      spinner: 'circular'\r\n    })\r\n    .then((elLoading) => {\r\n      if (!event){\r\n        elLoading.present();\r\n      }\r\n\r\n      return this.startService.requestOccupazioniByFilter(this.filter);\r\n    })\r\n    .then(listOccupazioni => {\r\n      this.listOccupazioni = listOccupazioni;\r\n      this.loadingController.dismiss();\r\n      if(event){\r\n        event.target.complete();\r\n      }\r\n    } )\r\n\r\n    .catch(error => {\r\n      this.loadingController.dismiss();\r\n      if(event){\r\n        event.target.complete();\r\n      }\r\n      console.log(error);\r\n      this.showMessage('Errore di connessione');\r\n\r\n      \r\n    })\r\n  }\r\n \r\n\r\n  /**\r\n * Nella pagina Impegni è stato modificata il filtro Data \r\n * per la ricerca\r\n */\r\n    onChangeFilterDateImpegni(){    \r\n\r\n    this.filter.DATAINIZIO = (new Date(this.selectedIsoDate)); \r\n    this.requestOccupazioni();\r\n  }\r\n\r\n\r\n/**\r\n   * Visualizza un messaggio\r\n   */\r\n showMessage(messaggio: string, type?:'toast'|'alert'){\r\n\r\n  if (type == 'alert') {\r\n\r\n    let alertOptions = {\r\n      message: messaggio,\r\n      buttons: ['OK']\r\n    }\r\n\r\n\r\n    this.alertController.create(alertOptions)\r\n          .then(elAlert => {\r\n                  elAlert.present();\r\n          });\r\n\r\n  }\r\n  else {\r\n\r\n    this.toastController.create({\r\n      message: messaggio,\r\n      duration: 3000\r\n    })\r\n    .then(elToast => {\r\n      elToast.present();\r\n    })\r\n\r\n  }\r\n}\r\n\r\n\r\n  onClickOccupazione(elOccupazione: OccupazioneCampi){\r\n    this.goToReservationDetail(null, elOccupazione);\r\n  }\r\n\r\n  getItemCalendario(elOccupazione: OccupazioneCampi){\r\n    return ItemCalendario.getParamsOccupazioneCampo(elOccupazione);\r\n  }\r\n\r\n  showFilter(){\r\n    this.modalController.create({\r\n\r\n      component:FilterCustodePage,\r\n      componentProps: {\r\n        filter: this.filter\r\n      }\r\n\r\n    })\r\n    .then(elModal => {\r\n      //modale creata\r\n      elModal.present();\r\n      return elModal.onDidDismiss();\r\n    })\r\n    .then(params => {\r\n      //modale dismessa\r\n\r\n      let newFilter: OccupazioneCampi = params.data;\r\n      if(newFilter){\r\n        this.filter = newFilter;\r\n        this.selectedIsoDate = this.filter.DATAINIZIO.toISOString();\r\n        this.requestOccupazioni();\r\n        this.setLabelLocation();\r\n      }\r\n      else{\r\n        console.log('Non ci sono dati');\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  scanQr(){\r\n    if(!this.startService.isDesktop){\r\n      this.barcodeScanner\r\n      .scan()\r\n      \r\n      .then(data => {\r\n        let myId = data.text;\r\n        console.log('dati: ');\r\n        console.log(data);\r\n        this.goToReservationDetail(myId);\r\n      })\r\n\r\n      .catch(error => {\r\n        console.log(error);\r\n        this.showMessage('Errore nella lettura del codice')\r\n\r\n      })\r\n    }\r\n  }\r\n\r\n  // startScan = async () => {\r\n  //   const { BarcodeScanner } = Plugins;\r\n  \r\n  //   BarcodeScanner.hideBackground(); // make background of WebView transparent\r\n  \r\n  //   const result = await BarcodeScanner.startScan(); // start scanning and wait for a result\r\n  \r\n  //   // if the result has content\r\n  //   if (result.hasContent) {\r\n  //     console.log(result.content); // log the raw scanned content\r\n  //   }\r\n  // };\r\n\r\n  // newScanQr(){\r\n  //   console.log('ci provo');\r\n  //   if(!this.startService.isDesktop){\r\n  //     console.log('sono su mobile');\r\n  //     const {BarcodeScanner} = Plugins;\r\n  //     console.log(BarcodeScanner);\r\n  //     BarcodeScanner.hideBackground();\r\n  //     BarcodeScanner.startScan()\r\n  //     .then(result => {\r\n  //       console.log('scannerizzato');\r\n  //       if(result && result.hasContent){\r\n  //         console.log('risultato:');\r\n  //         console.log(result.content);\r\n  //       }\r\n  //     })\r\n  //   }\r\n  // }\r\n\r\n  // scanQr(){\r\n  //   console.log('ci provo');\r\n\r\n  //   //TODO Da testare se funziona; in alternativa, barcode scanner dovrebbe funzionare\r\n  //   if(!this.startService.isDesktop){\r\n  //     console.log('non sono su desktop');\r\n  //     this.qrScanner.prepare()\r\n  //     .then((status: QRScannerStatus) => {\r\n  //       console.log('preparato');\r\n  //       if(status.authorized){\r\n  //       console.log('autorizzato');\r\n\r\n  //         let qrSubscription = this.qrScanner.scan()\r\n  //         .subscribe((text: string) => {\r\n  //           console.log('scannerizzato');\r\n\r\n  //           console.log(text);\r\n  //           this.qrScanner.hide;\r\n  //           qrSubscription.unsubscribe();\r\n  //           this.goToReservationDetail(text);\r\n  \r\n  //         });\r\n  //       }\r\n  //       else{\r\n  //         throw new Error('Permessi fotocamera non concessi');\r\n  //       }\r\n  //     })\r\n  //     .catch(error => {\r\n  //       this.showMessage('Errore nella scansione del Qr-Code');\r\n  //       console.log(error);\r\n  //     })\r\n    \r\n  //   }\r\n  //   else{\r\n  //     console.warn('Attenzione, Scanner Qr non disponibile su desktop');\r\n  //   }\r\n  // }\r\n\r\n  /**\r\n   * Naviga alla pagina di dettaglio dell'occupazione specificata (SOLO PER PRENOTAZIONI)\r\n   * @param idOccupazione id del docOccupazione\r\n   * @param docOccupazione \r\n   */\r\n  goToReservationDetail(idOccupazione: string = undefined, docOccupazione: OccupazioneCampi = undefined){\r\n\r\n    //se mi passano il doc, basta controllare il tipo e posso passare direttamente\r\n    if(docOccupazione){\r\n      if(docOccupazione.TIPO == SettoreAttivita.settorePrenotazione){\r\n        this.navController.navigateForward(`/agenda-custode/${docOccupazione.ID}`);\r\n      }\r\n      else{\r\n        this.showMessage('Puoi visualizzare solo il dettaglio delle prenotazioni')\r\n      }\r\n    }\r\n\r\n    //se mi danno solo l'id, devo recuperare l'occupazione, controllare il tipo, e solo a quel punto posso spostarmi\r\n    else if(idOccupazione && idOccupazione.length > 0){\r\n      this.startService.requestOccupazioneById(idOccupazione)\r\n      .then(elOccupazione => {\r\n        if(elOccupazione){\r\n          //ho trovato un'occupazione, l'id era valido\r\n          if(elOccupazione.TIPO == SettoreAttivita.settorePrenotazione){\r\n            //è una prenotazione, procedo\r\n            this.navController.navigateForward(`/agenda-custode/${elOccupazione.ID}`);\r\n          }\r\n          else{\r\n            //non è una prenotazione, non la mostro\r\n            this.showMessage('Puoi visualizzare solo il dettaglio delle prenotazioni')\r\n          }\r\n        }\r\n        else{\r\n          //non ho trovato nessuna occupazione, il codice non era valido\r\n          this.showMessage('Codice non valido');\r\n        }\r\n      })\r\n      .catch(error => {\r\n        this.showMessage('Errore di connessione');\r\n        console.log(error);\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n\r\n  //#region ACTION SHEET CAMBIO LOCATION \r\n  \r\n  /**\r\n   * Crea un Action Sheet con l'elenco delle location\r\n   */\r\n  onChooseLocation(){\r\n    let params: ActionSheetOptions;\r\n\r\n    params = this.getActionSheetLocationParams();\r\n\r\n    this.actionSheeetController.create(params)\r\n                              .then(elActionSheet => {\r\n                                elActionSheet.present();\r\n                              });\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   * @returns Parametri per ActionSheet\r\n   */\r\n  getActionSheetLocationParams(): ActionSheetOptions {\r\n\r\n    let arButtons: ActionSheetButton[] = [];\r\n    \r\n    //bottone \"tutte le locations\"\r\n    let button: ActionSheetButton = {\r\n      text: this.labelAllLocations,\r\n      handler: () => {\r\n        this.onChangeLocation(null);\r\n      }\r\n    }\r\n    \r\n    arButtons.push(button);\r\n\r\n\r\n    //bottoni locations\r\n    this.listLocations.forEach(elLocation => {\r\n      let buttonLoc: ActionSheetButton = {\r\n        text: elLocation.DENOMINAZIONE,\r\n        handler: () => {\r\n          this.onChangeLocation(elLocation.ID);\r\n        }        \r\n      }\r\n\r\n      arButtons.push(buttonLoc);\r\n    })\r\n\r\n    //bottone \"annulla\"\r\n    let buttonCancel: ActionSheetButton = {\r\n      text: 'Annulla',\r\n      role: 'cancel',\r\n      icon: 'close'\r\n    };\r\n    arButtons.push(buttonCancel);\r\n\r\n    let params: ActionSheetOptions = {\r\n      header: 'Scegli la location',\r\n      buttons: arButtons,\r\n    };\r\n\r\n\r\n    \r\n\r\n    return params;\r\n  }\r\n\r\n  \r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"primary\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"/home\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Occupazioni</ion-title>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button fill=\"clear\" (click)=\"showFilter()\">\r\n        <ion-icon name=\"filter\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n\r\n</ion-header>\r\n\r\n<ion-content scrollEvents>\r\n\r\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"requestOccupazioni($event)\">\r\n    <ion-refresher-content></ion-refresher-content>\r\n  </ion-refresher>\r\n\r\n  <ion-list\r\n    class=\"ion-no-padding\">\r\n    <!-- DEFINIZIONE LOCATION -->\r\n    <ion-item\r\n      (click)=\"onChooseLocation()\"\r\n      detail=\"true\">\r\n      <ion-icon slot=\"start\" name=\"location-outline\"></ion-icon>\r\n      <ion-label>\r\n        <h5>{{labelLocation}}</h5></ion-label>\r\n    </ion-item>\r\n  \r\n  \r\n    <!-- DATA OCCUPAZIONE -->\r\n    <ion-item >\r\n      <ion-icon slot=\"start\" name=\"calendar-outline\" color=\"primary\"></ion-icon>\r\n      <ion-datetime \r\n        displayFormat=\"DDDD - DD/MM/YYYY\" \r\n        [dayNames]=\"settimana\" \r\n        [(ngModel)]=\"selectedIsoDate\" \r\n        (ngModelChange)=\"onChangeFilterDateImpegni()\">\r\n    </ion-datetime>\r\n    <ion-icon name=\"chevron-down-outline\" color=\"primary\" slot=\"end\"></ion-icon>\r\n    </ion-item>  \r\n  </ion-list>\r\n\r\n\r\n  <div *ngIf=\"listOccupazioni && listOccupazioni.length > 0\" class=\"ion-no-padding\">\r\n    <ion-list class=\"ion-padding-vertical\">\r\n      <app-item-calendario \r\n        *ngFor=\"let occupazione of listOccupazioni\" \r\n        [params]=\"getItemCalendario(occupazione)\"\r\n        (click)=\"onClickOccupazione(occupazione)\">\r\n      </app-item-calendario>\r\n    </ion-list>\r\n  </div>\r\n\r\n\r\n  <!-- NESSUN ELEMENTO -->\r\n  <div class=\"nofind-cnt\" *ngIf=\"!listOccupazioni || listOccupazioni.length <= 0\">\r\n    <ion-label>Nessuna occupazione prevista</ion-label>\r\n  </div>\r\n</ion-content>\r\n\r\n\r\n\r\n<ion-footer>\r\n  <ion-button \r\n        color=\"primary\" \r\n        expand=\"block\" \r\n        [disabled]=\"myIsDesktop\" \r\n        (click)=\"scanQr()\"> \r\n        \r\n    <ion-icon slot=\"start\" name=\"qr-code-outline\"  ></ion-icon>\r\n    Qr-Code Prenotazione\r\n  </ion-button>\r\n</ion-footer>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AgendaCustodePageRoutingModule } from './agenda-custode-routing.module';\r\n\r\nimport { AgendaCustodePage } from './agenda-custode.page';\r\nimport { SharedComponentsModule } from 'src/app/shared/components/shared-components.module';\r\nimport { FilterCustodePageModule } from './filter-custode/filter-custode.module';\r\nimport { FilterCustodePage } from './filter-custode/filter-custode.page';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SharedComponentsModule,\r\n    AgendaCustodePageRoutingModule,\r\n    FilterCustodePageModule,\r\n  ],\r\n  declarations: [AgendaCustodePage],\r\n  entryComponents: [FilterCustodePage],\r\n  providers: [BarcodeScanner]\r\n})\r\nexport class AgendaCustodePageModule {}\r\n","import { __extends } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { IonicNativePlugin, cordova } from '@ionic-native/core';\nimport * as ɵngcc0 from '@angular/core';\nvar BarcodeScanner = /** @class */ (function (_super) {\n    __extends(BarcodeScanner, _super);\n    function BarcodeScanner() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.Encode = {\n            TEXT_TYPE: 'TEXT_TYPE',\n            EMAIL_TYPE: 'EMAIL_TYPE',\n            PHONE_TYPE: 'PHONE_TYPE',\n            SMS_TYPE: 'SMS_TYPE',\n        };\n        return _this;\n    }\n    BarcodeScanner.prototype.scan = function (options) { return cordova(this, \"scan\", { \"callbackOrder\": \"reverse\" }, arguments); };\n    BarcodeScanner.prototype.encode = function (type, data) { return cordova(this, \"encode\", {}, arguments); };\n    BarcodeScanner.pluginName = \"BarcodeScanner\";\n    BarcodeScanner.plugin = \"phonegap-plugin-barcodescanner\";\n    BarcodeScanner.pluginRef = \"cordova.plugins.barcodeScanner\";\n    BarcodeScanner.repo = \"https://github.com/phonegap/phonegap-plugin-barcodescanner\";\n    BarcodeScanner.platforms = [\"Android\", \"BlackBerry 10\", \"Browser\", \"iOS\", \"Windows\"];\nBarcodeScanner.ɵfac = function BarcodeScanner_Factory(t) { return ɵBarcodeScanner_BaseFactory(t || BarcodeScanner); };\nBarcodeScanner.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: BarcodeScanner, factory: function (t) { return BarcodeScanner.ɵfac(t); } });\nvar ɵBarcodeScanner_BaseFactory = /*@__PURE__*/ ɵngcc0.ɵɵgetInheritedFactory(BarcodeScanner);\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BarcodeScanner, [{\n        type: Injectable\n    }], null, null); })();\n    return BarcodeScanner;\n}(IonicNativePlugin));\nexport { BarcodeScanner };\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9AaW9uaWMtbmF0aXZlL3BsdWdpbnMvYmFyY29kZS1zY2FubmVyL25neC9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLDhCQUFzQyxNQUFNLG9CQUFvQixDQUFDOztBQUN4RTtJQTZHb0Msa0NBQWlCOzs7UUFDbkQsWUFBTSxHQUtGO1lBQ0YsU0FBUyxFQUFFLFdBQVc7WUFDdEIsVUFBVSxFQUFFLFlBQVk7WUFDeEIsVUFBVSxFQUFFLFlBQVk7WUFDeEIsUUFBUSxFQUFFLFVBQVU7U0FDckIsQ0FBQzs7O0lBVUYsNkJBQUksYUFBQyxPQUErQjtJQVlwQywrQkFBTSxhQUFDLElBQVksRUFBRSxJQUFTOzs7Ozt5RkFJb1Y7a0RBdENuWCxVQUFVOzs7OzswQkFDTDt5QkEvR047RUErR29DLGlCQUFpQjtTQUF4QyxjQUFjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29yZG92YSwgSW9uaWNOYXRpdmVQbHVnaW4sIFBsdWdpbiB9IGZyb20gJ0Bpb25pYy1uYXRpdmUvY29yZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFyY29kZVNjYW5uZXJPcHRpb25zIHtcbiAgLyoqXG4gICAqIFByZWZlciBmcm9udCBjYW1lcmEuIFN1cHBvcnRlZCBvbiBpT1MgYW5kIEFuZHJvaWQuXG4gICAqL1xuICBwcmVmZXJGcm9udENhbWVyYT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFNob3cgZmxpcCBjYW1lcmEgYnV0dG9uLiBTdXBwb3J0ZWQgb24gaU9TIGFuZCBBbmRyb2lkLlxuICAgKi9cbiAgc2hvd0ZsaXBDYW1lcmFCdXR0b24/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBTaG93IHRvcmNoIGJ1dHRvbi4gU3VwcG9ydGVkIG9uIGlPUyBhbmQgQW5kcm9pZC5cbiAgICovXG4gIHNob3dUb3JjaEJ1dHRvbj86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIERpc2FibGUgYW5pbWF0aW9ucy4gU3VwcG9ydGVkIG9uIGlPUyBvbmx5LlxuICAgKi9cbiAgZGlzYWJsZUFuaW1hdGlvbnM/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBEaXNhYmxlIHN1Y2Nlc3MgYmVlcC4gU3VwcG9ydGVkIG9uIGlPUyBvbmx5LlxuICAgKi9cbiAgZGlzYWJsZVN1Y2Nlc3NCZWVwPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogUHJvbXB0IHRleHQuIFN1cHBvcnRlZCBvbiBBbmRyb2lkIG9ubHkuXG4gICAqL1xuICBwcm9tcHQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEZvcm1hdHMgc2VwYXJhdGVkIGJ5IGNvbW1hcy4gRGVmYXVsdHMgdG8gYWxsIGZvcm1hdHMgZXhjZXB0IGBQREZfNDE3YCBhbmQgYFJTU19FWFBBTkRFRGAuXG4gICAqL1xuICBmb3JtYXRzPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBPcmllbnRhdGlvbi4gU3VwcG9ydGVkIG9uIEFuZHJvaWQgb25seS4gQ2FuIGJlIHNldCB0byBgcG9ydHJhaXRgIG9yIGBsYW5kc2NhcGVgLiBEZWZhdWx0cyB0byBub25lIHNvIHRoZSB1c2VyIGNhbiByb3RhdGUgdGhlIHBob25lIGFuZCBwaWNrIGFuIG9yaWVudGF0aW9uLlxuICAgKi9cbiAgb3JpZW50YXRpb24/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIExhdW5jaCB3aXRoIHRoZSB0b3JjaCBzd2l0Y2hlZCBvbiAoaWYgYXZhaWxhYmxlKS4gU3VwcG9ydGVkIG9uIEFuZHJvaWQgb25seS5cbiAgICovXG4gIHRvcmNoT24/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHNjYW5uZWQgdGV4dCBmb3IgWCBtcy4gMCBzdXBwcmVzc2VzIGl0IGVudGlyZWx5LCBkZWZhdWx0IDE1MDAuIFN1cHBvcnRlZCBvbiBBbmRyb2lkIG9ubHkuXG4gICAqL1xuICByZXN1bHREaXNwbGF5RHVyYXRpb24/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFyY29kZVNjYW5SZXN1bHQge1xuICBmb3JtYXQ6XG4gICAgfCAnUVJfQ09ERSdcbiAgICB8ICdEQVRBX01BVFJJWCdcbiAgICB8ICdVUENfRSdcbiAgICB8ICdVUENfQSdcbiAgICB8ICdFQU5fOCdcbiAgICB8ICdFQU5fMTMnXG4gICAgfCAnQ09ERV8xMjgnXG4gICAgfCAnQ09ERV8zOSdcbiAgICB8ICdDT0RFXzkzJ1xuICAgIHwgJ0NPREFCQVInXG4gICAgfCAnSVRGJ1xuICAgIHwgJ1JTUzE0J1xuICAgIHwgJ1JTU19FWFBBTkRFRCdcbiAgICB8ICdQREZfNDE3J1xuICAgIHwgJ0FaVEVDJ1xuICAgIHwgJ01TSSc7XG4gIGNhbmNlbGxlZDogYm9vbGVhbjtcbiAgdGV4dDogc3RyaW5nO1xufVxuXG4vKipcbiAqIEBuYW1lIEJhcmNvZGUgU2Nhbm5lclxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgQmFyY29kZSBTY2FubmVyIFBsdWdpbiBvcGVucyBhIGNhbWVyYSB2aWV3IGFuZCBhdXRvbWF0aWNhbGx5IHNjYW5zIGEgYmFyY29kZSwgcmV0dXJuaW5nIHRoZSBkYXRhIGJhY2sgdG8geW91LlxuICpcbiAqIFJlcXVpcmVzIENvcmRvdmEgcGx1Z2luOiBgcGhvbmVnYXAtcGx1Z2luLWJhcmNvZGVzY2FubmVyYC4gRm9yIG1vcmUgaW5mbywgcGxlYXNlIHNlZSB0aGUgW0JhcmNvZGVTY2FubmVyIHBsdWdpbiBkb2NzXShodHRwczovL2dpdGh1Yi5jb20vcGhvbmVnYXAvcGhvbmVnYXAtcGx1Z2luLWJhcmNvZGVzY2FubmVyKS5cbiAqXG4gKiBAdXNhZ2VcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IEJhcmNvZGVTY2FubmVyIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS9iYXJjb2RlLXNjYW5uZXIvbmd4JztcbiAqXG4gKiBjb25zdHJ1Y3Rvcihwcml2YXRlIGJhcmNvZGVTY2FubmVyOiBCYXJjb2RlU2Nhbm5lcikgeyB9XG4gKlxuICogLi4uXG4gKlxuICpcbiAqIHRoaXMuYmFyY29kZVNjYW5uZXIuc2NhbigpLnRoZW4oYmFyY29kZURhdGEgPT4ge1xuICogIGNvbnNvbGUubG9nKCdCYXJjb2RlIGRhdGEnLCBiYXJjb2RlRGF0YSk7XG4gKiB9KS5jYXRjaChlcnIgPT4ge1xuICogXHRjb25zb2xlLmxvZygnRXJyb3InLCBlcnIpO1xuICogfSk7XG4gKiBgYGBcbiAqIEBpbnRlcmZhY2VzXG4gKiBCYXJjb2RlU2Nhbm5lck9wdGlvbnNcbiAqIEJhcmNvZGVTY2FuUmVzdWx0XG4gKi9cbkBQbHVnaW4oe1xuICBwbHVnaW5OYW1lOiAnQmFyY29kZVNjYW5uZXInLFxuICBwbHVnaW46ICdwaG9uZWdhcC1wbHVnaW4tYmFyY29kZXNjYW5uZXInLFxuICBwbHVnaW5SZWY6ICdjb3Jkb3ZhLnBsdWdpbnMuYmFyY29kZVNjYW5uZXInLFxuICByZXBvOiAnaHR0cHM6Ly9naXRodWIuY29tL3Bob25lZ2FwL3Bob25lZ2FwLXBsdWdpbi1iYXJjb2Rlc2Nhbm5lcicsXG4gIHBsYXRmb3JtczogWydBbmRyb2lkJywgJ0JsYWNrQmVycnkgMTAnLCAnQnJvd3NlcicsICdpT1MnLCAnV2luZG93cyddLFxufSlcbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBCYXJjb2RlU2Nhbm5lciBleHRlbmRzIElvbmljTmF0aXZlUGx1Z2luIHtcbiAgRW5jb2RlOiB7XG4gICAgVEVYVF9UWVBFOiBzdHJpbmc7XG4gICAgRU1BSUxfVFlQRTogc3RyaW5nO1xuICAgIFBIT05FX1RZUEU6IHN0cmluZztcbiAgICBTTVNfVFlQRTogc3RyaW5nO1xuICB9ID0ge1xuICAgIFRFWFRfVFlQRTogJ1RFWFRfVFlQRScsXG4gICAgRU1BSUxfVFlQRTogJ0VNQUlMX1RZUEUnLFxuICAgIFBIT05FX1RZUEU6ICdQSE9ORV9UWVBFJyxcbiAgICBTTVNfVFlQRTogJ1NNU19UWVBFJyxcbiAgfTtcblxuICAvKipcbiAgICogT3BlbiB0aGUgYmFyY29kZSBzY2FubmVyLlxuICAgKiBAcGFyYW0ge0JhcmNvZGVTY2FubmVyT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMgdG8gcGFzcyB0byB0aGUgc2Nhbm5lclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fSBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggc2Nhbm5lciBkYXRhLCBvciByZWplY3RzIHdpdGggYW4gZXJyb3IuXG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgY2FsbGJhY2tPcmRlcjogJ3JldmVyc2UnLFxuICB9KVxuICBzY2FuKG9wdGlvbnM/OiBCYXJjb2RlU2Nhbm5lck9wdGlvbnMpOiBQcm9taXNlPEJhcmNvZGVTY2FuUmVzdWx0PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuY29kZXMgZGF0YSBpbnRvIGEgYmFyY29kZS5cbiAgICogTk9URTogbm90IHdlbGwgc3VwcG9ydGVkIG9uIEFuZHJvaWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiBlbmNvZGluZ1xuICAgKiBAcGFyYW0ge2FueX0gZGF0YSBEYXRhIHRvIGVuY29kZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBlbmNvZGUodHlwZTogc3RyaW5nLCBkYXRhOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxufVxuIl19","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ActionSheetController, LoadingController, ModalController, ToastController, } from '@ionic/angular';\r\nimport { OccupazioneCampi } from 'src/app/models/occupazionecampi.model';\r\nimport { Location } from 'src/app/models/location.model';\r\nimport { Giorni, ValueList } from 'src/app/models/valuelist.model';\r\nimport { StartService } from 'src/app/services/start.service';\r\n\r\n@Component({\r\n  selector: 'app-filter-custode',\r\n  templateUrl: './filter-custode.page.html',\r\n  styleUrls: ['./filter-custode.page.scss'],\r\n})\r\nexport class FilterCustodePage implements OnInit {\r\n\r\n  @Input() filter: OccupazioneCampi;\r\n\r\n  selectedIsoDate: string;\r\n  selectedLocation: Location = undefined;\r\n\r\n  dayNames: string[];\r\n  today: Date;\r\n  listLocations: Location[] = [];\r\n\r\n\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private loadingController: LoadingController,\r\n    private actionSheetController: ActionSheetController,\r\n    private toastController: ToastController,\r\n    private startService: StartService\r\n  ) { \r\n    this.today = new Date();\r\n\r\n    this.dayNames = [];\r\n    ValueList.getArray(Giorni).forEach(elGiorno => {\r\n      this.dayNames.push(elGiorno.description);\r\n    });\r\n  }\r\n  \r\n  ngOnInit() {\r\n    \r\n    this.selectedIsoDate = this.filter.DATAINIZIO.toISOString();\r\n\r\n    //recupero le locations\r\n    this.requestLocations();\r\n  }\r\n\r\n\r\n\r\n  requestLocations() {\r\n    this.loadingController.create({\r\n      message: 'Caricamento',\r\n      spinner: 'circular',\r\n      backdropDismiss: true\r\n    })\r\n      .then(elLoading => {\r\n        elLoading.present();\r\n        return this.startService.newRequestLocation(this.filter.IDAREA);\r\n      })\r\n      .then(listLocations => {\r\n        this.loadingController.dismiss();\r\n        this.listLocations = listLocations;\r\n      })\r\n      .catch(error => {\r\n        this.loadingController.dismiss();\r\n        this.showMessage('Errore di connessione');\r\n        console.log(error);\r\n        this.dismiss();\r\n      });\r\n  }\r\n\r\n  dismiss(){\r\n    this.modalController.dismiss();\r\n\r\n  }\r\n\r\n  submit(){\r\n    if(this.canSubmit){\r\n     \r\n      this.filter.DATAINIZIO = new Date(this.selectedIsoDate);\r\n      this.modalController.dismiss(this.filter);\r\n\r\n      if(this.selectedLocation && this.selectedLocation.DENOMINAZIONE && this.selectedLocation.DENOMINAZIONE.length > 0){\r\n        this.filter.IDLOCATION = this.selectedLocation.ID;\r\n      }\r\n      else{\r\n        this.filter.IDLOCATION = undefined;\r\n      }\r\n    }\r\n  }\r\n\r\n  get canSubmit(){\r\n    let newDate = new Date(this.selectedIsoDate);\r\n    if(newDate){\r\n      return true;\r\n    }\r\n    else{\r\n      return false;\r\n    }\r\n  }\r\n\r\n     /**\r\n   * Visualizza un messaggio\r\n   */\r\n  showMessage(messaggio: string){\r\n    this.toastController.create({\r\n      message: messaggio,\r\n      duration: 3000\r\n    })\r\n    .then(elToast => {\r\n      elToast.present();\r\n    })\r\n  }\r\n\r\n\r\n  presentActionSheet(){\r\n    this.actionSheetController.create(this.getActionSheetLocationParams())\r\n    .then(elActionSheet => {\r\n      elActionSheet.present();\r\n    })\r\n  }\r\n\r\n\r\n  getActionSheetLocationParams(){\r\n\r\n    let arButtons = [];\r\n    \r\n    //bottone \"tutte le locations\"\r\n    let button = new Object();\r\n    button['text'] = 'Tutte';\r\n    button['handler'] = () => {this.selectedLocation = undefined};\r\n    button['icon'] = 'location-outline';\r\n    arButtons.push(button);\r\n\r\n\r\n    //bottoni locations\r\n    this.listLocations.forEach(elLocation => {\r\n      button = new Object; \r\n      button['text'] = elLocation.DENOMINAZIONE;\r\n      button['handler'] = () => {this.selectedLocation = elLocation};\r\n      button['icon'] = 'location-outline';\r\n      arButtons.push(button);\r\n    })\r\n\r\n    //bottone \"annulla\"\r\n    button = new Object();\r\n    button['text'] = 'Annulla';\r\n    button['role'] = 'cancel';\r\n    button['icon'] = 'close';\r\n    arButtons.push(button)\r\n\r\n\r\n\r\n    let params = {\r\n      header: 'Scegli la location',\r\n      buttons: arButtons,\r\n    };\r\n\r\n\r\n    \r\n\r\n    return params;\r\n  }\r\n\r\n  get labelSelectedLocation(): string{\r\n    let label = '';\r\n\r\n    if(this.selectedLocation && this.selectedLocation.DENOMINAZIONE && this.selectedLocation.DENOMINAZIONE.length > 0){\r\n      label = this.selectedLocation.DENOMINAZIONE;\r\n    }\r\n    else{\r\n      label = 'Tutte le locations';\r\n    }\r\n    return label\r\n  }\r\n\r\n\r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"primary\">\r\n    <ion-title>Filtra occupazioni</ion-title>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button fill=\"clear\" (click)=\"dismiss()\">\r\n        <ion-icon name=\"close\"></ion-icon>\r\n      </ion-button>      \r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n\r\n  <ion-list lines=\"full\">\r\n    <ion-item-divider color=\"light\">\r\n      <ion-icon slot=\"start\" name=\"calendar-outline\" color=\"primary\"></ion-icon>\r\n      <ion-label>Quando: </ion-label>\r\n    </ion-item-divider>\r\n    <ion-datetime displayFormat=\"DDDD - DD/MM/YYYY\" [(ngModel)]=\"selectedIsoDate\" required [dayNames]=\"dayNames\">\r\n      <ion-label position=\"floating\">Data</ion-label>\r\n      <ion-input [(ngModel)]=\"selectedIsoDate\"></ion-input>\r\n    </ion-datetime>\r\n    <ion-item-divider color=\"light\">\r\n      <ion-icon slot=\"start\" name=\"location-outline\" color=\"primary\"></ion-icon>\r\n      <ion-label>Dove: </ion-label>\r\n    </ion-item-divider>\r\n    <ion-item button (click)=\"presentActionSheet()\">\r\n      <ion-label >{{labelSelectedLocation}}</ion-label>\r\n    </ion-item>\r\n\r\n  </ion-list>\r\n\r\n</ion-content>\r\n\r\n\r\n\r\n<ion-footer>\r\n  <ion-button color=\"primary\" expand=\"block\" (click)=\"submit()\" [disabled]=\"!canSubmit\">Conferma</ion-button>\r\n</ion-footer>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { FilterCustodePageRoutingModule } from './filter-custode-routing.module';\r\n\r\nimport { FilterCustodePage } from './filter-custode.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    FilterCustodePageRoutingModule\r\n  ],\r\n  declarations: [FilterCustodePage]\r\n})\r\nexport class FilterCustodePageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { FilterCustodePage } from './filter-custode.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FilterCustodePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class FilterCustodePageRoutingModule {}\r\n"]}