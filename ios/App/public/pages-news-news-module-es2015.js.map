{"version":3,"sources":["./src/app/pages/news/news.page.ts","./src/app/pages/news/news.page.html","./src/app/pages/news/news-routing.module.ts","./src/app/pages/news/news.module.ts"],"names":[],"mappings":";;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6D;AAEC;AAEsC;AAC3B;;;;;;;;ICcjE,0EAAuC;IACrC,qFAAwE;IAAvC,mYAAsC;IAAC,4DAAkB;IAC5F,4DAAU;;;IADS,0DAAe;IAAf,2EAAe;;;IAHtC,2EAAwC;IACtC,0EAAS;IACP,uHAEU;IACZ,4DAAU;IACZ,4DAAW;;;IAJmB,0DAAW;IAAX,oFAAW;;;IAOzC,yEAAmE;IACjE,gFAA0C;IAAA,qFAA0B;IAAA,4DAAY;IAChF,gFAA0C;IAAA,0GAA+C;IAAA,4DAAY;IACvG,4DAAM;;ADjBH,MAAM,QAAQ;IAUnB,YAAoB,YAA0B,EAC1B,aAA4B,EAC5B,iBAAoC,EACpC,eAAgC,EAChC,eAAgC;QAJhC,iBAAY,GAAZ,YAAY,CAAc;QAC1B,kBAAa,GAAb,aAAa,CAAe;QAC5B,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,oBAAe,GAAf,eAAe,CAAiB;QAChC,oBAAe,GAAf,eAAe,CAAiB;QAZpD,aAAQ,GAAiB,EAAE,CAAC;QAI5B,cAAS,GAAG,EAAE,CAAC,CAAC,4CAA4C;QAU1D,kDAAkD;QAClD,IAAI,CAAC,UAAU,GAAG,0EAAU,CAAC,SAAS,EAAE,CAAC;QAEzC,IAAI,CAAC,WAAW,EAAE,CAAC;IAIrB,CAAC;IAED;;OAEG;IACK,WAAW;QACjB,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YAC5B,OAAO,EAAE,UAAU;YACnB,OAAO,EAAE,aAAa;YACtB,eAAe,EAAE,IAAI;SACtB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;YAChB,OAAO,CAAC,OAAO,EAAE,CAAC;YAClB,wCAAwC;YACxC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC;YACxD,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;gBAC9E,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,OAAO,CAAC,OAAO,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;gBACf,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACnB,OAAO,CAAC,OAAO,EAAE,CAAC;gBAClB,IAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC,CAAC;YAC7C,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;IACR,CAAC;IAED,WAAW;QACT,IAAI,IAAI,CAAC,eAAe,EAAE;YACxB,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;SACpC;IACH,CAAC;IAID,mCAAmC;IACnC,SAAS,CAAC,MAAU;QAElB,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC9E,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;YACf,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;YACzB,IAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;IAGL,CAAC;IAED;;;OAGG;IACH,WAAW,CAAC,IAAgB,EAAE,KAAS;QACnC,iDAAiD;QAC/C,2DAA2D;QAC7D,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC1B,SAAS,EAAC,uFAAc;YACxB,cAAc,EAAC,EAAC,MAAM,EAAC,IAAI,EAAC;SAC7B,CAAC,CAAC,IAAI,CAAC,KAAK,GAAE;YACb,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC,CAAC;IACF,CAAC;IAGL,WAAW,CAAC,SAAgB;QAC1B,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC1B,OAAO,EAAC,SAAS;SAClB,CAAC,CAAC,IAAI,CAAC,KAAK,GAAE;YACb,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC,CAAC;IACJ,CAAC;;gEAhGU,QAAQ;wFAAR,QAAQ;QCbrB,gFAAkC;QAChC,iFAA6B;QAC3B,iFAA0B;QACxB,gFAAoD;QACtD,4DAAc;QACd,4EAAW;QACT,2EACF;QAAA,4DAAY;QACd,4DAAc;QAChB,4DAAa;QAEb,8EAAc;QAEZ,mFAA+D;QAAjC,uJAAc,qBAAiB,IAAC;QAC5D,mFAA+C;QACjD,4DAAgB;QAGd,8GAMW;QAGX,sGAGM;QAGV,4DAAc;;QAfC,0DAA0B;QAA1B,0FAA0B;QASA,0DAA2B;QAA3B,2FAA2B;;;;;;;;;;;;;;AC1BpE;AAAA;AAAA;AAAA;AAAA;AAAuD;AAEhB;;;AAEvC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mDAAQ;KACpB;CACF,CAAC;AAMK,MAAM,qBAAqB;;0FAArB,qBAAqB;oGAArB,qBAAqB;wGAHvB,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,qBAAqB,uFAFtB,4DAAY;;;;;;;;;;;;;ACbxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACF;AAEA;AAEiB;AAEvB;AAGqD;AACrB;;AAkBhE,MAAM,cAAc;;4EAAd,cAAc;6FAAd,cAAc;iGAdhB;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,0EAAqB;YAErB,kFAAoB;YACpB,yGAAsB;SACvB;mIAMU,cAAc,mBALV,mDAAQ,aARrB,4DAAY;QACZ,0DAAW;QACX,0DAAW;QACX,0EAAqB;QAErB,kFAAoB;QACpB,yGAAsB","file":"pages-news-news-module-es2015.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { NewsEvento } from 'src/app/models/newsevento.model';\r\nimport { Subscription } from 'rxjs';\r\nimport { StartService } from 'src/app/services/start.service';\r\nimport { Area } from 'src/app/models/area.model';\r\nimport { NavController, LoadingController, ToastController, ModalController } from '@ionic/angular';\r\nimport { NewsdetailPage } from 'src/app/pages/newsdetail/newsdetail.page'\r\n\r\n@Component({\r\n  selector: 'app-news',\r\n  templateUrl: './news.page.html',\r\n  styleUrls: ['./news.page.scss'],\r\n})\r\nexport class NewsPage implements OnInit, OnDestroy {\r\n\r\n  listNews: NewsEvento[] = [];\r\n  subListNews: Subscription;\r\n  areaSelected: Area; //Area Selezionata\r\n  subAreaSelected: Subscription; \r\n  maxRecord = 20; //Numero massimo di News richieste al server\r\n  noNewsCard: NewsEvento; //Card per quando non ci sono Eventi\r\n\r\n\r\n  constructor(private startService: StartService,\r\n              private navController: NavController,\r\n              private loadingController: LoadingController,\r\n              private toastController: ToastController,\r\n              private modalController: ModalController) { \r\n\r\n    //Recupero la card che dice che non ci sono eventi\r\n    this.noNewsCard = NewsEvento.getNoNews();\r\n\r\n    this.requestNews();\r\n\r\n\r\n    \r\n  }\r\n\r\n  /**\r\n   * Richiede al server le news\r\n   */\r\n  private requestNews() {\r\n    this.loadingController.create({\r\n      spinner: 'circular',\r\n      message: 'Caricamento',\r\n      backdropDismiss: true\r\n    }).then(loading => {\r\n      loading.present();\r\n      // Recupero subito l'area non Observable\r\n      this.areaSelected = this.startService.areaSelectedValue;\r\n      this.startService.requestNews(this.areaSelected.ID, this.maxRecord).then(data => {\r\n        this.listNews = data;\r\n        loading.dismiss();\r\n      }).catch(error => {\r\n        console.log(error);\r\n        loading.dismiss();\r\n        this.showMessage(\"Errore nel caricamento\");\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.subAreaSelected) {\r\n      this.subAreaSelected.unsubscribe();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /** Eseguo un refresh delle news */\r\n  doRefresh(evento:any) {\r\n        \r\n    this.startService.requestNews(this.areaSelected.ID, this.maxRecord).then(data => {\r\n      this.listNews = data;\r\n      evento.target.complete();\r\n    }).catch(error => {\r\n      console.log(error);\r\n      evento.target.complete();\r\n      this.showMessage(\"Errore nel caricamento\");\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  /**\r\n   * Apre in modalitÃ  modale la news\r\n   * @param news News da leggere\r\n   */\r\n  onClickNews(news: NewsEvento, event:any) {\r\n      // Le news Inserted sono finte, non posso aprirle\r\n        //this.navController.navigateForward(['/','news',news.ID]);\r\n      this.modalController.create({\r\n        component:NewsdetailPage,\r\n        componentProps:{myNews:news}\r\n      }).then(modal=>{\r\n        modal.present();\r\n      })\r\n      }\r\n  \r\n\r\n  showMessage(messaggio:string){\r\n    this.toastController.create({\r\n      message:messaggio\r\n    }).then(toast=>{\r\n      toast.present();\r\n    })\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar color=\"primary\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button  defaultHref=\"/\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      News ed Eventi\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content >\r\n\r\n  <ion-refresher slot=\"fixed\" s (ionRefresh)=\"doRefresh($event)\">\r\n    <ion-refresher-content></ion-refresher-content>\r\n  </ion-refresher>\r\n\r\n    <!-- NEWS PRESENTI -->\r\n    <ion-grid *ngIf=\"listNews.length != 0 \">\r\n      <ion-row>\r\n        <ion-col *ngFor=\"let news of listNews\">\r\n          <app-news-eventi [myNews]=\"news\" (clickNews)=\"onClickNews(news,$event)\"></app-news-eventi>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n  \r\n    <!-- NEWS NON PRESENTI -->\r\n    <div class=\"nofind-cnt ion-padding\" *ngIf=\"listNews.length === 0 \">\r\n      <ion-label class=\"ion-padding-horizontal\">Nessun evento in programma</ion-label>\r\n      <ion-label class=\"ion-padding-horizontal\">Torna a trovarci per scoprire i prossimi eventi</ion-label>\r\n    </div>\r\n\r\n\r\n</ion-content>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { NewsPage } from './news.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: NewsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class NewsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { NewsPageRoutingModule } from './news-routing.module';\r\n\r\nimport { NewsPage } from './news.page';\r\n\r\nimport { NewsdetailPage } from 'src/app/pages/newsdetail/newsdetail.page';\r\nimport { SharedComponentsModule } from 'src/app/shared/components/shared-components.module';\r\nimport { NewsdetailPageModule } from '../newsdetail/newsdetail.module';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    NewsPageRoutingModule,\r\n    \r\n    NewsdetailPageModule,\r\n    SharedComponentsModule\r\n  ],\r\n  declarations: [NewsPage],\r\n  entryComponents:[NewsdetailPage]\r\n\r\n  \r\n})\r\nexport class NewsPageModule {}\r\n"],"sourceRoot":"webpack:///"}