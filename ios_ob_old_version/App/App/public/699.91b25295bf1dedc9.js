"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[699],{699:(P,m,s)=>{s.r(m),s.d(m,{EditAccountPageModule:()=>U});var c=s(9808),n=s(4182),h=s(378),a=s(5362),d=s(2028),f=s(5351),u=s(4021),g=s(1247),A=s(7181),p=s(1799),Z=s(1902),t=s(2096);function N(i,r){if(1&i&&(t.TgZ(0,"ion-select-option",31),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.description," ")}}function v(i,r){1&i&&(t.TgZ(0,"ion-item")(1,"ion-label",9),t._uU(2,"Cap"),t.qZA(),t._UZ(3,"ion-input",32),t.qZA())}function T(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateTel()}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-badge",34),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.utente.MOBILENUMBER?e.utente.MOBILENUMBER:"Non definito"),t.xp6(2),t.Oqu(e.utente.getLabelVerificaMobile())}}function O(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().validateEmail()}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-badge",34),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.utente.EMAIL?e.utente.EMAIL:"Non definita"),t.xp6(2),t.Oqu(e.utente.getLabelVerificaMail())}}function I(i,r){1&i&&(t.TgZ(0,"ion-item")(1,"ion-label",9),t._uU(2,"Cellulare"),t.qZA(),t._UZ(3,"ion-input",35),t.qZA())}function C(i,r){1&i&&(t.TgZ(0,"ion-item")(1,"ion-label",9),t._uU(2,"E-Mail"),t.qZA(),t._UZ(3,"ion-input",36),t.qZA())}const _=[{path:"",component:(()=>{class i{constructor(e,o,l,S,b){this.startService=e,this.navCtr=o,this.toastCtr=l,this.loadingController=S,this.modalController=b,this.utente=new f.oD,this.listSesso=[],this.docGruppo=new Z.w,this.showCapNascita=!1,this.utenteListen=this.startService.utente.subscribe(M=>{this.utente=M,null==this.utente.MOBILENUMBER&&(this.utente.MOBILENUMBER=""),this.createForm()}),this.listSesso=u.Gs.getArray(u._z)}ngOnInit(){this.today=A.G.formatDateISO(new Date),this.docGruppo=this.startService.actualStartConfig.gruppo}ngOnDestroy(){this.utenteListen&&this.utenteListen.unsubscribe()}createForm(){if(this.form=new n.cw({nome:new n.NI(this.utente.NOME,{updateOn:"change",validators:[n.kI.required]}),cognome:new n.NI(this.utente.COGNOME,{updateOn:"change",validators:[n.kI.required]}),sesso:new n.NI(this.utente.SESSO,{updateOn:"change",validators:[]}),nascita:new n.NI(this.utente.NATOIL?this.utente.NATOIL.toISOString():this.utente.NATOIL,{updateOn:"change",validators:[]}),provNascita:new n.NI(this.utente.NATOPROV,{updateOn:"change",validators:[]}),comNascita:new n.NI(this.utente.NATOA,{updateOn:"change",validators:[]}),statoNascita:new n.NI(this.utente.NATOISOSTATO,{updateOn:"change",validators:[]}),capNascita:new n.NI(this.utente.NATOCAP,{updateOn:"change",validators:[]}),provResidenza:new n.NI(this.utente.PROVINCIA,{updateOn:"change",validators:[]}),comResidenza:new n.NI(this.utente.COMUNE,{updateOn:"change",validators:[]}),indResidenza:new n.NI(this.utente.INDIRIZZO,{updateOn:"change",validators:[]}),capResidenza:new n.NI(this.utente.CAP,{updateOn:"change",validators:[]}),statoResidenza:new n.NI(this.utente.ISOSTATO,{updateOn:"change",validators:[]}),cf:new n.NI(this.utente.CODICEFISCALE,{updateOn:"change",validators:[n.kI.pattern("^[A-Za-z]{6}[0-9]{2}[A-Za-z]{1}[0-9]{2}[A-Za-z]{1}[0-9]{3}[A-Za-z]{1}")]})}),!this.docGruppo.needMobileVerify){let o=new n.NI(this.utente.MOBILENUMBER,{updateOn:"change",validators:[n.kI.pattern("^[0-9]*$")]});this.form.addControl("mobile",o)}if(!this.docGruppo.needEmailVerify){let o=new n.NI(this.utente.EMAIL,{updateOn:"change",validators:[n.kI.email]});this.form.addControl("email",o)}}onSubmit(){this.form.valid&&(this.utente.NOME=this.form.value.nome,this.utente.COGNOME=this.form.value.cognome,this.utente.SESSO=this.form.value.sesso,this.utente.CODICEFISCALE=this.form.value.cf,this.utente.INDIRIZZO=this.form.value.indResidenza,this.utente.COMUNE=this.form.value.comResidenza,this.utente.CAP=this.form.value.capResidenza,this.utente.PROVINCIA=this.form.value.provResidenza,this.utente.ISOSTATO=this.form.value.statoResidenza,this.form.value.nascita&&(this.utente.NATOIL=new Date(this.form.value.nascita)),this.utente.NATOA=this.form.value.comNascita,this.utente.NATOCAP=this.form.value.capNascita,this.utente.NATOPROV=this.form.value.provNascita,this.utente.NATOISOSTATO=this.form.value.statoNascita,this.docGruppo.needEmailVerify||(this.utente.EMAIL=this.form.value.email),this.docGruppo.needMobileVerify||(this.utente.MOBILENUMBER=this.form.value.mobile),this.loadingController.create({message:"Aggiornamento dati...",spinner:"circular"}).then(e=>{e.present(),this.startService.updateUtente(this.utente).then(o=>{e.dismiss(),this.showMessage("Info Aggiornate"),this.closePage()},o=>{e.dismiss(),this.showMessage("Errore  di connessione"),console.log(o)})}))}onCfChange(){let e=this.form.value.cf;null!=e&&null!=e&&0!=e.length&&this.startService.checkCodiceFiscale(e,!0).then(o=>{this.utente.NATOISOSTATO="Italia",this.utente.NATOA=o.comune,this.utente.NATOPROV=o.provincia,this.utente.NATOIL=o.dataNascita,this.utente.SESSO=o.sesso,this.utente.NATOCAP=o.cap,this.form.get("comNascita").setValue(this.utente.NATOA),this.form.get("provNascita").setValue(this.utente.NATOPROV),this.form.get("nascita").setValue(this.utente.NATOIL.toISOString()),this.form.get("sesso").setValue(this.utente.SESSO),this.form.get("statoNascita").setValue(this.utente.NATOISOSTATO),this.form.get("capNascita").setValue(this.utente.NATOCAP),this.form.controls.cf.setErrors(null)}).catch(o=>{this.form.controls.cf.setErrors({incorrect:!0}),console.log(o)})}closePage(){this.navCtr.navigateBack(["/","account"])}showMessage(e){this.toastCtr.create({message:e,duration:3e3}).then(o=>{o.present()})}validateTel(){this.modalController.create({component:p.I,componentProps:{params:{tipoVerifica:u.Xo.verificasms,updateDocUtente:!1}}}).then(e=>{e.present()})}validateEmail(){this.modalController.create({component:p.I,componentProps:{params:{tipoVerifica:u.Xo.verificaemail,updateDocUtente:!1}}}).then(e=>{e.present()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.D),t.Y36(a.SH),t.Y36(a.yF),t.Y36(a.HT),t.Y36(a.IN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-account"]],decls:94,vars:10,consts:[["color","primary"],["slot","start"],["defaultHref","/account"],["slot","primary"],["fill","clear",3,"disabled","click"],["name","checkmark"],[3,"formGroup"],["color","light"],["name","person-outline","slot","start","color","primary"],["position","floating"],["formControlName","nome"],["formControlName","cognome"],["formControlName","sesso","interface","popover"],[3,"value",4,"ngFor","ngForOf"],["formControlName","cf",3,"ionBlur"],["name","home-outline","slot","start","color","primary"],["formControlName","indResidenza"],["formControlName","comResidenza"],["type","tel","inputmode","tel","maxlength","5","formControlName","capResidenza"],["formControlName","provResidenza"],["formControlName","statoResidenza"],["name","logo-reddit","slot","start","color","primary"],["formControlName","nascita","displayFormat","DD-MM-YYYY","cancelText","Annulla","doneText","Conferma",3,"max"],["formControlName","comNascita"],[4,"ngIf"],["size","4",1,"ion-no-padding"],["formControlName","provNascita"],["formControlName","statoNascita"],["name","call-outline","slot","start","color","primary"],["button","",3,"click",4,"ngIf"],["color","tertiary","expand","block",3,"disabled","click"],[3,"value"],["formControlName","capNascita","type","tel","inputmode","tel","maxlength","5"],["button","",3,"click"],["color","success"],["formControlName","mobile"],["formControlName","email"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-buttons",3)(5,"ion-button",4),t.NdJ("click",function(){return o.onSubmit()}),t._UZ(6,"ion-icon",5),t.qZA()(),t.TgZ(7,"ion-title"),t._uU(8,"Qualcosa su di te"),t.qZA()()(),t.TgZ(9,"ion-content")(10,"form",6)(11,"ion-list")(12,"ion-item-group")(13,"ion-item-divider",7),t._UZ(14,"ion-icon",8),t.TgZ(15,"ion-label"),t._uU(16,"Come ti chiami ?"),t.qZA()(),t.TgZ(17,"ion-item")(18,"ion-label",9),t._uU(19,"Nome"),t.qZA(),t._UZ(20,"ion-input",10),t.qZA(),t.TgZ(21,"ion-item")(22,"ion-label",9),t._uU(23,"Cognome"),t.qZA(),t._UZ(24,"ion-input",11),t.qZA(),t.TgZ(25,"ion-item")(26,"ion-label",9),t._uU(27,"Sesso"),t.qZA(),t.TgZ(28,"ion-select",12),t.YNc(29,N,2,2,"ion-select-option",13),t.qZA()(),t.TgZ(30,"ion-item")(31,"ion-label",9),t._uU(32,"Codice fiscale"),t.qZA(),t.TgZ(33,"ion-input",14),t.NdJ("ionBlur",function(){return o.onCfChange()}),t.qZA()()(),t.TgZ(34,"ion-item-group")(35,"ion-item-divider",7),t._UZ(36,"ion-icon",15),t.TgZ(37,"ion-label"),t._uU(38,"Dove vivi ?"),t.qZA()(),t.TgZ(39,"ion-item")(40,"ion-label",9),t._uU(41,"Indirizzo"),t.qZA(),t._UZ(42,"ion-input",16),t.qZA(),t.TgZ(43,"ion-item")(44,"ion-label",9),t._uU(45,"Comune"),t.qZA(),t._UZ(46,"ion-input",17),t.qZA(),t.TgZ(47,"ion-item")(48,"ion-label",9),t._uU(49,"Cap"),t.qZA(),t._UZ(50,"ion-input",18),t.qZA(),t.TgZ(51,"ion-item")(52,"ion-label",9),t._uU(53,"Provincia"),t.qZA(),t._UZ(54,"ion-input",19),t.qZA(),t.TgZ(55,"ion-item")(56,"ion-label",9),t._uU(57,"Stato"),t.qZA(),t._UZ(58,"ion-input",20),t.qZA()(),t.TgZ(59,"ion-item-group")(60,"ion-item-divider",7),t._UZ(61,"ion-icon",21),t.TgZ(62,"ion-label"),t._uU(63,"Quando sei nato ?"),t.qZA()(),t.TgZ(64,"ion-item")(65,"ion-label",9),t._uU(66,"Data"),t.qZA(),t._UZ(67,"ion-datetime",22),t.qZA(),t.TgZ(68,"ion-item")(69,"ion-label",9),t._uU(70,"Comune"),t.qZA(),t._UZ(71,"ion-input",23),t.qZA(),t.YNc(72,v,4,0,"ion-item",24),t.TgZ(73,"ion-item")(74,"ion-col",25)(75,"ion-label",9),t._uU(76,"Provincia"),t.qZA(),t._UZ(77,"ion-input",26),t.qZA()(),t.TgZ(78,"ion-item")(79,"ion-label",9),t._uU(80,"Stato"),t.qZA(),t._UZ(81,"ion-input",27),t.qZA()(),t.TgZ(82,"ion-item-group")(83,"ion-item-divider",7),t._UZ(84,"ion-icon",28),t.TgZ(85,"ion-label"),t._uU(86,"Cellulare e Email"),t.qZA()(),t.YNc(87,T,5,2,"ion-item",29),t.YNc(88,O,5,2,"ion-item",29),t.YNc(89,I,4,0,"ion-item",24),t.YNc(90,C,4,0,"ion-item",24),t.qZA()()()(),t.TgZ(91,"ion-footer")(92,"ion-button",30),t.NdJ("click",function(){return o.onSubmit()}),t._uU(93," Conferma "),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("disabled",!o.form.valid),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(19),t.Q6J("ngForOf",o.listSesso),t.xp6(38),t.Q6J("max",o.today),t.xp6(5),t.Q6J("ngIf",o.showCapNascita),t.xp6(15),t.Q6J("ngIf",o.docGruppo.needMobileVerify),t.xp6(1),t.Q6J("ngIf",o.docGruppo.needEmailVerify),t.xp6(1),t.Q6J("ngIf",!o.docGruppo.needMobileVerify),t.xp6(1),t.Q6J("ngIf",!o.docGruppo.needEmailVerify),t.xp6(2),t.Q6J("disabled",!o.form.valid))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.YG,a.gu,a.wd,a.W2,n._Y,n.JL,n.sg,a.q_,a.Ub,a.rH,a.Q$,a.Ie,a.pK,a.j9,n.JJ,n.u,a.t9,a.QI,c.sg,a.n0,n.nD,a.x4,c.O5,a.wI,a.yp,a.fr],styles:[""]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(_)],d.Bz]}),i})(),U=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,n.u5,a.Pc,E,n.UX,h.VerifyPageModule]]}),i})()}}]);