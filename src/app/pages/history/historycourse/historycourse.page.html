<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/historylist"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ myCorso.TIPO | tipoCorso }}</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>

<div *ngIf="!myIscrizione || !myCorso" id="crs-spinner">
  <ion-progress-bar type="indeterminate"></ion-progress-bar>
</div>

<div *ngIf="myIscrizione && myCorso">

  <ion-grid>
    <ion-row>
      <ion-col size="12" size-xl= "12" size-sm="12">
          <!-- PORZIONE INFO QRCODE-->
          <div class="ion-text-center div-qr" mode="md" *ngIf="myIscrizione.CODICEALFA">
            <h6>ID: {{myIscrizione.CODICEALFA}}</h6>
            <qrcode [qrdata]="myIscrizione.CODICEALFA" [allowEmptyString]="true"></qrcode>
            <p>
              <ion-icon name="information-circle-outline" color="primary"></ion-icon>
              Presenta il Qr-code o l'ID iscrizione all'ingresso
            </p>
          </div> 
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" size-xl= "12" size-sm="12">
            <!-- PORZIONE BOTTONI CALENDARIO / ALLEGATI -->
            <div class="ion-text-center div-btns">
              <ion-button 
                      layout="icon-top" 
                      fill="clear" 
                      
                      (click)="onClickCalendar()">
                <ion-icon slot="start" name="calendar-outline"></ion-icon>
                <ion-label>Calendario</ion-label>
              </ion-button>


              <ion-button  fill="clear"  (click)="onClickAllegati()">
                <ion-icon slot="start"name="document-attach-outline"></ion-icon>
                <ion-label>Allegati</ion-label>
              </ion-button>

            </div>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12" size-xl= "6" size-sm="12">

        <!-- CARD SCHEDA ISCRIZIONE -->
        <ion-card>
          <ion-card-header [color]="iscrizioneConfermata() ? 'success' : 'warning'">
            <strong>Scheda Iscrizione</strong>
          </ion-card-header>

          <ion-item *ngIf="iscrizioneConfermata()">
            <ion-label>Iscrizione effettuata il {{myIscrizione.DATAISCRIZIONE|date:'dd/MM/yy' }}</ion-label>
            <ion-badge 
                slot="end"
                color="success">CONFERMATA</ion-badge>
          </ion-item>

          <ion-item *ngIf="iscrizioneConfermata() == false">
            <ion-label>Iscrizione effettuata il {{myIscrizione.DATAISCRIZIONE|date:'dd/MM/yy' }}</ion-label>
            <ion-badge 
                slot="end"
                color="danger">DA CONFERMARE</ion-badge>
          </ion-item>

          <ion-item *ngIf="myCorso.isAPagamento()">
            <ion-label>
              Totale
            </ion-label>
            <ion-label slot="end">
              {{myIscrizione.IMPORTO | currency : 'EUR'}}
            </ion-label>
          </ion-item>

          <ion-item *ngIf="myCorso.isAPagamento()==false">
            <ion-label>
              Totale
            </ion-label>
            <ion-badge slot="end" color="success">GRATUITA</ion-badge>
          </ion-item>

          <ion-item color="danger">
            <ion-label 
                class="ion-text-wrap ion-text-bold">
              {{myIscrizione.getCaptionStatePayment()}}
            </ion-label>
          </ion-item>
        </ion-card>

      </ion-col>

      <!-- NOME CORSO E ALTRE INFO -->     
      <ion-col size="12" size-xl= "6" size-sm="12">
        <ion-list lines="none">
  
          <!-- NOME CORSO -->
          <ion-item>
            <ion-label class="ion-text-wrap">
              <h2>{{myCorso.DENOMINAZIONE}}</h2>
              <p>{{myCorso['_DENOMINAZIONE_Sport']}}</p>
            </ion-label>
            <ion-chip color="primary">
              <i class="icon-sport"><span [innerHTML]="getIcon(myCorso)"></span></i> 
            </ion-chip>
          </ion-item>
    
          <!-- PROGRAMMA DEL CORSO -->
          <ion-item 
              (click)="onClickExpandCorsoProgramma()"
              *ngIf="myCorso?.existProgrammaCorso()">
    
            <ion-label 
                [ngClass]="getClassLabelProgramma()">
              <span style="font-size:small;" [innerHTML]="myCorso.getFullProgrammaHTML()"></span>
            </ion-label>
    
          </ion-item>
    
            <!-- GIORNATA SETTIMANA -->
            <app-settimana-block
              [listDays]="myCorso._SETTIMANA">
            </app-settimana-block>      
    
            <!-- DATA INIZIO -->
          <ion-item>
            <ion-label class="ion-text-wrap">
              <h2>{{myCorso.DATAINIZIO| date : 'EEEE dd/LL/yyyy'|titlecase}}</h2>
              <p>alle {{myCorso.ORAINIZIO | date : 'HH:mm'}} per {{myCorso.ORELEZIONE}} {{myCorso.ORELEZIONE > 1 ?'Ore':'Ora'}} </p>
              <p>inizio corso</p>
            </ion-label>
            <ion-chip color="primary">
              <span>{{myCorso.NUMEROLEZIONI}}&nbsp;{{myCorso.NUMEROLEZIONI > 1 ? 'Incontri ':'Incontro '}}</span>
            </ion-chip>
          </ion-item>
    
          
          <!-- DATA FINE -->
          <ion-item>
            <ion-label class="ion-text-wrap">
              <h2>{{myCorso.DATAFINE| date : 'EEEE dd/LL/yyyy'|titlecase}}</h2>
              <p>fine corso</p>
            </ion-label>
          </ion-item>      
    
          <!-- LOCATION -->
          <ion-item>
            <ion-label class="ion-text-wrap">
              <h2>{{myLocation.DENOMINAZIONE | uppercase}}</h2>
              <p>{{myLocation?.COMUNE|titlecase}}</p>
              <p>{{myLocation?.INDIRIZZO|titlecase}}</p>
            </ion-label>
            <ion-chip color="primary" *ngIf="myLocation.TELEFONO">
              {{myLocation.TELEFONO}}
              <ion-icon name="call-outline"></ion-icon>
            </ion-chip>
          </ion-item>
        </ion-list>
        

        
        <ion-list lines="none">
          <!-- ADATTO A -->
          <ion-item-group *ngIf="myCorso">

          <ion-item-divider color="light">
            <ion-label>
              <h2>Rivolto a</h2>
            </ion-label>
          </ion-item-divider>

          <ion-item>
            <ion-icon 
                name="stats-chart-outline"
                slot="end" 
                color="primary"></ion-icon>
          <ion-label class="ion-text-wrap">{{myCorso['_DENOMINAZIONE_Livello'] ? myCorso['_DENOMINAZIONE_Livello']:'Tutti i Livelli'}}</ion-label>
          </ion-item>

          <ion-item>
            <ion-icon 
                name="bookmark-outline" 
                slot="end" 
                color="primary"></ion-icon>
            <ion-label class="ion-text-wrap">{{myCorso['_DESCTOOLTIP_CategoriaEta'] ? myCorso['_DESCTOOLTIP_CategoriaEta']:'Per tutte le et√†'}}</ion-label>
          </ion-item>

          <ion-item lines="none">
            <ion-icon 
              name="transgender-outline" 
              slot="end" 
              color="primary"></ion-icon>
            <ion-label class="ion-text-wrap">{{myCorso.TARGETSESSO | targetSesso}}</ion-label>
          </ion-item>

          </ion-item-group>
        </ion-list>

      </ion-col>
    </ion-row>
  </ion-grid>
</div>

</ion-content>

<!-- FOOTER CON INFO ISCRIZIONE -->


