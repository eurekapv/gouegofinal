<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button 
        [defaultHref]="backButtonHref"
        text="Indietro">
      </ion-back-button>
    </ion-buttons>
    <ion-title>ELIMINAZIONE PROFILO</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="content-wrapper">
    <ion-grid class="ion-no-padding">
      <ion-row>
        <ion-col 
          sizeXs="12" 
          sizeSm="12" 
          sizeMd="10" offsetMd="1"
          sizeLg="8" offsetLg="2"
          sizeXl="6" offsetXl="3">

          <!-- CARD PRINCIPALE CON AVVISO -->
          <div class="warning-card">
            <div class="warning-icon-container">
              <ion-icon name="alert-circle" class="warning-icon"></ion-icon>
            </div>
            
            <h2 class="warning-title">Vuoi cancellare il profilo?</h2>
            
            <div class="warning-content">
              <p class="warning-text-primary">
                <ion-icon name="close-circle-outline"></ion-icon>
                Stai eliminando definitivamente il tuo profilo
              </p>
              
              <p class="warning-text-secondary">
                Eliminando il profilo, non potrai più controllare le attività presso il centro, 
                effettuare iscrizione ai corsi e prenotazione dei campi. Per continuare a rimanere 
                aggiornato sulle nostre attività, ti invitiamo a non eliminare il profilo.
              </p>
            </div>

            <!-- ILLUSTRAZIONE -->
            <div class="illustration-container">
              <img 
                src="assets/img/profilemobile200.jpg" 
                alt="Eliminazione profilo"
                class="illustration-image"/>
            </div>
          </div>

          <!-- CARD VERIFICA PASSWORD -->
          <div class="password-card">
            <div class="password-header">
              <div class="lock-icon-container">
                <ion-icon name="shield-checkmark" class="lock-icon"></ion-icon>
              </div>
              <div class="password-header-text">
                <h3>Verifica la tua identità</h3>
                <p>Inserisci la tua password attuale per confermare l'eliminazione</p>
              </div>
            </div>

            <form [formGroup]="form" class="password-form">
              <!-- CAMPO PASSWORD 1 -->
              <div class="input-group">
                <label class="input-label">Password Attuale</label>
                <div class="input-container">
                  <ion-icon name="lock-closed" class="input-icon"></ion-icon>
                  <input 
                    [type]="showNew ? 'text' : 'password'"
                    formControlName="actualPassword1" 
                    placeholder="Inserisci la password attuale" 
                    id="actualPassword1"
                    #actualPassword1
                    class="custom-input"/>
                  <button 
                    type="button"
                    class="toggle-visibility-btn"
                    (click)="showHideInput('actualPassword1', actualPassword1)">
                    <ion-icon [name]="showNew ? 'eye-off' : 'eye'"></ion-icon>
                  </button>
                </div>
              </div>

              <!-- CAMPO PASSWORD 2 -->
              <div class="input-group">
                <label class="input-label">Conferma Password</label>
                <div class="input-container">
                  <ion-icon name="lock-closed" class="input-icon"></ion-icon>
                  <input 
                    [type]="showNewRetype ? 'text' : 'password'"
                    formControlName="actualPassword2" 
                    placeholder="Conferma la password" 
                    id="actualPassword2"
                    #actualPassword2
                    class="custom-input"/>
                  <button 
                    type="button"
                    class="toggle-visibility-btn"
                    (click)="showHideInput('actualPassword2', actualPassword2)">
                    <ion-icon [name]="showNewRetype ? 'eye-off' : 'eye'"></ion-icon>
                  </button>
                </div>
              </div>

              <!-- MESSAGGIO DI ERRORE -->
              <div class="error-message" *ngIf="!form.valid && form.value.actualPassword1 && form.value.actualPassword2">
                <ion-icon name="alert-circle-outline"></ion-icon>
                <span>{{ invalidMessage() }}</span>
              </div>
            </form>
          </div>

          <!-- BOTTONI AZIONE -->
          <div class="action-buttons">
            <ion-button
              class="cancel-button"
              expand="block"
              fill="outline"
              (click)="onGoToBack()">
              <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
              Annulla
            </ion-button>

            <ion-button
              class="delete-button"
              expand="block"
              color="danger"
              [disabled]="!form.valid"
              (click)="onClickElimina()">
              <ion-icon name="trash-outline" slot="start"></ion-icon>
              Elimina Profilo
            </ion-button>
          </div>

          <!-- FOOTER INFO -->
          <div class="footer-info">
            <ion-icon name="information-circle-outline"></ion-icon>
            <p>Questa azione è irreversibile. Una volta eliminato il profilo, 
               non sarà più possibile recuperarlo.</p>
          </div>

        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>