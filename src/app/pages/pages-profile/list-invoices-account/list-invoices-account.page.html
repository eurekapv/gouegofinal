<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button [defaultHref]="backButtonHref"></ion-back-button>
    </ion-buttons>
    <ion-title>RICEVUTE ACQUISTI</ion-title>
  </ion-toolbar> 
</ion-header>

<ion-content>
  
  <!-- REFRESHER -->
  <ion-refresher slot="fixed" (ionRefresh)="requestRicevute($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="page-container">

    <!-- INFO BOX -->
    <div class="info-box">
      <ion-icon name="information-circle" class="info-icon"></ion-icon>
      <p>Qui trovi l'elenco delle ricevute relative alle iscrizioni corsi ed alle prenotazioni presso il centro</p>
    </div>

    <!-- FILTRO ANNO -->
    <div class="year-selector">
      <app-dtinput
            [(actualDate)]="yearSelected"
            (actualDateChange)="requestRicevute()"
            calendarMode="year"
            iconColor="primary"
            iconName="calendar-outline" 
            label="Periodo"
            title="Seleziona un Anno">
      </app-dtinput>
    </div>

    <!-- LISTA RICEVUTE -->
    <div class="invoices-list" *ngIf="listRicevute.length > 0">
      
      <div class="invoice-card" 
           *ngFor="let ricevuta of listRicevute"
           (click)="onClickElement(ricevuta)">
        
        <!-- Icona e Tipo -->
        <div class="invoice-icon">
          <ion-icon name="receipt"></ion-icon>
        </div>

        <!-- Contenuto ricevuta -->
        <div class="invoice-content">
          
          <!-- Numero e tipo -->
          <h3 class="invoice-title">
            {{ricevuta.TIPOLOGIA | tipomasterdocumento}} num. {{ricevuta.NUMEROSTAMPA}}
          </h3>

          <!-- Data emissione -->
          <p class="invoice-date">
            <ion-icon name="calendar-outline"></ion-icon>
            Emessa il {{ricevuta.DATADOCUMENTO | date : 'dd/MM/yyyy'}}
          </p>

          <!-- Note (se presenti) -->
          <p class="invoice-notes" *ngIf="ricevuta.NOTESSTAMPA && ricevuta.NOTESSTAMPA.length !== 0">
            <ion-icon name="document-text-outline"></ion-icon>
            {{ricevuta.NOTESSTAMPA}}
          </p>

        </div>

        <!-- Importo e Download -->
        <div class="invoice-actions">
          
          <!-- Importo -->
          <div class="invoice-amount">
            {{ricevuta.TOTDOCUMENTO | currency: 'EUR'}}
          </div>

          <!-- Icona download -->
          <div class="download-icon">
            <ion-icon name="download"></ion-icon>
          </div>

        </div>

      </div>

    </div>

    <!-- EMPTY STATE -->
    <div class="empty-state" *ngIf="listRicevute.length === 0">
      <div class="empty-icon">
        <ion-icon name="receipt-outline"></ion-icon>
      </div>
      <h3>Nessuna ricevuta</h3>
      <p>Non ci sono ricevute per l'anno selezionato</p>
    </div>

  </div>

</ion-content>