<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button [defaultHref]="backButtonHref"></ion-back-button>
    </ion-buttons>
    <ion-title>PACCHETTI ORE</ion-title>
  </ion-toolbar> 
</ion-header>

<ion-content>

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="page-container">
    
    <!-- INFO BOX -->
    <div class="info-box">
      <ion-icon name="information-circle" class="info-icon"></ion-icon>
      <p>Qui trovi l'elenco dei pacchetti ore acquistati e i minuti ancora disponibili</p>
    </div>

    <!-- CARD HERO - MINUTI RESIDUI -->
    <div class="hero-card">
      
      <!-- Sezione superiore con gradiente -->
      <div [class]="minutiValue==0 ?'hero-header hero-header-zero':'hero-header'">
        <div class="hero-icon">
          <ion-icon name="time"></ion-icon>
        </div>
        <h2>Minuti Disponibili</h2>
      </div>

      <!-- Numero grande centrale -->
      <div class="hero-number">
        <div class="number-display">
          <span [class]="minutiValue==0 ?'number number-zero':'number'">{{minutiValue}}</span>
          <span class="label">minuti</span>
        </div>
      </div>

      <!-- Info pacchetti -->
      <div class="hero-info">
        <div class="info-item">
          <ion-icon name="ticket"></ion-icon>
          <div>
            <p class="info-title">Pacchetti Allenamenti</p>
            <p class="info-subtitle">residui</p>
          </div>
        </div>
        <div class="info-divider"></div>
        <div class="info-item">
          <ion-icon name="list"></ion-icon>
          <div>
            <p class="info-title">Utilizzabili in</p>
            <p class="info-subtitle">corsi aperti</p>
          </div>
        </div>
      </div>

    </div>

    <!-- LISTA PACCHETTI -->
    <div class="pacchetti-section" *ngIf="loadedData && listUtenteMinuti.length != 0">
      
      <div class="section-header">
        <h3>Storico Pacchetti</h3>
        <ion-badge color="primary">{{listUtenteMinuti.length}}</ion-badge>
      </div>

      <div class="pacchetti-list">
        <div class="pacchetto-card" *ngFor="let item of listUtenteMinuti; let i = index">
          
          <!-- Badge data -->
          <div class="pacchetto-header">
            <ion-badge class="date-badge">
              <ion-icon name="calendar-outline"></ion-icon>
              {{item.DATAOPERAZIONE | date: 'dd MMM yyyy'}}
            </ion-badge>
          </div>

          <!-- Contenuto pacchetto -->
          <div class="pacchetto-body">
            <div class="pacchetto-info">
              <h4>{{item.DESCRIZIONE}}</h4>
            </div>
            <div class="pacchetto-minuti">
              <span class="minuti-value">{{item.VALOREMINUTI}}</span>
              <span class="minuti-label">min</span>
            </div>
          </div>

          <!-- Linea timeline (tranne ultimo) -->
          <div class="timeline-line" *ngIf="i < listUtenteMinuti.length - 1"></div>

        </div>
      </div>

    </div>

    <!-- EMPTY STATE -->
    <div class="empty-state" *ngIf="loadedData && listUtenteMinuti.length == 0">
      <ion-icon name="time-outline"></ion-icon>
      <h3>Nessun pacchetto trovato</h3>
      <p>Non hai ancora acquistato pacchetti ore</p>
    </div>

  </div>

</ion-content>