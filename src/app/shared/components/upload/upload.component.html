<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button 
          (click)="close()">
          <ion-icon name="arrow-back-outline"></ion-icon>
    </ion-button>
  </ion-buttons>
  <ion-title>Carica documento</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- <div class="icon-container">
    <ion-icon name="cloud-upload-outline"></ion-icon>  
  </div> -->

  <div class="title-image">
    <img src="assets/img/image-upload-bro.png"/>
  </div>  
  
  <ion-list>

    <!-- INFORMAZIONI -->
    <div class="info">
      <ion-item color="light" lines="none">
        <ion-label>
          <p class="ion-text-wrap">
            <ion-icon name="information-circle-outline" color="primary"></ion-icon>
            invia il tuo documento, scegliendo la tipologia ed impostando una data di scadenza in caso di certificati medici o documenti di identità; alla ricezione del documento la segreteria effettuerà un controllo di validità.
        </ion-label>
      </ion-item>
    </div> 
 

    <!-- SE SONO SU MOBILE -->
    <ion-item-group 
          *ngIf="!isDesktop">
  
      <ion-item-divider 
          class="ion-padding-vertical"  
          color="light">

        <ion-label >
          <h2>Carica da</h2>
        </ion-label>
        </ion-item-divider>


          <ion-item 
              [color]="sorgenteFile == TSorgenteFile.filesystem ? colorItemSelected : colorItemEmpty"
              [detail]="true"
              [button]="true"
              (click)="handleChangeMobSource(TSorgenteFile.filesystem)">
            <ion-icon slot="start" name="document-text-outline" size="small"></ion-icon>
            <ion-label>Cartella Documenti</ion-label>
          </ion-item>

          <ion-item
              [color]="sorgenteFile == TSorgenteFile.takephoto ? colorItemSelected : colorItemEmpty"
              [detail]="true"
              [button]="true"
              (click)="handleChangeMobSource(TSorgenteFile.takephoto)">
            <ion-icon slot="start" name="camera-outline" size="small"></ion-icon>
            <ion-label>Scatta una foto</ion-label>
          </ion-item>

          <ion-item
            [color]="sorgenteFile == TSorgenteFile.fromgallery ? colorItemSelected : colorItemEmpty"
            [detail]="true"
            [button]="true"
            (click)="handleChangeMobSource(TSorgenteFile.fromgallery)"
              >
            <ion-icon slot="start" name="images-outline" size="small"></ion-icon>
            <ion-label>Libreria Foto</ion-label>
          </ion-item>          

        
    </ion-item-group>


    <!-- mostro solo se sono su desktop oppure ho il file caricato-->
    <ion-item-group 
            *ngIf="fileLoaded || isDesktop"
            class="ion-margin-vertical">
      <ion-item-divider 
          class="ion-padding-vertical"  
          color="light">
        <ion-label>
          <h2>Documento caricato</h2>
        </ion-label>
        </ion-item-divider> 

        <!-- SE  SIAMO SU DESKTOP -->
        <ion-item  *ngIf="isDesktop" button (click)="onDesktopSearch()">
            <input accept=".pdf, image/*" hidden id="myInput" type="file" (change)="onChangedDesktopFile($event)">
            <ion-icon slot="start" name="folder-open-outline"></ion-icon>
            <ion-label *ngIf="!loadedDesktopFile" class="myPlaceholder">Fai clic e scegli il file</ion-label>
            <p>{{fileNameShow}}</p>
        </ion-item>
    
        <!-- SE  SIAMO SU MOBILE -->
        <ion-item *ngIf="!isDesktop" button (click)="onMobileSearch()">
          <ion-icon slot="start" name="folder-open-outline"></ion-icon>
          <ion-label *ngIf="!fileLoaded" class="myPlaceholder">premi per scegliere</ion-label>
          {{fileNameShow}}
        </ion-item>


    </ion-item-group> 

    <!-- COSA STA CARICANDO -->


    <!-- RADIO GROUP CON ELENCO -->
    <ion-item-group class="ion-margin-vertical">
      <ion-item-divider 
          class="ion-padding-vertical"  
          color="light">
        <ion-label>
          <h2>COSA CONTIENE</h2>
        </ion-label>
        </ion-item-divider> 

        <ion-item 
            (click)="handleChangeDocType(myTypeDoc.ID)"
            [color]="myTypeDoc.ID == idDocTypeSelected ? colorItemSelected : colorItemEmpty"
            [detail]="false"
            [button]="true"
            *ngFor="let myTypeDoc of docTypeList">
            <ion-icon 
                slot="end" 
                name="checkmark-outline" 
                *ngIf="myTypeDoc.ID == idDocTypeSelected">
            </ion-icon>
            <ion-label>{{myTypeDoc.DENOMINAZIONE}}</ion-label>
        </ion-item>

        <!-- DESCRIZIONE -->
        <ion-item>
          <ion-icon slot="start" name="information-circle-outline"></ion-icon>
          <ion-textarea 
                [autoGrow]="true"
                placeholder="Inserisci una descrizione"  
                [(ngModel)]="docDescription" 
                maxlength="50"></ion-textarea>      
        </ion-item>
   
        <!-- FLAG SCADENZA -->
        <ion-item 
              (click)="flagDocScadenza=!flagDocScadenza">
            <ion-icon slot="start" name="calendar-number-outline"></ion-icon>
            <ion-label>con scadenza</ion-label>
            <ion-icon slot="end" [name]="flagDocScadenza ? 'radio-button-on-outline' : 'radio-button-off-outline'"></ion-icon>
        </ion-item>
     
        <!-- data scadenza -->
        <app-dtinput
            *ngIf="flagDocScadenza"
            title="Data Scadenza Documento"
            itemLines="full"
            itemDetail="true"
            iconName="calendar-outline"
            iconColor="primary"
            maskFormat="dddd dd/MM/yyyy"
            calendarMode="date"
            [(actualDate)]="docScadenza"
          >
          </app-dtinput>               

    </ion-item-group>
        
    <div class="spacer"></div>


  </ion-list>



</ion-content>

<ion-footer>
  <ion-button  
        color="success"
        expand = "block" (click)="onClickCarica()">
    <ion-icon slot="start" name="cloud-upload-outline"></ion-icon>
      Carica
  </ion-button>
</ion-footer>